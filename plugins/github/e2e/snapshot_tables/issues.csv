id,url,icon_url,number,title,description,epic_key,type,status,original_status,story_point,resolution_date,created_date,updated_date,lead_time_minutes,parent_issue_id,priority,original_estimate_minutes,time_spent_minutes,time_remaining_minutes,creator_id,creator_name,assignee_id,assignee_name,severity,component
gitlab:GithubIssue:339004478,https://github.com/panjf2000/ants/issues/1,,1,æµ‹è¯•å‘ç°ä½¿ç”¨æ± è®¡ç®—æ—¶é—´å¹¶æ²¡æœ‰ç¼©çŸ­ï¼Œåªæœ‰å†…å­˜å ç”¨å˜å°äº†ã€‚,"""![image](https://user-images.githubusercontent.com/3971390/42390612-0f596eca-817f-11e8-975a-bb8091f5dd5a.png)\r\næ‚¨å¥½ï¼Œæˆ‘æŠŠæ‚¨çš„ä»£ç æ‹‰å€’æœ¬åœ°ï¼Œè¿è¡Œäº†æµ‹è¯•ï¼Œä½†æ˜¯å‘ç°ï¼Œæµ‹è¯•ç»“æœå’Œæ‚¨æˆªå›¾ç»“æœæ˜¯æœ‰å·®è·çš„ï¼Œåªæ˜¯å†…å­˜å ç”¨å˜å°‘äº†ï¼Œä½†æ˜¯è®¡ç®—çš„æ—¶é—´å¹¶æ²¡æœ‰æ‚¨æµ‹è¯•çš„é‚£ç§æå‡ï¼Œå¸Œæœ›å¯ä»¥è¯·æ•™ä¸€ä¸‹è¿™é‡Œçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ""",,,DONE,,0,2018-07-07T12:58:38.000+08:00,2018-07-07T00:46:59.000+08:00,2018-07-07T12:58:38.000+08:00,731,,,0,0,0,gitlab:GithubUser:3971390,ppmoon,gitlab:GithubUser:0,,,
gitlab:GithubIssue:340102987,https://github.com/panjf2000/ants/issues/2,,2,å‡½æ•°æ‰§è¡Œä¿æŠ¤,"""```\r\nfunc (w *Worker) run() {\r\n\t//atomic.AddInt32(&w.pool.running, 1)\r\n\tgo func() {\r\n\t\tfor f := range w.task {\r\n\t\t\tif f == nil {\r\n\t\t\t\tatomic.AddInt32(&w.pool.running, -1)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tf()//ç›´æ¥æ‰§è¡Œäº†\r\n\t\t\tw.pool.putWorker(w)\r\n\t\t}\r\n\t}()\r\n}\r\n```\r\n\r\né‚£ä¹ˆä¼šä¸ä¼šå‡ºç°fæ‰§è¡Œé”™è¯¯å´©æºƒçš„æƒ…å†µï¼Ÿ\r\nåŠ ä¸ªæ‰§è¡Œä¿æŠ¤ä¸çŸ¥é“è¡Œä¸è¡Œã€‚ã€‚ã€‚æ–°æ‰‹ã€‚""",,,DONE,,0,2018-07-12T22:04:26.000+08:00,2018-07-11T14:02:56.000+08:00,2018-07-12T22:04:26.000+08:00,1921,,,0,0,0,gitlab:GithubUser:3714381,imnewbe,gitlab:GithubUser:0,,,
gitlab:GithubIssue:344278000,https://github.com/panjf2000/ants/issues/3,,3,workers ä½¿ç”¨slice è¿˜æ˜¯listé—®é¢˜,"""çœ‹äº†ä¸‹ä»£ç ï¼Œ Poolæ˜¯ç”¨sliceæ¥è£…workersï¼Œ ä½†Poolçš„æ“ä½œä¸­ï¼Œé™¤äº†purgeå’Œreleaseä¸­éœ€è¦éå†workersï¼Œ getWorkerå’ŒputWorker éƒ½æ˜¯å¯¹é˜Ÿå°¾å‡ºé˜Ÿå…¥é˜Ÿçš„æ“ä½œï¼Œ æ˜¯å¦å¯ä»¥è€ƒè™‘ç”¨ container/list ? (å‡è®¾ï¼Œè¿˜æ²¡éªŒè¯)ã€‚\r\n\r\n\r\nå¦å¤–è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œ åœ¨putWokersæ—¶æœ‰ä¸ªappendæ“ä½œï¼Œ è¿™é‡Œæ˜¯ä¸æ˜¯å¯ä»¥åœ¨NewPoolæ—¶ï¼Œ ç»™workers slice é¢„åˆ†é…ä¸€äº›ç©ºé—´å‘¢ï¼Ÿ""",,,DONE,,0,2018-07-26T10:32:41.000+08:00,2018-07-25T11:22:01.000+08:00,2018-07-26T10:32:41.000+08:00,1390,,,0,0,0,gitlab:GithubUser:16658738,barryz,gitlab:GithubUser:0,,,
gitlab:GithubIssue:346842831,https://github.com/panjf2000/ants/issues/5,,5,å…³äº <-p.freeSignal çš„ç–‘æƒ‘,"""Hi,\r\n    æˆ‘é˜…è¯»äº†æºç ï¼Œå¯¹ `<-p.freeSignal` è¿™å¥ä»£ç æœ‰ç–‘æƒ‘ã€‚ è¿™å¥ä»£ç å‡ºç°åœ¨äº†å¤šä¸ªåœ°æ–¹ï¼ŒfreeSignal çš„ä½œç”¨è‹±æ–‡æ³¨é‡Šæˆ‘æ˜¯ç†è§£çš„ï¼Œå¹¶ä¸”çŸ¥é“åœ¨ `putWorker` ä¸­æ‰è¿›è¡Œ `p.freeSignal <- sig{}`\r\n\r\nå¯¹äºä¸‹é¢çš„ä»£ç \r\n```\r\nfunc (p *Pool) getWorker() *Worker {\r\n\tvar w *Worker\r\n\twaiting := false\r\n\r\n\tp.lock.Lock()\r\n\tidleWorkers := p.workers\r\n\tn := len(idleWorkers) - 1\r\n\tif n < 0 { // è¯´æ˜ poolä¸­æ²¡æœ‰workeräº†\r\n\t\twaiting = p.Running() >= p.Cap()\r\n\t} else { // è¯´æ˜poolä¸­æœ‰worker\r\n\t\t<-p.freeSignal      \r\n\t\tw = idleWorkers[n]  \r\n\t\tidleWorkers[n] = nil\r\n\t\tp.workers = idleWorkers[:n]\r\n\t}\r\n\tp.lock.Unlock()\r\n\r\n\r\nfunc (p *Pool) Release() error {\r\n\tp.once.Do(func() { // ä¿è¯åªé‡Šæ”¾ä¸€æ¬¡\r\n\t\tp.release <- sig{}\r\n\t\tp.lock.Lock()\r\n\t\tidleWorkers := p.workers\r\n\t\tfor i, w := range idleWorkers {\r\n\t\t\t<-p.freeSignal\r\n\t\t\tw.task <- nil\r\n\t\t\tidleWorkers[i] = nil\r\n\t\t}\r\n\t\tp.workers = nil\r\n\t\tp.lock.Unlock()\r\n\t})\r\n\treturn nil\r\n}\r\n\r\n```\r\n\r\nä¸­çš„ `<-p.freeSignal`ï¼Œ é‚£ä¸æ˜¯è¦ç­‰putWorkerè§¦å‘äº†æ‰ä¼šç»§ç»­è¿›è¡Œå—ï¼Ÿå¦‚æœ putWorkerä¸è§¦å‘ï¼Œå°±ä¸€ç›´é˜»å¡åœ¨é‚£äº†ï¼Œå³ä½¿ idleWorkers ä¸­å¯èƒ½æ˜¯æœ‰workerçš„\r\n\r\nå¯å¦è§£é‡Šä¸‹è¿™è¾¹çš„é€»è¾‘ï¼Ÿè°¢è°¢""",,,DONE,,0,2018-08-03T23:32:00.000+08:00,2018-08-02T11:09:57.000+08:00,2018-08-10T12:06:36.000+08:00,2182,,,0,0,0,gitlab:GithubUser:8605102,pathbox,gitlab:GithubUser:0,,,
gitlab:GithubIssue:347255859,https://github.com/panjf2000/ants/issues/6,,6,æ­»é”bug,"""func (p *Pool) getWorker() *Worker  è¿™ä¸ªå‡½æ•°çš„ 199è¡Œ \r\nå¿…é¡»å…ˆè§£é”åœ¨åŠ é”ï¼Œ è¦ä¸ç„¶ä¼šäº§ç”Ÿæ­»é”\r\n\r\n\tp.lock.Unlock()\r\n\t\t<-p.freeSignal\r\n\t\tp.lock.Lock()""",,BUG,DONE,,0,2018-08-04T18:18:41.000+08:00,2018-08-03T12:32:28.000+08:00,2018-08-04T18:18:41.000+08:00,1786,,,0,0,0,gitlab:GithubUser:13118848,lovelly,gitlab:GithubUser:0,,,
gitlab:GithubIssue:348630179,https://github.com/panjf2000/ants/issues/7,,7,æ¸…ç†è¿‡æœŸåç¨‹æŠ¥é”™,"""ä½ å¥½ï¼Œéå¸¸æ„Ÿè°¢æä¾›è¿™ä¹ˆå¥½ç”¨çš„å·¥å…·åŒ…ã€‚æˆ‘åœ¨ä½¿ç”¨antsæ—¶ï¼Œå‘ç°æŠ¥å¼‚å¸¸ã€‚ç»“æœè§ä¸‹å›¾\r\n![image](https://user-images.githubusercontent.com/4555057/43823431-98384444-9b21-11e8-880c-7458b931734a.png)\r\næ—¥å¿—æ˜¯æˆ‘åœ¨periodicallyPurgeé‡ŒåŠ çš„è°ƒè¯•ä¿¡æ¯\r\n![image](https://user-images.githubusercontent.com/4555057/43823534-e3c624a8-9b21-11e8-96c6-512e3e08db22.png)\r\n\r\n### åŸå› åˆ†æ\r\n\r\næˆ‘è®¤ä¸ºå¯èƒ½åŸå› æ˜¯æ²¡æœ‰å¤„ç†n==0çš„æƒ…å†µ\r\n```\r\nif n > 0 {\r\n\tn++\r\n\tp.workers = idleWorkers[n:]\r\n}\r\n```\r\n\r\n\r\n### æµ‹è¯•ä»£ç \r\n```\r\npackage main\r\n\r\nimport (\r\n\t\""github.com/panjf2000/ants\""\r\n\t\""fmt\""\r\n\t\""time\""\r\n\t\""strconv\""\r\n)\r\n\r\nfunc main() {\r\n\r\n\tpool,err := ants.NewPool(100000)\r\n\r\n\tif err != nil {\r\n\t\tpanic(err)\r\n\t}\r\n\r\n\tfor i:=0;i<10000;i++{\r\n\t\tpool.Submit(\r\n\t\t\tfunc() error {\r\n\t\t\t\ttime.Sleep(1 * time.Millisecond)\r\n\t\t\t\tfmt.Println(strconv.Itoa(i))\r\n\t\t\t\treturn nil\r\n\t\t\t})\r\n\t}\r\n\r\n\tfor{\r\n\t\tpool.Submit(\r\n\t\t\tfunc() error {\r\n\t\t\t\ttime.Sleep(10 * time.Millisecond)\r\n\t\t\treturn nil\r\n\t\t})\r\n\t\ttime.Sleep(1 * time.Millisecond)\r\n\t}\r\n}\r\n```""",,BUG,DONE,,0,2018-08-10T12:06:04.000+08:00,2018-08-08T16:43:15.000+08:00,2018-08-10T12:06:04.000+08:00,2602,,,0,0,0,gitlab:GithubUser:4555057,huiwq1990,gitlab:GithubUser:0,,,
gitlab:GithubIssue:356703393,https://github.com/panjf2000/ants/issues/10,,10,é«˜å¹¶å‘ä¸‹è®¾å®šè¾ƒå°çš„workeræ•°é‡é—®é¢˜,"""ä¼šå­˜åœ¨cpué£šå‡çš„é—®é¢˜å§ï¼Ÿ""",,,DONE,,0,2018-09-29T19:45:00.000+08:00,2018-09-04T16:26:55.000+08:00,2018-09-29T19:45:00.000+08:00,36198,,,0,0,0,gitlab:GithubUser:11763614,Moonlight-Zhao,gitlab:GithubUser:0,,,
gitlab:GithubIssue:364361014,https://github.com/panjf2000/ants/issues/12,,12,æ½˜å°‘ï¼Œæ›´æ–°ä¸‹tagå§,"""é„™äººç°åœ¨åœ¨å¼„depä¾èµ–ç®¡ç†ï¼Œæœ‰ç”¨åˆ°ä½ å†™çš„antsé¡¹ç›®ï¼Œå¯æ˜¯ä½ å¥½åƒå¿˜è®°æ‰“æœ€æ–°çš„tagäº†ã€‚æœ€æ–°çš„tag 3.6æ˜¯æŒ‡å‘ed55924è¿™ä¸ªæäº¤ï¼Œgitä¸Šçš„æœ€æ–°ä»£ç æ˜¯af376f1bè¿™æ¬¡æäº¤ï¼Œä¸¤æ¬¡æäº¤éƒ½éš”äº†å¿«5ä¸ªæœˆäº†ï¼Œçœ‹åˆ°çš„è¯ï¼Œéº»çƒ¦æ‰“ä¸€ä¸ªæœ€æ–°çš„tagå§ã€‚ï¼ˆæ‰‹åŠ¨å¯æ€œï¼‰""",,,DONE,,0,2018-09-28T14:05:58.000+08:00,2018-09-27T16:32:25.000+08:00,2019-04-21T16:19:58.000+08:00,1293,,,0,0,0,gitlab:GithubUser:29452204,edcismybrother,gitlab:GithubUser:0,,,
gitlab:GithubIssue:424634533,https://github.com/panjf2000/ants/issues/29,,29,ä»»åŠ¡ä¼ å‚,"""ä½ å¥½ï¼Œä½ çš„é¡¹ç›®å¤ªé…·äº†ğŸ‘\r\n\r\nhttps://github.com/panjf2000/ants/blob/master/pool.go#L124 è²Œä¼¼ä¸æ”¯æŒå¸¦å‚æ•°çš„ä»»åŠ¡, è¯·é—®ä¼ å‚æ˜¯ç”¨é—­åŒ…çš„æ–¹å¼å—?\r\n""",,,DONE,,0,2019-03-25T17:32:11.000+08:00,2019-03-25T00:52:21.000+08:00,2019-03-25T17:45:05.000+08:00,999,,,0,0,0,gitlab:GithubUser:8509898,prprprus,gitlab:GithubUser:0,,,
gitlab:GithubIssue:381941219,https://github.com/panjf2000/ants/issues/17,,17,å…³äºä¼˜é›…é€€å‡ºçš„é—®é¢˜,"""å…³äºè¿™ä¸ªpackageä¼˜é›…é€€å‡ºçš„é—®é¢˜ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹Releaseçš„ä»£ç ï¼š\r\n\r\n`\r\n\t// Release Closed this pool.\r\n\tfunc (p *PoolWithFunc) Release() error {\r\n\t\tp.once.Do(func() {\r\n\t\t\tp.release <- sig{}\r\n\t\t\tp.lock.Lock()\r\n\t\t\tidleWorkers := p.workers\r\n\t\t\tfor i, w := range idleWorkers {\r\n\t\t\t\tw.args <- nil\r\n\t\t\t\tidleWorkers[i] = nil\r\n\t\t\t}\r\n\t\t\tp.workers = nil\r\n\t\t\tp.lock.Unlock()\r\n\t\t})\r\n\t\treturn nil\r\n\t}\r\n`\r\n\r\nreleaseä¸­ï¼Œå¥½åƒæ²¡æœ‰å»ç­‰å¾…é‚£äº›å·²ç»æ­£åœ¨å·¥ä½œçš„workerå¤„ç†å®Œå®ƒä»¬çš„å·¥ä½œï¼Ÿ\r\nä»…ä»…æ˜¯å›æ”¶äº†ç©ºé—²çš„worker\r\n\r\né‚£ä¹ˆåœ¨æ”¶åˆ°ç¨‹åºé€€å‡ºçš„ä¿¡å·æ—¶å€™ï¼Œreleaseæ˜¯ä¸èƒ½ç¡®ä¿æ­£åœ¨å·¥ä½œçš„workerèƒ½å¦¥å–„å®Œæˆå·¥ä½œ\r\n\r\nå¦‚æœæƒ³å®ç°æ¯”è¾ƒå¥½é€€å‡ºæ–¹å¼ç›®å‰å¥½åƒæ˜¯ï¼š\r\n\r\nReSize(0) \r\n\r\nä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Ÿ\r\n""",,,DONE,,0,2019-01-29T15:24:37.000+08:00,2018-11-18T16:50:31.000+08:00,2019-01-29T15:24:37.000+08:00,103594,,,0,0,0,gitlab:GithubUser:7931755,zplzpl,gitlab:GithubUser:0,,,
gitlab:GithubIssue:382039050,https://github.com/panjf2000/ants/issues/18,,18,goåç¨‹çš„ç†è§£,"""ä½ å¥½æ¥¼ä¸»ï¼Œå‘æ‚¨è¯·æ•™ä¸€ä¸ªåç¨‹å’Œçº¿ç¨‹çš„é—®é¢˜ï¼Œåç¨‹åŸºäºgoè¿›ç¨‹è°ƒåº¦ï¼Œçº¿ç¨‹åŸºäºç³»ç»Ÿå†…æ ¸è°ƒåº¦ï¼Œè°ƒåº¦åç¨‹çš„è¿‡ç¨‹æ˜¯å…ˆè°ƒåº¦çº¿ç¨‹åè·å¾—èµ„æºå†å»è°ƒåº¦åç¨‹ã€‚\""å®˜æ–¹è§£é‡Šï¼š GOMAXPROCS sets the maximum number of CPUs that can be executing simultaneouslyã€‚é™åˆ¶cpuæ•°ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»€ä¹ˆï¼Œé™åˆ¶å¹¶è¡Œæ•°?ï¼Œå¹¶è¡Œæ•°å³åŒæ—¶æ‰§è¡Œæ•°é‡?ï¼Œæ‰§è¡Œå•å…ƒå³çº¿ç¨‹?ï¼Œå³é™åˆ¶æœ€å¤§å¹¶è¡Œçº¿ç¨‹æ•°é‡?\""""",,,DONE,,0,2018-12-03T11:53:50.000+08:00,2018-11-19T10:59:53.000+08:00,2018-12-03T11:53:50.000+08:00,20213,,,0,0,0,gitlab:GithubUser:13944100,LinuxForYQH,gitlab:GithubUser:0,,,
gitlab:GithubIssue:382574800,https://github.com/panjf2000/ants/issues/20,,20,æ˜¯å¦è€ƒè™‘ä»»åŠ¡æ”¯æŒå›è°ƒå‡½æ•°å¤„ç†å¤±è´¥çš„é€»è¾‘å’Œä»»åŠ¡ä¾èµ–,"""#""",,,DONE,,0,2019-01-25T23:34:03.000+08:00,2018-11-20T17:36:02.000+08:00,2019-01-25T23:34:03.000+08:00,95398,,,0,0,0,gitlab:GithubUser:5668717,kklinan,gitlab:GithubUser:0,,,
gitlab:GithubIssue:388907811,https://github.com/panjf2000/ants/issues/21,,21,Benchmark ä¸‹ç›´æ¥ä½¿ç”¨ Semaphore ä¼¼ä¹æ›´å¿«å‘¢ï¼Ÿ,"""ç®€å•è·‘äº†ä¸€ä¸‹ benchmarkï¼ŒSemaphore æ›´å¿«ä¸”å¾ˆç®€å•\r\n\r\n```bash\r\n$ go test -bench .\r\ngoos: darwin\r\ngoarch: amd64\r\npkg: github.com/panjf2000/ants\r\nBenchmarkGoroutineWithFunc-4   \t       1\t3445631705 ns/op\r\nBenchmarkSemaphoreWithFunc-4   \t       1\t1037219073 ns/op\r\nBenchmarkAntsPoolWithFunc-4    \t       1\t1138053222 ns/op\r\nBenchmarkGoroutine-4           \t       2\t 731850771 ns/op\r\nBenchmarkSemaphore-4           \t       2\t 914855967 ns/op\r\nBenchmarkAntsPool-4            \t       1\t1094379445 ns/op\r\nPASS\r\nok  \tgithub.com/panjf2000/ants\t33.173s\r\n```\r\né‚£ Ants åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æœ‰ä¼˜åŠ¿å‘¢ï¼Ÿ""",,,DONE,,0,2018-12-14T14:01:07.000+08:00,2018-12-08T18:08:17.000+08:00,2018-12-14T14:01:07.000+08:00,8392,,,0,0,0,gitlab:GithubUser:720086,huangjunwen,gitlab:GithubUser:0,,,
gitlab:GithubIssue:401277739,https://github.com/panjf2000/ants/issues/22,,22,æ˜¯å¦è€ƒè™‘ worker ä¸­æ·»åŠ   PanicHandler ï¼Ÿ,"""æ¯”æ–¹è¯´åœ¨åˆ›å»º Pool çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ª PanicHandlerï¼Œç„¶ååœ¨æ¯ä¸ª worker åˆ›å»ºçš„æ—¶å€™ recover ä¹‹åä¼ ç»™ PanicHandler  å¤„ç†ã€‚å¦åˆ™æ± å­é‡Œå¦‚æœå‘ç”Ÿ panic ä¼šç›´æ¥æŒ‚æ‰æ•´ä¸ªè¿›ç¨‹ã€‚""",,,DONE,,0,2019-01-22T13:41:34.000+08:00,2019-01-21T18:06:56.000+08:00,2019-01-22T13:41:34.000+08:00,1174,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:402513849,https://github.com/panjf2000/ants/issues/24,,24,æäº¤ä»»åŠ¡ä¸é˜»å¡,"""`Pool.Submit`å’Œ`PoolWithFunc.Server`æäº¤ä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ç©ºçš„workerï¼Œä¼šä¸€ç›´é˜»å¡ã€‚å»ºè®®å¢åŠ ä¸é˜»å¡çš„æ¥å£ï¼Œå½“å‰å¤±è´¥æ—¶ç›´æ¥è¿”å›é”™è¯¯ã€‚""",,,DONE,,0,2019-08-20T18:56:30.000+08:00,2019-01-24T10:24:13.000+08:00,2019-08-20T18:56:30.000+08:00,300032,,,0,0,0,gitlab:GithubUser:5044825,tenfyzhong,gitlab:GithubUser:0,,,
gitlab:GithubIssue:405951301,https://github.com/panjf2000/ants/issues/25,,25,use example errors,"""./antstest.go:37:14: cannot use syncCalculateSum (type func()) as type ants.f in argument to ants.Submit\r\n./antstest.go:45:35: cannot use func literal (type func(interface {})) as type ants.pf in argument to ants.NewPoolWithFunc\r\n""",,,DONE,,0,2019-02-04T17:11:52.000+08:00,2019-02-02T13:43:38.000+08:00,2019-02-04T17:11:52.000+08:00,3088,,,0,0,0,gitlab:GithubUser:5244267,jiashiwen,gitlab:GithubUser:0,,,
gitlab:GithubIssue:413968505,https://github.com/panjf2000/ants/issues/26,,26,runningå¯èƒ½å¤§äºcapçš„é—®é¢˜,"""runningä¸capçš„æ¯”è¾ƒåˆ¤æ–­ä¸incRuningåˆ†å¼€æ‰§è¡Œçš„, å¯èƒ½ä¼šå‡ºç°runningå¤§äºcapçš„é—®é¢˜?\r\n`func (p *Pool) retrieveWorker() *Worker {\r\n\tvar w *Worker\r\n\r\n\tp.lock.Lock()\r\n\tidleWorkers := p.workers\r\n\tn := len(idleWorkers) - 1\r\n\tif n >= 0 {\r\n\t\tw = idleWorkers[n]\r\n\t\tidleWorkers[n] = nil\r\n\t\tp.workers = idleWorkers[:n]\r\n\t\tp.lock.Unlock()\r\n\t} else if p.Running() < p.Cap() {\r\n\t\tp.lock.Unlock()\r\n\t\tif cacheWorker := p.workerCache.Get(); cacheWorker != nil {\r\n\t\t\tw = cacheWorker.(*Worker)\r\n\t\t} else {\r\n\t\t\tw = &Worker{\r\n\t\t\t\tpool: p,\r\n\t\t\t\ttask: make(chan func(), workerChanCap),\r\n\t\t\t}\r\n\t\t}\r\n\t\tw.run()`""",,,DONE,,0,2019-03-12T20:01:57.000+08:00,2019-02-25T15:29:33.000+08:00,2019-03-12T20:01:57.000+08:00,21872,,,0,0,0,gitlab:GithubUser:10361713,Ainiroad,gitlab:GithubUser:0,,,
gitlab:GithubIssue:419183961,https://github.com/panjf2000/ants/issues/27,,27,ä¸ºä½•goroutineä¸€ç›´ä¸Šä¸å»ï¼Œç”¨æˆ·é‡ä¹Ÿæ‰“ä¸ä¸Šå»,"""ä¸ºä½•goroutineä¸€ç›´ä¸Šä¸å»ï¼Œç”¨æˆ·é‡ä¹Ÿæ‰“ä¸ä¸Šå»\r\næ˜¯æˆ‘ç”¨çš„æœ‰é—®é¢˜å—ï¼Ÿ\r\n\r\nwebsocket server\r\nhttps://github.com/im-ai/pushm/blob/master/learn/goroutine/goroutinepoolwebsocket.go\r\n\r\nwebsocket cient\r\nhttps://github.com/im-ai/pushm/blob/master/learn/goroutine/goroutinepoolwebsocketclient.go\r\n""",,,DONE,,0,2019-04-05T22:05:20.000+08:00,2019-03-10T21:08:52.000+08:00,2019-04-05T22:05:20.000+08:00,37496,,,0,0,0,gitlab:GithubUser:38367404,liliang8858,gitlab:GithubUser:0,,,
gitlab:GithubIssue:419268851,https://github.com/panjf2000/ants/issues/28,,28,cap å’Œ running æ¯”è¾ƒçš„é—®é¢˜,"""è¿™æ˜¯æˆ‘åœ¨ Playground ä¸Šé¢çš„ä»£ç  https://play.golang.org/p/D94YUU3FnX6\r\natomic åªèƒ½ä¿è¯è‡ªå¢è‡ªå‡æ—¶çš„åŸå­æ“ä½œï¼Œåœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çº¿ç¨‹å¯¹å˜é‡è¿›è¡Œäº†æ“ä½œ æ¯”è¾ƒè¿‡ç¨‹å¹¶æ— æ„ŸçŸ¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ¯”è¾ƒç»“æœ ä¸æ˜¯å®Œå…¨æ­£ç¡®çš„ï¼Œæƒ³è¦å®ç° æ¯”è¾ƒçš„æ•°é‡å®Œå…¨æ­£ç¡®ï¼Œåªèƒ½åœ¨ä¿®æ”¹å’Œæ¯”è¾ƒä¸¤ä¸ªå€¼çš„åœ°æ–¹åŠ é”\r\nåƒ #26 è¯´çš„æ˜¯å¯¹çš„""",,,DONE,,0,2019-08-23T00:27:37.000+08:00,2019-03-11T10:24:41.000+08:00,2019-08-23T00:27:37.000+08:00,237002,,,0,0,0,gitlab:GithubUser:29243953,naiba,gitlab:GithubUser:0,,,
gitlab:GithubIssue:429972115,https://github.com/panjf2000/ants/issues/31,,31,Add go.mod,"""""",,,DONE,,0,2019-04-08T17:45:31.000+08:00,2019-04-06T07:50:36.000+08:00,2019-10-17T11:12:19.000+08:00,3474,,,0,0,0,gitlab:GithubUser:48135919,tsatke,gitlab:GithubUser:0,,,
gitlab:GithubIssue:433564955,https://github.com/panjf2000/ants/issues/32,,32,å…³äºç‰ˆæœ¬é—®é¢˜ï¼Œæˆ‘å‘ç°å°ç‰ˆæœ¬(0.0.x)è¿™ç§æ›´æ–°å°±ä¼šä¸å‘ä¸‹å…¼å®¹ï¼Ÿ,"""å¦‚é¢˜ï¼Œæˆ‘æ„Ÿè§‰è¿™æ ·ä¸å¥½ã€‚\r\n\r\nåŠŸèƒ½ç‰ˆæœ¬å·ä¸å‘ä¸‹å…¼å®¹èƒ½ç†è§£\r\n\r\nä¿®å¤é—®é¢˜çš„ç‰ˆæœ¬å·ä¹Ÿä¸å‘ä¸‹å…¼å®¹ï¼Œéš¾ä»¥ç†è§£ã€‚""",,,DONE,,0,2019-04-21T15:16:26.000+08:00,2019-04-16T11:16:02.000+08:00,2019-04-21T15:16:26.000+08:00,7440,,,0,0,0,gitlab:GithubUser:7931755,zplzpl,gitlab:GithubUser:0,,,
gitlab:GithubIssue:434069015,https://github.com/panjf2000/ants/issues/33,,33,support semantic versioning.,"""å»ºè®®å°†å‘å¸ƒçš„tagå…¼å®¹ä¸ºsemantic versioningï¼ŒvX.Y.Zã€‚go moduleså¯¹æ­¤æ”¯æŒæ¯”è¾ƒè‰¯å¥½ã€‚\r\nhttps://semver.org/\r\nhttps://research.swtch.com/vgo-import""",,,DONE,,0,2019-04-21T16:25:20.000+08:00,2019-04-17T10:55:11.000+08:00,2019-04-21T16:25:20.000+08:00,6090,,,0,0,0,gitlab:GithubUser:1284892,jjeffcaii,gitlab:GithubUser:0,,,
gitlab:GithubIssue:435486645,https://github.com/panjf2000/ants/issues/34,,34,Important announcement about <ants> from author !!!,"""**Dear users of `ants`:**\r\nI am apologetically telling you that I have to dump all tags which already presents in `ants` repository.\r\n\r\nThe reason why I'm doing so is to standardize the version management with `Semantic Versioning`, which will make a formal and clear dependency management in go, for go modules, godep, or glide, etc. So I decide to start over the tag sequence, you could find more details in [Semantic Versioning](https://semver.org/) and [Semantic Import Versioning](https://research.swtch.com/vgo-import), related issue: #32, #33 (very thankful to @jjeffcaii and @zplzpl who provided the suggestions about it).\r\n\r\nI ought to apologize for the bothers brought by this change, the arch-criminal who leads to this issue would be my lack of concept about `Semantic Versioning`, I will spend more times learning the knowledge afterwards. \r\n\r\nOnce again, sorry for your costs in this change and thanks for your support to `ants`! \r\n\r\n*Have fun!*\r\n\r\n**Best regards,\r\nAndy Pan**\r\n""",,,DONE,,0,2019-05-07T23:35:08.000+08:00,2019-04-21T16:10:28.000+08:00,2019-05-07T23:35:08.000+08:00,23484,,,0,0,0,gitlab:GithubUser:7496278,panjf2000,gitlab:GithubUser:0,,,
gitlab:GithubIssue:461280653,https://github.com/panjf2000/ants/issues/35,,35,worker exit on panic,"""ä¸ªäººè®¤ä¸ºPanicHandlerè®¾è®¡ä¸å¦¥ã€‚\r\n1.æ— PanicHandleræ—¶ï¼ŒæŠ›å‡ºç»™å¤–é¢çš„ä¸æ˜¯panic,å¤–å±‚æ„Ÿå—ä¸åˆ°ã€‚\r\n2.æ— è®ºæœ‰æ²¡æœ‰PanicHandlerï¼Œéƒ½ä¼šå¯¼è‡´workeré€€å‡ºï¼Œæœ€ç»ˆpoolé˜»å¡ä½å…¨éƒ¨ä»»åŠ¡ã€‚""",,,DONE,,0,2019-08-18T04:33:10.000+08:00,2019-06-27T11:11:49.000+08:00,2019-08-18T04:33:10.000+08:00,74481,,,0,0,0,gitlab:GithubUser:38849208,king526,gitlab:GithubUser:0,,,
gitlab:GithubIssue:462631417,https://github.com/panjf2000/ants/issues/37,,37,è¯·ä¸è¦å†éšæ„å˜æ›´ç‰ˆæœ¬å·äº†ã€‚ã€‚ã€‚,"""ä¹‹å‰ç”¨çš„æ˜¯ 3.9.9ï¼Œç»“æœä»Šå¤©æ„å»ºå‡ºäº†é—®é¢˜ï¼Œä¸€çœ‹å‘ç°è¿™ä¸ªç‰ˆæœ¬æ²¡äº†ï¼Œå˜æˆ 1.0.0ã€‚è¿™ç§å˜æ›´å®Œå…¨ä¸è€ƒè™‘ç°æœ‰ç”¨æˆ·çš„æƒ…å†µã€‚å¸Œæœ›ä»¥åä¸è¦éšæ„å˜æ›´äº†""",,,DONE,,0,2019-07-01T20:37:55.000+08:00,2019-07-01T18:17:15.000+08:00,2019-07-02T18:17:31.000+08:00,140,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:472125082,https://github.com/panjf2000/ants/issues/38,,38,retrieveWorkerä¸revertWorkerä¹‹é—´ä¼šå¯¼è‡´æ­»é”,"""func (p *Pool) retrieveWorker() *Worker {\r\n\tvar w *Worker\r\n\r\n\t**p.lock.Lock()**\r\n\tidleWorkers := p.workers\r\n\tn := len(idleWorkers) - 1\r\n\tif n >= 0 {\r\n\t\tw = idleWorkers[n]\r\n\t\tidleWorkers[n] = nil\r\n\t\tp.workers = idleWorkers[:n]\r\n\t\tp.lock.Unlock()\r\n\t} else if p.Running() < p.Cap() {\r\n\t\tp.lock.Unlock()\r\n\t\tif cacheWorker := p.workerCache.Get(); cacheWorker != nil {\r\n\t\t\tw = cacheWorker.(*Worker)\r\n\t\t} else {\r\n\t\t\tw = &Worker{\r\n\t\t\t\tpool: p,\r\n\t\t\t\ttask: make(chan func(), workerChanCap),\r\n\t\t\t}\r\n\t\t}\r\n\t\tw.run()\r\n\t} else {\r\n\t\tfor {\r\n\t\t\t**p.cond.Wait()** \r\n\t\t\tl := len(p.workers) - 1\r\n\t\t\tif l < 0 {\r\n\t\t\t\tcontinue\r\n\t\t\t}\r\n\t\t\tw = p.workers[l]\r\n\t\t\tp.workers[l] = nil\r\n\t\t\tp.workers = p.workers[:l]\r\n\t\t\tbreak\r\n\t\t}\r\n\t\t**p.lock.Unlock()**\r\n\t}\r\n\treturn w\r\n}\r\n\r\n// revertWorker puts a worker back into free pool, recycling the goroutines.\r\nfunc (p *Pool) revertWorker(worker *Worker) bool {\r\n\tif CLOSED == atomic.LoadInt32(&p.release) {\r\n\t\treturn false\r\n\t}\r\n\tworker.recycleTime = time.Now()\r\n\t**p.lock.Lock()** // åç¨‹æ± æ»¡äº†ä¹‹åè·å–ä¸åˆ°é”\r\n\tp.workers = append(p.workers, worker)\r\n\t// Notify the invoker stuck in 'retrieveWorker()' of there is an available worker in the worker queue.\r\n\tp.cond.Signal()\r\n\t**p.lock.Unlock()**\r\n\treturn true\r\n}\r\n""",,,DONE,,0,2019-07-24T16:40:01.000+08:00,2019-07-24T15:32:58.000+08:00,2019-07-24T16:40:01.000+08:00,67,,,0,0,0,gitlab:GithubUser:1290360,wwjiang,gitlab:GithubUser:0,,,
gitlab:GithubIssue:483164833,https://github.com/panjf2000/ants/issues/42,,42,å¸¦é€‰é¡¹çš„åˆå§‹åŒ–å‡½æ•°ï¼Œæˆ‘è§‰å¾—ç”¨ functional options æ›´å¥½ä¸€ç‚¹,"""ä»¥ä¸‹æ˜¯ç¤ºæ„ä»£ç \r\nå¦‚æœç”¨ functional optionsï¼ŒåŸæ¥çš„å†™æ³•æ˜¯\r\n```\r\nants.NewPool(10)\r\n```\r\næ–°çš„å†™æ³•ï¼Œå¦‚æœä¸åŠ  optionï¼Œå†™æ³•æ˜¯ä¸å˜çš„ï¼Œå› ä¸º options æ˜¯ä½œä¸ºå¯å˜å‚æ•°ä¼ è¿›å»çš„ã€‚å¦‚æœè¦åŠ  optionï¼Œåªéœ€è¦æ”¹æˆ\r\n```\r\nants.NewPool(10, ants.WithNonblocking(true))\r\n```\r\nè¿™æ ·ã€‚\r\n\r\nç°åœ¨æ˜¯ç›´æ¥ä¼ ä¸€ä¸ª Option ç»“æ„ä½“è¿›å»ï¼Œæ‰€æœ‰çš„åœ°æ–¹éƒ½è¦æ”¹ï¼Œæ„Ÿè§‰å¾ˆä¸ä¼˜é›…ã€‚\r\nå…·ä½“ functional options çš„è®¾è®¡å¯ä»¥çœ‹ rob pike çš„ä¸€ç¯‡åšå®¢ https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html""",,,DONE,,0,2019-08-21T22:32:51.000+08:00,2019-08-21T10:20:08.000+08:00,2019-08-21T22:32:51.000+08:00,732,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:483736247,https://github.com/panjf2000/ants/issues/43,,43,1.3.0 æ˜¯ä¸å…¼å®¹æ›´æ–°,"""Pool é‡Œé‚£äº›æš´éœ²å‡ºæ¥çš„å­—æ®µï¼ˆPanicHandler ä¹‹ç±»çš„ï¼‰éƒ½æ²¡äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸å…¼å®¹æ›´æ–°ï¼Œæ ¹æ®è¯­ä¹‰åŒ–ç‰ˆæœ¬çš„è¦æ±‚è¦å‘å¤§ç‰ˆæœ¬ã€‚""",,,DONE,,0,2019-08-22T21:22:10.000+08:00,2019-08-22T10:29:34.000+08:00,2019-08-22T21:22:10.000+08:00,652,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:484311063,https://github.com/panjf2000/ants/issues/44,,44,1.1.1 -> 1.2.0 ä¹Ÿæ˜¯ä¸å…¼å®¹æ›´æ–°,"""Pool.Release çš„è¿”å›å€¼æ²¡äº†""",,,DONE,,0,2019-08-25T14:36:14.000+08:00,2019-08-23T11:27:38.000+08:00,2019-08-25T14:36:14.000+08:00,3068,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:484885860,https://github.com/panjf2000/ants/issues/45,,45,"p.Tune is only for cutting down pool size, but not support enlarge.","""In the Tune Method, the scale up the pool size should be supported also. \r\nSo, before do the pool size change, check which one is bigger for the p.Running() and size, the using the bigger one to minus the small one, then assign the result to diff. \r\nWhat do you think? \r\n-------------------------------\r\nfunc (p *Pool) Tune(size uint) \r\n...\r\n**### diff := p.Running() - int(size)**\r\n\tfor i := 0; i < diff; i++ {\r\n\t\tp.retrieveWorker().task <- nil\r\n\t}""",,,DONE,,0,2019-08-25T14:20:09.000+08:00,2019-08-25T11:31:11.000+08:00,2019-08-25T14:20:09.000+08:00,168,,,0,0,0,gitlab:GithubUser:31562832,laodano1,gitlab:GithubUser:0,,,
gitlab:GithubIssue:484923460,https://github.com/panjf2000/ants/issues/46,,46,About the ExpiryDuration of ants,"""workerçš„ExpiryDurationæ—¶é—´æ€ä¹ˆè®¾ç½®ï¼Œä¸€èˆ¬è®¾ç½®æˆå¤šå°‘æ¯”è¾ƒåˆé€‚ï¼Ÿ""",,,DONE,,0,2019-08-27T13:13:44.000+08:00,2019-08-25T20:04:29.000+08:00,2019-08-27T13:13:44.000+08:00,2469,,,0,0,0,gitlab:GithubUser:41182093,ymichaelson,gitlab:GithubUser:0,,,
gitlab:GithubIssue:485565755,https://github.com/panjf2000/ants/issues/47,,47,Nonstandard operation to the Existing tag,"""æˆ‘ä»¬çš„é¡¹ç›®ä¾èµ–äº† 2.0.0-alphaï¼Œä»Šå¤©ä¸€æ„å»ºå‘ç° 2.0.0-alpha åˆæ²¡äº†""",,,DONE,,0,2019-08-27T13:10:32.000+08:00,2019-08-27T11:44:02.000+08:00,2019-08-27T13:10:32.000+08:00,86,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:491601411,https://github.com/panjf2000/ants/issues/49,,49,Checksum mismatch for go 1.13,"""Expect (go version go1.12.9 darwin/amd64):\r\n\r\n```\r\nâ†’ go mod tidy -v\r\ngo: downloading github.com/panjf2000/ants v1.2.0\r\ngo: extracting github.com/panjf2000/ants v1.2.0\r\n```\r\n\r\nActual (go version go1.13 darwin/amd64)\r\n```\r\nâ†’ go mod tidy -v\r\nverifying github.com/panjf2000/ants@v1.2.0: checksum mismatch\r\n        downloaded: h1:Ufw4aDz9RqH1RVblx2W9L9Uv5vSX5apbX5+peR7LQ5k=\r\n        sum.golang.org: h1:pMQ1/XpSgnWx3ro4y1xr/uA3jXUsTuAaU3Dm0JjwggE=\r\n\r\nSECURITY ERROR\r\nThis download does NOT match the one reported by the checksum server.\r\nThe bits may have been replaced on the origin server, or an attacker may\r\nhave intercepted the download attempt.\r\n\r\nFor more information, see 'go help module-auth'.\r\n```\r\n\r\n---\r\n\r\n**UPD**: mb this issue will be useful - https://github.com/golang/go/issues/33665\r\n\r\n---\r\n\r\n**UPD**: how resolve issue step by step (macOS):\r\n- sudo go clean -modcache\r\n- git checkout go.sum\r\n- go mod tidy -v\r\n\r\n---\r\n\r\n**UPD** for Linux:\r\n- `cd /another/path`\r\n- `go clean -modcache`\r\n- `cd /project/path`\r\n- `go mod tidy`""",,,DONE,,0,2021-06-26T22:22:09.000+08:00,2019-09-10T19:00:06.000+08:00,2021-06-26T22:22:09.000+08:00,943402,,,0,0,0,gitlab:GithubUser:888650,im-kulikov,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:492083734,https://github.com/panjf2000/ants/issues/50,,50,worker åœ¨ revertworker è¿”å› false é€€å‡ºæ—¶æ²¡æœ‰ decRunning,"""**Describe the bug**\r\nA clear and concise description of what the bug is.\r\nretrieveWorker ä¸­ï¼Œæœ‰ä¸€ä¸ªåˆ†æ”¯æ˜¯åˆ¤ p.Running() < p.Cap()ï¼Œç„¶å spawnWorkerï¼›ç”±äºè¿™ä¸ªåœ°æ–¹æ²¡é”ï¼Œå¯èƒ½å¾ˆå¤šä¸ª goroutine éƒ½è¿›å…¥åˆ°äº†è¿™ä¸ªåœ°æ–¹ï¼Œè¶…è¿‡äº† Cap çš„æ•°é‡ã€‚\r\n\r\nworker å®Œæˆå·¥ä½œä¹‹åï¼ŒrevertWorkerï¼Œä¼šå‘ç° Running > Cap ï¼Œè¿”å› falseï¼Œworker å°±ä¼šé€€å‡ºï¼Œé€€å‡ºå‰æ²¡æœ‰å‡ Runningï¼Œå¯¼è‡´ Running å§‹ç»ˆå¤§äº Capï¼Œæ± å­å¡æ­»ã€‚\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\nç”Ÿäº§ç¯å¢ƒé«˜è´Ÿè½½ä¸‹å‹å‡ºæ¥çš„ã€‚\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\nå¯¼è‡´æ± å­å¡ä½ã€‚\r\n\r\n**Error messages/Trace logs**\r\nIf applicable, add some logs to help explain your problem.\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. linux, macOS]\r\n - Go Version [e.g. 1.12]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n""",,BUG,DONE,,0,2019-09-12T09:00:52.000+08:00,2019-09-11T16:12:26.000+08:00,2019-09-12T09:00:52.000+08:00,1008,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:492130196,https://github.com/panjf2000/ants/issues/52,,52,workerCache æ²¡æœ‰åˆå§‹åŒ–,"""**Describe the bug**\r\nA clear and concise description of what the bug is.\r\næ²¡æœ‰è®¾ç½® New å‡½æ•°ï¼Œè¿™ä¸ªæ˜¯å¿˜äº†è¿˜æ˜¯æœ‰ä»€ä¹ˆç„æœºå‘¢\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Error messages/Trace logs**\r\nIf applicable, add some logs to help explain your problem.\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. linux, macOS]\r\n - Go Version [e.g. 1.12]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n""",,,DONE,,0,2019-09-11T21:06:46.000+08:00,2019-09-11T17:46:11.000+08:00,2019-09-11T21:06:46.000+08:00,200,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:509545524,https://github.com/panjf2000/ants/issues/55,,55,æ˜¯å¦å¯ä»¥æ·»åŠ SubmitQueueç±»ä¼¼çš„æ¥å£,"""ç°åœ¨submitçš„ä»»åŠ¡æ‰§è¡Œé¡ºåºå¯ä»¥è®¤ä¸ºæ˜¯éšæœºçš„ï¼Œä½†æ˜¯æœ‰åº”ç”¨çš„æƒ…å†µæ˜¯å¤„ç†æ•°æ®æ—¶æœ‰é¡ºåºå…³ç³»ï¼Œç”¨æˆ·å¯ä»¥ç”¨é˜Ÿåˆ—æ¥å¤„ç†æ­¤ç±»ä»»åŠ¡ï¼Œä½†æ˜¯æ¯ä¸ªtask handlerä¸­éƒ½å¢åŠ äº†é˜Ÿåˆ—çš„ä»£ç ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç´¯èµ˜ã€‚\r\n\r\nå¦‚æœantsæœ‰SumbitQueue(queueName interface{}, task func())error è¿™æ ·çš„æ¥å£ï¼Œåˆ™ä½¿ç”¨èµ·æ¥æ„Ÿè§‰æ–¹ä¾¿å¾ˆå¤š""",,,DONE,,0,2019-10-20T22:05:46.000+08:00,2019-10-20T12:45:37.000+08:00,2019-10-20T22:05:47.000+08:00,560,,,0,0,0,gitlab:GithubUser:47293522,yangjuncode,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:513276141,https://github.com/panjf2000/ants/issues/56,,56,éé˜»å¡åœ¨PoolOverloadæ—¶è¿›å…¥ç­‰å¾…é˜Ÿåˆ—,"""**Is your feature request related to a problem? Please describe.**\r\nsubmitçš„å‡½æ•°å¦‚æœæ˜¯é€’å½’å‡½æ•°ï¼Œåˆ™å¦‚æœæ˜¯é˜»å¡æ¨¡å¼ï¼Œåœ¨é€’å½’æ·±åº¦è¾ƒå¤§çš„æ—¶å€™ï¼Œä¼šå› ä¸ºworkerç”¨å…‰ï¼Œç¨‹åºç›´æ¥è¢«é˜»å¡äº†ï¼Œå¦‚æœè°ƒæ•´ä¸ºéé˜»å¡æ¨¡å¼ï¼Œåˆ™ä¼šåœ¨workerç”¨å…‰ä¹‹åï¼Œåé¢çš„ä»»åŠ¡ç›´æ¥è¿”å›ErrPoolOverloadè€Œè¢«èˆå¼ƒã€‚æˆ‘æ˜¯åœ¨éå†ç›®å½•çš„æ—¶å€™é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ã€‚\r\n\r\n**Describe the solution you'd like**\r\nå¢åŠ ä¸€ä¸ªé…ç½®é¡¹ï¼Œéé˜»å¡æ¨¡å¼ä¸‹ï¼Œå¯ä»¥é€‰æ‹©å¢åŠ ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯èˆå¼ƒã€‚\r\n\r\n**Describe alternatives you've considered**\r\nå¢åŠ ä¸€ä¸ªchannelï¼Œç”¨äºtaskå®Œæˆåé€šçŸ¥ç­‰å¾…é˜Ÿåˆ—\r\n\r\n\r\n""",,REQUIREMENT,DONE,,0,2019-10-28T23:29:24.000+08:00,2019-10-28T20:33:09.000+08:00,2019-10-28T23:29:24.000+08:00,176,,,0,0,0,gitlab:GithubUser:16379361,HaoKunT,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:515876300,https://github.com/panjf2000/ants/issues/57,,57,è¯·é—® bytedance çš„ä»€ä¹ˆé¡¹ç›®ä½¿ç”¨äº† antsï¼Ÿ,"""çœ‹ readme é‡Œå†™äº† bytedance""",,,DONE,,0,2019-11-01T13:13:48.000+08:00,2019-11-01T10:39:33.000+08:00,2019-11-01T13:13:48.000+08:00,154,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:0,,,
gitlab:GithubIssue:519634014,https://github.com/panjf2000/ants/issues/58,,58,ä¸šåŠ¡é€»è¾‘ panic é—®é¢˜,"""`package main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""net\""\r\n\t\""sync\""\r\n\t\""time\""\r\n\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\n\r\n\r\nfunc doPortScan(i interface{}) {\r\n\t\r\n\tport := i.(int32)\r\n\r\n\t_, err := net.DialTimeout(\""tcp\"", fmt.Sprintf(\""192.168.20.1:%d\"", port), time.Second*1)\r\n\tif err != nil {\r\n\t\treturn\r\n\t}\r\n\r\n\tfmt.Printf(\""Port  %d is open\\n\"", port)\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunc main() {\r\n\tdefer ants.Release()\r\n\r\n\trunTimes := 65535\r\n\r\n\t// Use the common pool.\r\n\tvar wg sync.WaitGroup\r\n\r\n\r\n\t// Use the pool with a method,\r\n\t// set 10 to the capacity of goroutine pool and 1 second for expired duration.\r\n\tp, _ := ants.NewPoolWithFunc(300, func(i interface{}) {\r\n\t\tdoPortScan(i)\r\n\t\twg.Done()\r\n\t})\r\n\tdefer p.Release()\r\n\t// Submit tasks one by one.\r\n\tfor i := 0; i < runTimes; i++ {\r\n\t\twg.Add(1)\r\n\r\n\t\t_ = p.Invoke(int32(i))\r\n\t}\r\n\twg.Wait()\r\n\tfmt.Printf(\""running goroutines: %d\\n\"", p.Running())\r\n\r\n}\r\n`\r\nå´©æºƒæ—¶çš„ç°è±¡å¦‚ä¸‹ï¼š\r\n`\r\ngoroutine 543 [runnable]:\r\ngithub.com/panjf2000/ants/v2.(*goWorkerWithFunc).run.func1(0xc000255e00)\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/worker_func.go:65 +0x85\r\ncreated by github.com/panjf2000/ants/v2.(*goWorkerWithFunc).run\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/worker_func.go:49 +0x4c\r\n\r\ngoroutine 544 [runnable]:\r\nsyscall.syscall(0x108b820, 0x25, 0xc00048800c, 0x10, 0xffffffffffffffff, 0xffffffffffffffff, 0x24)\r\n\t/usr/local/go/src/runtime/sys_darwin.go:63 +0x2e\r\nsyscall.connect(0x25, 0xc00048800c, 0x10, 0x0, 0x0)\r\n\t/usr/local/go/src/syscall/zsyscall_darwin_amd64.go:91 +0x5c\r\nsyscall.Connect(0x25, 0x1158f40, 0xc000488000, 0x111ac80, 0x1)\r\n\t/usr/local/go/src/syscall/syscall_unix.go:251 +0x62\r\nnet.(*netFD).connect(0xc0000e2180, 0x115a280, 0xc0003ff200, 0x0, 0x0, 0x1158f40, 0xc000488000, 0x0, 0x0, 0x0, ...)\r\n\t/usr/local/go/src/net/fd_unix.go:70 +0x7b\r\nnet.(*netFD).dial(0xc0000e2180, 0x115a280, 0xc0003ff200, 0x115a7a0, 0x0, 0x115a7a0, 0xc000255e90, 0x0, 0x1, 0xc000061890)\r\n\t/usr/local/go/src/net/sock_posix.go:149 +0xff\r\nnet.socket(0x115a280, 0xc0003ff200, 0x1133ff4, 0x3, 0x2, 0x1, 0x0, 0x0, 0x115a7a0, 0x0, ...)\r\n\t/usr/local/go/src/net/sock_posix.go:70 +0x1c0\r\nnet.internetSocket(0x115a280, 0xc0003ff200, 0x1133ff4, 0x3, 0x115a7a0, 0x0, 0x115a7a0, 0xc000255e90, 0x1, 0x0, ...)\r\n\t/usr/local/go/src/net/ipsock_posix.go:141 +0x141\r\nnet.(*sysDialer).doDialTCP(0xc0000e2100, 0x115a280, 0xc0003ff200, 0x0, 0xc000255e90, 0x110a680, 0x123ab20, 0x0)\r\n\t/usr/local/go/src/net/tcpsock_posix.go:65 +0xc2\r\nnet.(*sysDialer).dialTCP(0xc0000e2100, 0x115a280, 0xc0003ff200, 0x0, 0xc000255e90, 0xc034fda0d3, 0x121ffc0, 0xc000061ad0)\r\n\t/usr/local/go/src/net/tcpsock_posix.go:61 +0xd7\r\nnet.(*sysDialer).dialSingle(0xc0000e2100, 0x115a280, 0xc0003ff200, 0x11593c0, 0xc000255e90, 0x0, 0x0, 0x0, 0x0)\r\n\t/usr/local/go/src/net/dial.go:578 +0x36e\r\nnet.(*sysDialer).dialSerial(0xc0000e2100, 0x115a280, 0xc0003ff200, 0xc0000b38a0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\r\n\t/usr/local/go/src/net/dial.go:546 +0x221\r\nnet.(*Dialer).DialContext(0xc000061e40, 0x115a240, 0xc0000ce008, 0x1133ff4, 0x3, 0xc0000ce6f0, 0x10, 0x0, 0x0, 0x0, ...)\r\n\t/usr/local/go/src/net/dial.go:424 +0x666\r\nnet.(*Dialer).Dial(...)\r\n\t/usr/local/go/src/net/dial.go:347\r\nnet.DialTimeout(0x1133ff4, 0x3, 0xc0000ce6f0, 0x10, 0x3b9aca00, 0xc0000ce6f0, 0x10, 0x0, 0x0)\r\n\t/usr/local/go/src/net/dial.go:333 +0xb5\r\nmain.doPortScan(0x10fe540, 0xc0000ce6d4)\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/examples/main.go:42 +0xd8\r\nmain.main.func1(0x10fe540, 0xc0000ce6d4)\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/examples/main.go:90 +0x3e\r\ngithub.com/panjf2000/ants/v2.(*goWorkerWithFunc).run.func1(0xc000255e30)\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/worker_func.go:69 +0xbd\r\ncreated by github.com/panjf2000/ants/v2.(*goWorkerWithFunc).run\r\n\t/Users/mac/go/src/github.com/panjf2000/ants/worker_func.go:49 +0x4c\r\nexit status 2`""",,,DONE,,0,2019-11-13T10:19:02.000+08:00,2019-11-08T11:14:31.000+08:00,2019-11-13T10:19:03.000+08:00,7144,,,0,0,0,gitlab:GithubUser:36106762,pwnfun,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:524118492,https://github.com/panjf2000/ants/issues/59,,59,ä¼˜å…ˆçº§é˜Ÿåˆ—æ”¯æŒ,"""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\nä¼˜å…ˆçº§è°ƒåº¦ã€‚æ¯”å¦‚é™¤äº† Submit ä¹‹å¤–ï¼Œæä¾› SubmitUrge æ¥å£ä¹‹ç±»çš„ï¼Œæä¾›å¤šä¼˜å…ˆçº§è°ƒåº¦åŠŸèƒ½\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\næœ€ç®€å•çš„åŠæ³•ï¼Œå¯ä»¥åšä¸‰ä¸ªé˜Ÿåˆ—ï¼Œæœ€é«˜çš„æ˜¯ urgentï¼Œæœ€ä½çš„æ˜¯ delayedï¼Œä¸­é—´çš„å°±æ˜¯ç°åœ¨çš„é˜Ÿåˆ—ã€‚è°ƒåº¦ç­–ç•¥å¯ä»¥å¼€æˆ interface æ–¹ä¾¿å®šåˆ¶ï¼Œç®€å•çš„ç­–ç•¥å¯ä»¥ç±»ä¼¼äºå†…æ ¸ io è°ƒåº¦çš„ deadline è°ƒåº¦å™¨ã€‚\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\nåªèƒ½åšå¤šä¸ª poolï¼Œä½†æ˜¯ä¹Ÿä¸å¥½å®ç°å¤šä¸ª pool ä¹‹é—´çš„ä¼˜å…ˆçº§è°ƒåº¦ã€‚\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\nç¡®å®æœ‰é«˜ä¼˜å…ˆçº§è°ƒåº¦çš„éœ€æ±‚\r\n""",,REQUIREMENT,TODO,,0,,2019-11-18T11:49:17.000+08:00,2021-07-03T16:30:50.000+08:00,0,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:524800426,https://github.com/panjf2000/ants/issues/60,,60,goroutine ä¸æ˜¯åç¨‹ï¼Œé¡¹ç›®æè¿°ä¸å‡†ç¡®ã€‚,"""**Describe the bug**\r\nA clear and concise description of what the bug is.\r\n\r\nç›®å‰çš„é¡¹ç›®æè¿°é‡Œæåˆ°ï¼Œâ€œ ants æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ä¸”ä½æŸè€—çš„ goroutine åç¨‹æ± ã€‚â€ï¼Œè¿™ä¸ªè¯´æ³•æ˜¯ä¸æ­£ç¡®çš„ï¼Œgoroutine ä¸æ˜¯åç¨‹ã€‚\r\n\r\né¦–å…ˆï¼Œgoroutine ä¸æ˜¯æˆ‘ä»¬é€šå¸¸è¯´çš„åä½œå¼è°ƒåº¦ï¼Œç»å¤§éƒ¨åˆ†çš„ go ç¨‹åºéƒ½æ˜¯æ²¡æœ‰ runtime.Gosched çš„ã€‚å¦‚æœè®¤ä¸º go scheduler å†…éƒ¨çš„æŠ¢å è°ƒåº¦ç›®å‰ä¸å®Œå–„ï¼Œé‚£ linux å†…æ ¸åœ¨ 2.å‡  æŸä¸ªç‰ˆæœ¬ä¹‹å‰ä¹Ÿæ²¡æœ‰å®Œå–„çš„æŠ¢å è°ƒåº¦ï¼Œéš¾é“ linux çº¿ç¨‹ä¹Ÿæ˜¯åç¨‹å—ã€‚\r\n\r\nå¦å¤–ï¼Œé¢„æœŸ Go 1.14 å°±æœ‰å®Œå…¨çš„æŠ¢å è°ƒåº¦äº†ï¼Œæ›´è·Ÿåç¨‹ä¸æ­è¾¹äº†ã€‚\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Go to '...'\r\n2. Click on '....'\r\n3. Scroll down to '....'\r\n4. See error\r\n\r\n**Expected behavior**\r\nA clear and concise description of what you expected to happen.\r\n\r\n**Error messages/Trace logs**\r\nIf applicable, add some logs to help explain your problem.\r\n\r\n**System info (please complete the following information):**\r\n - OS: [e.g. linux, macOS]\r\n - Go Version: [e.g. 1.12]\r\n - ants version: [e.g. v2.2.2]\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n""",,REQUIREMENT,DONE,,0,2019-11-21T12:24:33.000+08:00,2019-11-19T14:21:33.000+08:00,2020-04-07T09:27:12.000+08:00,2763,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:524906588,https://github.com/panjf2000/ants/issues/61,,61,ä¸ºä»€ä¹ˆæˆ‘æ— æ³•è·å–åˆ° v2 ç‰ˆæœ¬,"""go get -u github.com/panjf2000/ants/v2\r\n\r\n```\r\npackage github.com/panjf2000/ants/v2: cannot find package \""github.com/panjf2000/ants/v2\"" in any of:\r\n        /usr/local/go/src/github.com/panjf2000/ants/v2 (from $GOROOT)\r\n        /Users/xxx/Desktop/go/gin/src/github.com/panjf2000/ants/v2 (from $GOPATH)\r\n\r\n```""",,BUG,DONE,,0,2019-11-19T18:16:01.000+08:00,2019-11-19T18:11:36.000+08:00,2019-11-19T18:16:02.000+08:00,4,,,0,0,0,gitlab:GithubUser:10721527,chinawangyu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:524907361,https://github.com/panjf2000/ants/issues/62,,62,ä¸ºä»€ä¹ˆæˆ‘æ— æ³•è·å–åˆ° v2 ç‰ˆæœ¬,"""go get -u github.com/panjf2000/ants/v2\r\n\r\n```\r\npackage github.com/panjf2000/ants/v2: cannot find package \""github.com/panjf2000/ants/v2\"" in any of:\r\n        /usr/local/go/src/github.com/panjf2000/ants/v2 (from $GOROOT)\r\n        /Users/xxx/Desktop/go/gin/src/github.com/panjf2000/ants/v2 (from $GOPATH)\r\n\r\n```""",,,DONE,,0,2019-11-21T12:28:17.000+08:00,2019-11-19T18:12:56.000+08:00,2019-11-21T12:28:17.000+08:00,2535,,,0,0,0,gitlab:GithubUser:10721527,chinawangyu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:526983024,https://github.com/panjf2000/ants/issues/63,,63,go1.8æ— æ³•è¿è¡Œbenchmarkæµ‹è¯•,"""ä½ å¥½ï¼Œæˆ‘çš„æœ¬åœ°ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½æ˜¯go1.8ï¼Œç›®å‰é€šè¿‡go getä¼šæŠ¥cannot find package \""github.com/panjf2000/ants/v2/internalâ€é”™è¯¯ï¼Œè€Œgo1.8è¿˜ä¸æ”¯æŒgo modulesã€‚\r\næƒ³é—®ä¸€ä¸‹è¿™ä¸ªä»£ç éœ€è¦åšå“ªäº›å˜åŠ¨æ‰å¯ä»¥è¿è¡Œåœ¨go1.8ä¸Šå‘¢ï¼Ÿä½ ä»¬å¯ä»¥æä¾›æ”¯æŒä¹ˆï¼Ÿ\r\nè°¢è°¢~ #62 """,,,DONE,,0,2019-11-23T10:25:15.000+08:00,2019-11-22T12:39:07.000+08:00,2019-11-23T10:25:15.000+08:00,1306,,,0,0,0,gitlab:GithubUser:15848536,Kuching,gitlab:GithubUser:0,,,
gitlab:GithubIssue:731239827,https://github.com/panjf2000/ants/issues/121,,121,æœ‰è€ƒè™‘æ”¯æŒåŠ¨æ€ä¼¸ç¼©æ± å­å¤§å°å—ï¼Ÿ,"""""",,REQUIREMENT,DONE,,0,2020-10-28T17:18:39.000+08:00,2020-10-28T16:54:25.000+08:00,2020-10-28T17:18:39.000+08:00,24,,,0,0,0,gitlab:GithubUser:6133860,jianzhiyao,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:529767734,https://github.com/panjf2000/ants/issues/64,,64,"Hi, boys","""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n""",,,DONE,,0,2019-11-28T21:28:37.000+08:00,2019-11-28T16:40:25.000+08:00,2019-11-28T21:28:37.000+08:00,288,,,0,0,0,gitlab:GithubUser:16028668,jjshi,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:529770094,https://github.com/panjf2000/ants/issues/65,,65,internal.NewSpinLock about runtime.Gosched(),"""I see that internal.NewSpinLock() is internal Lock. Why don't use sync.Mutex?\r\nruntime.Gosched() is put current goroutine to global run queue tail.\r\nHope your response.""",,,DONE,,0,2019-12-03T17:19:56.000+08:00,2019-11-28T16:45:36.000+08:00,2020-10-18T22:46:07.000+08:00,7234,,,0,0,0,gitlab:GithubUser:16028668,jjshi,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:530708513,https://github.com/panjf2000/ants/issues/67,,67,å¢åŠ è°ƒè¯•åŠŸèƒ½,"""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\næœ‰æ—¶ä»»åŠ¡å‘ç”Ÿé—®é¢˜ï¼Œä¸€ç›´ä¸ç»“æŸæˆ–ä»»åŠ¡å¤ªå¤šï¼Œ æƒ³çŸ¥é“æ˜¯å“ªäº›ä»»åŠ¡\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\nå¢åŠ è°ƒè¯•åŠŸèƒ½ï¼Œ ä¸º ä»»åŠ¡å¢åŠ  ä»»åŠ¡åï¼ŒåŠ å…¥æ—¶é—´ç­‰ä¿¡æ¯ï¼Œ ç„¶å Pool æ·»åŠ  Stats() []TaskInfo\r\nä¸º Submit æ·»åŠ ä¸€ä¸ªäº›å¯é€‰é¡¹ï¼Œç”¨æˆ·æ·»åŠ ä»»åŠ¡åï¼ŒåŠ å…¥æ—¶é—´ï¼Œ\r\nSubmit(cb func(), opts ...TaskOption)\r\n""",,REQUIREMENT,DONE,,0,2019-12-01T21:59:08.000+08:00,2019-12-01T18:25:29.000+08:00,2019-12-01T21:59:08.000+08:00,213,,,0,0,0,gitlab:GithubUser:1052632,runner-mei,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:537859668,https://github.com/panjf2000/ants/issues/68,,68,workerçš„taské—®é¢˜,"""æˆ‘åˆç•¥çš„çœ‹äº†ä¸€ä¸‹å¯åŠ¨çš„è¿‡ç¨‹ï¼Œæœ‰å‡ ä¸ªç–‘é—®æƒ³è¯·æ•™ä¸€ä¸‹\r\nåœ¨newpoolä¹‹åï¼Œæƒ³è¦æ‰§è¡Œä»»åŠ¡éœ€è¦è°ƒç”¨poolçš„submitã€‚åœ¨submité‡Œé¢ï¼Œæœ‰ä¸€æ®µä»£ç æ˜¯w.task <- task.\r\nwæ˜¯workerçš„æ„æ€ï¼Œä½†workerçš„task chané•¿åº¦åªæœ‰1ï¼Œæ‰€ä»¥æœ‰å¹¶å‘ä»»åŠ¡æ¥çš„æ—¶å€™ï¼Œéƒ½åœ¨æŠ¢å è¿™ä¸ªw.taskã€‚è¦æ€ä¹ˆä¿è¯ä»»åŠ¡çš„å…ˆåé¡ºåºçš„ï¼Ÿ""",,,DONE,,0,2019-12-14T13:32:54.000+08:00,2019-12-14T11:33:30.000+08:00,2019-12-14T14:05:43.000+08:00,119,,,0,0,0,gitlab:GithubUser:11144120,nagasawaja,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:538994753,https://github.com/panjf2000/ants/issues/69,,69,æä¸¤ä¸ªå°éœ€æ±‚,"""1. åœ¨æ‰¹é‡æäº¤ä»»åŠ¡åï¼Œè·å–æ¯ä¸ªä»»åŠ¡å¯¹åº”çš„è¿”å›å€¼.\r\n2. åœ¨æ‰¹é‡æäº¤ä»»åŠ¡æ—¶ï¼Œå¯ä»¥æºå¸¦ä¸€ä¸ªè¶…æ—¶å‚æ•°ï¼Œè¡¨ç¤ºè¿™æ‰¹ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå¦‚æœè¶…æ—¶ï¼Œåˆ™å·²æ‰§è¡Œçš„ä»»åŠ¡æ­£å¸¸è¿”å›æ‰§è¡Œç»“æœï¼Œæœªæ‰§è¡Œçš„ä»»åŠ¡éƒ½æå‰ç»“æŸï¼ˆæˆ–ä¹Ÿè¿”å›æ‰§è¡Œç»“æœï¼Œä½†æ˜¯æ ‡æ˜æ˜¯timeoutï¼‰ã€‚""",,REQUIREMENT,DONE,,0,2019-12-18T11:54:53.000+08:00,2019-12-17T19:03:45.000+08:00,2021-09-28T16:33:48.000+08:00,1011,,,0,0,0,gitlab:GithubUser:9315278,bglmmz,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:542347075,https://github.com/panjf2000/ants/issues/70,,70,å…³äºretrieveWorkerä¸­ä¸€å°æ®µä»£ç çš„ç–‘é—®,"""```go\r\nif n >= 0 {\r\n\t\tw = idleWorkers[n]\r\n\t\tidleWorkers[n] = nil\r\n\t\tp.workers = idleWorkers[:n]\r\n\t\tp.lock.Unlock()\r\n\t} else if p.Running() < p.Cap() {\r\n\t\tp.lock.Unlock()\r\n\t\tspawnWorker()\r\n\t} else {\r\n\t\tif p.nonblocking {\r\n\t\t\tp.lock.Unlock()\r\n\t\t\treturn nil\r\n\t\t}\r\n```\r\n if p.Running() < p.Cap() åˆ¤æ–­ä»¥åç¬¦åˆæ¡ä»¶è§£é”ï¼Œå†é‡æ–°åˆ›å»ºworkerï¼Œworkerä¼šåœ¨runçš„æ—¶å€™æ‰è¿›è¡Œrunningæ•°çš„åŠ 1ä¼šä¸ä¼šæœ‰workeråœ¨runçš„æ—¶å€™è®©å‡ºcpuï¼Œæ­¤æ—¶å¦ä¸€ä¸ªåç¨‹æ‰§è¡Œåˆ°p.Running() < p.Cap()åˆ¤æ–­ä¹Ÿç¬¦åˆï¼Œä»è€Œå¯¼è‡´æœ€ç»ˆçš„runningå…¶å®æ˜¯å¤§äºcapçš„æƒ…å†µå‘¢""",,,DONE,,0,2019-12-26T13:14:15.000+08:00,2019-12-25T22:05:01.000+08:00,2019-12-26T13:14:15.000+08:00,909,,,0,0,0,gitlab:GithubUser:35391181,HobbyBear,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:543230040,https://github.com/panjf2000/ants/issues/71,,71,å¦‚ä½•é™åˆ¶httpserverçš„æœ€å¤§åç¨‹æ•°,"""ä¸httpserveré›†æˆå¥½åƒå¹¶æ²¡èƒ½è§£å†³å†…ç½®httpåŒ…æ¥ä¸€ä¸ªè¯·æ±‚å¼€ä¸€ä¸ªgoroutineçš„é—®é¢˜ï¼Œè¯·é—®è¯¥å¦‚ä½•é™åˆ¶å†…ç½®httpåŒ…çš„æœ€å¤§åç¨‹æ•°å‘¢ï¼Ÿ""",,,DONE,,0,2020-01-01T08:19:53.000+08:00,2019-12-29T00:23:21.000+08:00,2020-01-01T08:19:53.000+08:00,4796,,,0,0,0,gitlab:GithubUser:44720525,xuyang404,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:543871027,https://github.com/panjf2000/ants/issues/72,,72,å®‰è£…v1ç‰ˆæœ¬é—®é¢˜ï¼Ÿ,"""æˆ‘ç”¨go get -u github.com/panjf2000/antså®‰è£…åï¼Œä¸ºå•¥åœ¨pool.goé‡Œè¿˜æœ‰v2çš„ä¸œè¥¿ï¼Ÿ\r\n\""github.com/panjf2000/ants/v2/internal\""\r\n""",,,DONE,,0,2020-01-01T08:19:23.000+08:00,2019-12-30T20:56:57.000+08:00,2020-01-01T08:19:23.000+08:00,2122,,,0,0,0,gitlab:GithubUser:9315278,bglmmz,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:548918163,https://github.com/panjf2000/ants/issues/73,,73,how to wait for completion,"""I need graceful shutdown of my app with ants.PoolWithFunc so i need firstly forbid new tasks, and second wait for completion of already running. How can i do that with ants ?""",,REQUIREMENT,DONE,,0,2020-01-14T00:12:11.000+08:00,2020-01-13T21:08:06.000+08:00,2020-01-14T00:12:12.000+08:00,184,,,0,0,0,gitlab:GithubUser:481307,vtolstov,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:550305777,https://github.com/panjf2000/ants/issues/74,,74,periodicallyPurgeå¯ä»¥è€ƒè™‘recoveræ•è·ä¸€ä¸‹panic,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nè™½ç„¶çœ‹äº†ä¸€ä¸‹è¿™ä¸ªå‡½æ•°æ²¡å¯èƒ½painc,ä½†æ˜¯å¼€å¯goroutineä¸recoverè®©äººå¿ƒæ…Œã€‚\r\n""",,,DONE,,0,2020-01-16T11:19:03.000+08:00,2020-01-16T00:48:32.000+08:00,2020-01-17T00:20:18.000+08:00,630,,,0,0,0,gitlab:GithubUser:31125408,Andrewpqc,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:550555088,https://github.com/panjf2000/ants/issues/75,,75,æ±‚æ•™å…³äº Release å®ç°çš„ä¸€äº›ç–‘é—®,"""release æ–¹æ³•çš„å®ç°ä¸ºä»€ä¹ˆè¦è¿™æ ·é‡Šæ”¾å†…å­˜? \r\n\r\n```golang\r\nfunc (p *PoolWithFunc) Release() {\r\n\tp.once.Do(func() {\r\n\t\tatomic.StoreInt32(&p.release, 1)\r\n\t\tp.lock.Lock()\r\n\t\tidleWorkers := p.workers\r\n\t\tfor i, w := range idleWorkers {\r\n\t\t\tw.args <- nil\r\n\t\t\tidleWorkers[i] = nil\r\n\t\t}\r\n\t\tp.workers = nil\r\n\t\tp.lock.Unlock()\r\n\t})\r\n}\r\n```\r\nç›´æ¥ p.workers = nil ä¸èƒ½åšåˆ°é‡Šæ”¾å†…å­˜çš„åŠ¨ä½œå—ï¼Ÿ\r\n""",,,DONE,,0,2020-01-16T11:49:30.000+08:00,2020-01-16T11:41:16.000+08:00,2020-01-16T11:49:30.000+08:00,8,,,0,0,0,gitlab:GithubUser:38727061,chengyayu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:551948830,https://github.com/panjf2000/ants/issues/76,,76,Use pool as a queue,"""**Is your feature request related to a problem? Please describe.**\r\nI have a limited pool (sized pool), but when I reach the capacity of the pool, `Submit()` returns an error (`ErrPoolOverload`) which means the pool is full and no workers available.\r\nEven if i set `Nonblocking` to true in [`Option`].(https://gowalker.org/github.com/panjf2000/ants#Options)\r\n```Go\r\nfunc main() {\r\n\tp, _ := ants.NewPool(2, ants.WithNonblocking(true))\r\n\r\n\tfor i := 0; i < 5; i++ {\r\n\t\terr := p.Submit(func() {\r\n\t\t\tfmt.Println(\""Testing wait for 1 second...\"")\r\n\t\t\ttime.Sleep(1 * time.Second)\r\n\t\t})\r\n\t\tif err != nil {\r\n\t\t\tfmt.Println(\""Error: \"" + err.Error())\r\n\t\t}\r\n\t}\r\n\r\n\ttime.Sleep(500 * time.Second) // Only for test and block main(), something like waitgroup!\r\n}\r\n```\r\nThis code returns:\r\n```\r\nError: too many goroutines blocked on submit or Nonblocking is set\r\nError: too many goroutines blocked on submit or Nonblocking is set\r\nError: too many goroutines blocked on submit or Nonblocking is set\r\nSomething is here, waiting..\r\nSomething is here, waiting..\r\n```\r\n\r\n**Describe the solution you'd like**\r\nI think it's better to have something like a (second) queue in ants. tasks submit without any error and complete one-by-one.\r\nIn other words, `Submit()` should be non-blocking but it shouldn't return `ErrPoolOverload` error even if capacity is full, and should continue receiving tasks.\r\nI'm not sure if this feature exists in ants or not.\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\n`go` keyword can do that:\r\n```Go\r\np, _ := ants.NewPool(2, ants.WithNonblocking(false))\r\n\r\nfor i := 0; i < 5; i++ {\r\n    go p.Submit(func() {\r\n        fmt.Println(\""Testing wait for 1 second...\"")\r\n        time.Sleep(1 * time.Second)\r\n    })\r\n}\r\n```\r\nBut i think there must be a better way.""",,,DONE,,0,2020-04-25T17:39:16.000+08:00,2020-01-20T00:39:17.000+08:00,2020-04-25T17:39:16.000+08:00,139259,,,0,0,0,gitlab:GithubUser:50948745,ffb255,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:553711776,https://github.com/panjf2000/ants/issues/77,,77,å¦‚ä½•åœ¨antsä¸­æ¥æ”¶os.Signal,"""æˆ‘æƒ³è¦åœ¨mainä¸­ç›‘å¬os.Signalä¿¡å·ï¼Œå¦‚æœæœ‰ä¼ å…¥ctrl+cçš„ä¿¡å·ï¼Œå°†ä¼šé€€å‡ºæ‰€æœ‰çº¿ç¨‹ã€‚ä½†æ˜¯åœ¨æ“ä½œä¸­å‘ç°é”®å…¥ctrl+cåï¼Œæ‰“å°ä¸å‡ºæ¥â€œé€€å‡ºâ€ä¸¤ä¸ªå­—ä»¥åŠä»»åŠ¡ç»“æœã€‚ã€‚éº»çƒ¦å¸®å¿™çœ‹çœ‹æ˜¯å“ªé‡Œä¸å¯¹ï¼Œè°¢è°¢\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""github.com/panjf2000/ants/v2\""\r\n\t\""os\""\r\n\t\""os/signal\""\r\n\t\""sync\""\r\n\t\""sync/atomic\""\r\n\t\""syscall\""\r\n\t\""time\""\r\n)\r\n\r\n\r\nvar sum int32\r\nvar results []int32\r\n\r\nfunc myFunc(i interface{}) {\r\n\tn := i.(int32)\r\n\tresults = append(results, n)\r\n\ttime.Sleep(10 * time.Millisecond)\r\n\tatomic.AddInt32(&sum, n)\r\n\tfmt.Printf(\""run with %d\\n\"", n)\r\n}\r\n\r\n\r\nfunc main() {\r\n\tvar wg sync.WaitGroup\r\n\r\n\tp, _ := ants.NewPoolWithFunc(2, func(i interface{}) {\r\n\t\tmyFunc(i)\r\n\t\twg.Done()\r\n\r\n\t})\r\n\r\n\t// Use the common pool.\r\n\tdefer p.Release()\r\n\t// Submit tasks one by one.\r\n\tfor i := 0; i < 1000; i++ {\r\n\t\twg.Add(1)\r\n\t\t_ = p.Invoke(int32(i))\r\n\t}\r\n\t\r\n\t//åˆå»ºchan\r\n\tc := make(chan os.Signal)\r\n\t//ç›‘å¬æŒ‡å®šä¿¡å· ctrl+c kill\r\n\tsignal.Notify(c, os.Interrupt, os.Kill)\r\n\tgo func() {\r\n\t\tfor s := range c {\r\n\t\t\tswitch s {\r\n\t\t\tcase syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT:\r\n\t\t\t\tfmt.Println(\""é€€å‡º\"", s)\r\n\t\t\t\tExitFunc()\r\n\t\t\tdefault:\r\n\t\t\t\tfmt.Println(\""other\"", s)\r\n\t\t\t}\r\n\t\t}\r\n\t}()\r\n\t\r\n\r\n\twg.Wait()\r\n\r\n\tfmt.Printf(\""running goroutines: %d\\n\"", p.Running())\r\n\tfmt.Printf(\""running sum: %d\\n\"", sum)\r\n\tfmt.Printf(\""finish all tasks.\\n\"")\r\n\r\n}\r\n\r\nfunc ExitFunc() {\r\n\tfmt.Println(\""reslut:\"")\r\n\tfmt.Println(results)\r\n\tfmt.Println(\""exit...\"")\r\n}\r\n```\r\n""",,,DONE,,0,2020-01-23T22:43:32.000+08:00,2020-01-23T02:18:13.000+08:00,2020-01-23T22:43:33.000+08:00,1225,,,0,0,0,gitlab:GithubUser:45157320,iiiusky,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:557507246,https://github.com/panjf2000/ants/issues/78,,78,about revertWorker,"""NewPoolæ—¶ï¼ŒgoWorkerä¸­çš„channelå¤§å°ä¸éœ€è¦åˆå§‹åŒ–å—ï¼Ÿ\r\nworkerCacheä¸­task channelçš„å¤§å°è®¾ç½®æˆ1/0æœ‰ä»€ä¹ˆè€ƒè™‘ä¹ˆï¼Ÿ""",,,DONE,,0,2020-01-31T14:27:05.000+08:00,2020-01-30T21:50:37.000+08:00,2020-01-31T14:29:28.000+08:00,996,,,0,0,0,gitlab:GithubUser:12018707,blacktoot,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:576944665,https://github.com/panjf2000/ants/issues/80,,80,"å½“å¤§é‡åç¨‹åµŒå¥—æ—¶,ä¼šå‡ºç°å‡æ­»çŠ¶æ€","""ç¯å¢ƒ:\r\nlinux Centos 6.5\r\ngolang1.13\r\nç°è±¡:\r\n1.åˆ›å»º2ä¸ªpool:p1,p2\r\n2.ä»chanä¸æ–­çš„æ‹¿å‡ºæ¶ˆæ¯ååœ¨p1åˆ›å»ºgoroutine\r\n3.p1å»ºç«‹goroutineå,åœ¨p2ç”Ÿæˆ100ä¸ªgoroutine\r\n4.antsä¼šæ°¸è¿œé˜»å¡,å¹¶ä¸”ä¼šè¶…å‡ºåç¨‹æ± æœ¬èº«çš„é™åˆ¶\r\n![image](https://user-images.githubusercontent.com/16916249/76089201-34294400-5ff4-11ea-8722-bf0763ee0168.png)\r\n""",,BUG,DONE,,0,2020-03-09T20:18:09.000+08:00,2020-03-06T21:50:56.000+08:00,2020-03-09T20:18:10.000+08:00,4227,,,0,0,0,gitlab:GithubUser:16916249,arch3754,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:583444295,https://github.com/panjf2000/ants/issues/81,,81,how to pass context and other args in pool_func?,"""hello, @panjf2000  \r\n`func NewPoolWithFunc(size int, pf func(interface{}), options ...Option)`\r\nin NewPoolWithFunc, pf only have an ingerface{}, but i want to pass at least two args, how to solve tihes?\r\n\r\nmy run function like :\r\n```\r\nfunc (s *fileSystemServer) handleOp(\r\n\tc *Connection,\r\n\tctx context.Context,\r\n\top interface{}) {\r\n}\r\n```\r\ncontext is not suggested to put into a struct, how to pass ctx + args as one task to queue?""",,,TODO,,0,,2020-03-18T11:49:05.000+08:00,2021-11-26T20:34:47.000+08:00,0,,,0,0,0,gitlab:GithubUser:24663329,kungf,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:590876739,https://github.com/panjf2000/ants/issues/82,,82,èƒ½å¦ä¸­æ–­æœªæ‰§è¡Œå®Œæˆçš„ä»»åŠ¡ï¼Ÿ,"""æˆ‘åˆ›å»ºäº†ä¸€ä¸ªPoolWithFunc\r\nç„¶åé€šè¿‡ä¸€ä¸ªforå¾ªç¯ï¼Œç”¨pool.Invoke()æ¥æ‰§è¡Œä»»åŠ¡\r\næˆ‘çš„éœ€æ±‚æ˜¯ï¼šæˆ‘æ‰€æœ‰çš„ä»»åŠ¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„deadlineï¼Œè¶…è¿‡å°±éœ€è¦è®©æ‰€æœ‰ä»»åŠ¡é€€å‡ºï¼ˆåŒ…æ‹¬æ­£åœ¨æ‰§è¡Œä½†æ˜¯æœªæ‰§è¡Œå®Œæˆï¼Œä»¥åŠè¿˜æœªå¼€å§‹æ‰§è¡Œçš„ï¼‰\r\n\r\nè¯·é—®ï¼Œç”¨è¿™ä¸ªantsèƒ½å®ç°è¿™ä¸ªå—ï¼Ÿ\r\n\r\nè°¢è°¢ï¼""",,,DONE,,0,2020-04-06T22:23:54.000+08:00,2020-03-31T15:47:29.000+08:00,2020-04-06T22:25:18.000+08:00,9036,,,0,0,0,gitlab:GithubUser:9315278,bglmmz,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:598490848,https://github.com/panjf2000/ants/issues/83,,83,ä¸ºä»€ä¹ˆä¸ç”¨listä½œä¸ºworkerArry è€Œç”¨åˆ‡ç‰‡,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nä¸ºä»€ä¹ˆä¸ç”¨å®¹å™¨å°è£…workerçš„å®¹å™¨å‘¢""",,,DONE,,0,2020-04-12T23:23:14.000+08:00,2020-04-12T21:57:31.000+08:00,2020-04-12T23:23:14.000+08:00,85,,,0,0,0,gitlab:GithubUser:21356664,zjytra,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:598491535,https://github.com/panjf2000/ants/issues/84,,84,å½“option.Nonblockingä¸ºtrue,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nå½“option.Nonblockingä¸ºtrueæäº¤ä»»åŠ¡çš„goroutineè¦ä¸€ç›´å¾ªç¯ç­‰åˆ°åˆ°æœ‰ç©ºé—²å·¥ä½œæ¥æ”¶æ‰ä¼šå‘åé¢æ‰§è¡Œä»£ç å“¦""",,,DONE,,0,2020-04-12T23:55:35.000+08:00,2020-04-12T22:00:40.000+08:00,2020-04-12T23:55:35.000+08:00,114,,,0,0,0,gitlab:GithubUser:21356664,zjytra,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:598516739,https://github.com/panjf2000/ants/issues/85,,85,pool.Release ä¸èƒ½å¹²æ‰ç¹å¿™çš„åç¨‹å“¦,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nå¯ä»¥å°†taskè®¾ç½®ä¸ºæ¥å£,poolé‡Šæ”¾çš„æ—¶å€™ä¸»åŠ¨é€šçŸ¥task ç»“æŸ ä»»åŠ¡ï¼Œé‡Šæ”¾åç¨‹""",,,DONE,,0,2020-04-13T18:53:23.000+08:00,2020-04-13T00:02:49.000+08:00,2020-04-13T18:53:23.000+08:00,1130,,,0,0,0,gitlab:GithubUser:21356664,zjytra,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1022229785,https://github.com/panjf2000/ants/issues/187,,187,.,"""ã€‚""",,,DONE,,0,2021-10-11T12:14:26.000+08:00,2021-10-11T12:01:01.000+08:00,2021-10-11T12:21:40.000+08:00,13,,,0,0,0,gitlab:GithubUser:23187595,zt102545,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:599450188,https://github.com/panjf2000/ants/issues/86,,86,Panic occurred when using nested pools ,"""call chain :\r\n```go\r\npool1:\r\n\tantsP, _ := ants.NewPoolWithFunc(len(block.GetTransactions()), func(params interface{}) {\r\n\t\tsyncVerify1(params) //handle some verify, this func define another ants pool\r\n\t\txxxx\r\n\t})\r\n\tdefer antsP.Release()\r\npool2:\r\n      syncVerify1(params{\r\n            xxxx\r\n           antsP1, _ := ants.NewPoolWithFunc(len(block.GetTransactions()), func(params interface{}) {\r\n\t\tsyncVerify2(params)\r\n\t\txxx\r\n\t})\r\n\tdefer antsP1.Release()//problems happens\r\n      }\r\n```\r\ndebug info like this:\r\n```\r\n2020/04/14 17:50:05 worker with func exits from a panic: runtime error: invalid memory address or nil pointer dereference\r\n2020/04/14 17:50:05 worker with func exits from panic: goroutine 55 [running]:\r\ngithub.com/panjf2000/ants.(*goWorkerWithFunc).run.func1.1(0xc000165b30)\r\n        /data/home/go_workspace/src/trustsql-spv-go/vendor/github.com/panjf2000/ants/worker_func.go:59 +0x140\r\npanic(0xf859e0, 0x18950d0)\r\n        /usr/local/go/src/runtime/panic.go:679 +0x1b2\r\ngithub.com/panjf2000/ants.(*PoolWithFunc).Release(0x0)\r\n        /data/home/go_workspace/src/trustsql-spv-go/vendor/github.com/panjf2000/ants/pool_func.go:221 +0x22\r\ntrustsql-spv-go/validator.Validator.AsyncVerifyBlock(0x0, 0x1, 0xc000196090, 0x25, 0xc00016e4f0, 0xf, 0x1, 0x1, 0x0, 0x0, ...)\r\n        /data/home/go_workspace/src/trustsql-spv-go/validator/validatator.go:113 +0x3b3\r\ntrustsql-spv-go/storage.(*BlocksDaoImpl).AsyncStoreBlocks.func1(0xfbef60, 0xc0001dc6e0)\r\n        /data/home/go_workspace/src/trustsql-spv-go/storage/block_dao_impl.go:163 +0x239\r\ntrustsql-spv-go/storage.(*BlocksDaoImpl).AsyncStoreBlocks.func2(0xfbef60, 0xc0001dc6e0)\r\n        /data/home/go_workspace/src/trustsql-spv-go/storage/block_dao_impl.go:171 +0x42\r\ngithub.com/panjf2000/ants.(*goWorkerWithFunc).run.func1(0xc000165b30)\r\n        /data/home/go_workspace/src/trustsql-spv-go/vendor/github.com/panjf2000/ants/worker_func.go:71 +0xbd\r\ncreated by github.com/panjf2000/ants.(*goWorkerWithFunc).run\r\n        /data/home/go_workspace/src/trustsql-spv-go/vendor/github.com/panjf2000/ants/worker_func.go:49 +0x4c\r\n```""",,BUG,DONE,,0,2020-04-18T13:33:38.000+08:00,2020-04-14T18:05:32.000+08:00,2020-04-18T13:33:38.000+08:00,5488,,,0,0,0,gitlab:GithubUser:5850861,henkgo,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:607208427,https://github.com/panjf2000/ants/issues/88,,88,v2.PoolWithFunc has no field or method Serve,"""I encounter some build problems, hinting \""myPool.Serve undefined (type *v2.PoolWithFunc has no field or method Serve)\""\r\n\r\n```\r\nimport (\r\n\t\""fmt\""\r\n\t\""strconv\""\r\n\t\""time\""\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\n\r\nvar tunnel = make(chan string, 1)\r\nfunc main() {\r\n\r\n\t//push something to tunnel\r\n\r\n\tmyPool, _ := ants.NewPoolWithFunc(3, Myfunc)\r\n\tdefer myPool.Release()\r\n\r\n\tfor {\r\n\t\tselect {\r\n\t\tcase a := <-tunnel:\r\n\t\t\tgo myPool.Serve(a)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n""",,,DONE,,0,2020-04-27T11:50:35.000+08:00,2020-04-27T11:41:29.000+08:00,2020-04-27T17:09:25.000+08:00,9,,,0,0,0,gitlab:GithubUser:8937150,huangp0600,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:613752194,https://github.com/panjf2000/ants/issues/90,,90,æ”¯æŒ unlimited æ± å­å¤§å°,"""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\nè€ƒè™‘ä¸€ä¸ªæƒ…å†µï¼Œå½“æ± å­è¿è¡Œçš„å‡½æ•°æœ¬èº«ï¼Œåˆéœ€è¦è°ƒç”¨è¿™ä¸ªæ± å­æŠ•æ”¾æ–°çš„ä»»åŠ¡æ—¶ï¼Œæ˜¯æœ‰æ­»é”çš„å¯èƒ½çš„ã€‚ä»ä½¿ç”¨å±‚é¢ä¸Šè¿™ä¸ªé—®é¢˜å¾ˆéš¾é¿å…ï¼Œä½†æ˜¯å¦‚æœæ± å­æœ¬èº«ä¸é™åˆ¶å¤§å°ï¼Œå°±èƒ½é¿å…æ­»é”ã€‚\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\næ”¯æŒä¸é™åˆ¶æ± å­å¤§å°çš„åŠŸèƒ½ã€‚\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\nè¿™å¾ˆéš¾ï¼Œéœ€è¦ä½¿ç”¨è€…å°å¿ƒè°¨æ…åœ°ä½¿ç”¨æ± å­ï¼Œä¿è¯æ²¡æœ‰åŒä¸€ä¸ªæ± å­çš„åµŒå¥—ã€‚\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\né™åˆ¶å¹¶å‘æ•°çš„åŠŸèƒ½å®Œå…¨å¯ä»¥åœ¨ä¸Šå±‚å®ç°ï¼Œæ‰€ä»¥æ²¡ä»€ä¹ˆæŸå¤±ã€‚\r\n""",,REQUIREMENT,DONE,,0,2020-05-08T23:32:48.000+08:00,2020-05-07T11:46:20.000+08:00,2020-05-27T22:14:17.000+08:00,2146,,,0,0,0,gitlab:GithubUser:8923413,choleraehyq,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:624852492,https://github.com/panjf2000/ants/issues/92,,92,å¸Œæœ›èƒ½å¤Ÿæ”¯æŒä¸€ä¸ªå°ç‰¹æ€§,"""1.  PoolWithFuncå¸Œæœ›èƒ½å¤Ÿæ”¯æŒä»»åŠ¡æ± çš„åç§°ï¼›è¿™æ ·ä¸€ä¸ªserverå­˜åœ¨å¤šä¸ªä»»åŠ¡æ± ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜ï¼›\r\n2. PoolWithFuncä¸­çš„Invokeæ–¹æ³•è¿”å›errorï¼Œå¸Œæœ›èƒ½åŒºåˆ†æ˜¯éé˜»å¡é˜Ÿåˆ—ä»»åŠ¡æ± æ»¡çš„error msgï¼Œè¿˜æ˜¯é˜»å¡é˜Ÿåˆ—éƒ½æ»¡çš„error msgé”™è¯¯åŒºåˆ†ï¼Œç›®å‰ç¬¼ç»Ÿåœ°ç§°ä¸ºï¼šErrPoolOverload, è¿™ä¸ªä¸å¤ªæ–¹ä¾¿å®šä½é—®é¢˜ã€‚""",,REQUIREMENT,DONE,,0,2020-05-31T19:29:10.000+08:00,2020-05-26T20:40:35.000+08:00,2020-05-31T19:29:10.000+08:00,7128,,,0,0,0,gitlab:GithubUser:20457624,1046102779,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:624854806,https://github.com/panjf2000/ants/issues/93,,93,ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜,"""æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªserveéƒ¨ç½²åœ¨å¼‚æ„ç¯å¢ƒä¸­ï¼Œå¯èƒ½æˆ‘è®¾ç½®çš„ä»»åŠ¡æ± å¤§å°ï¼Œå°±ä¸å¤ªé€‚ç”¨ï¼Œè¦ä¹ˆèµ„æºæ‰“æ»¡ï¼Œè¦ä¹ˆèµ„æºåˆ©ç”¨ç‡ç›¸å¯¹æ¯”è¾ƒä½ï¼Œèƒ½æ ¹æ®å½“å‰cpuå’Œå†…å­˜ä½¿ç”¨æƒ…å†µè‡ªåŠ¨åŠ¨æ€çš„è°ƒæ•´ä»»åŠ¡æ± å¤§å°ä¸ï¼Ÿ""",,REQUIREMENT,DONE,,0,2020-05-31T19:29:23.000+08:00,2020-05-26T20:44:27.000+08:00,2022-01-14T23:57:03.000+08:00,7124,,,0,0,0,gitlab:GithubUser:20457624,1046102779,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:629156928,https://github.com/panjf2000/ants/issues/95,,95,Ants + fasthttp,"""Hello,\r\n\r\nI am using Ants with fasthttp. Is it possible that this both packages are not compatible? \r\nMy Program fetchs 15000 rows from a MysqlDB and request the HTML code for parse 2 strings out of it. \r\n\r\nMy memory usage is crazy 1,9g with only 434 open socket files = 434 connections (maximum was around 2800):\r\n`15921 jonny     20   0 3093,3m   1,9g   6,9m S   7,3  25,1  11:59.63 goCheckResults`\r\n\r\nroot@jdebian:~$ ls -l /proc/15921/fd | wc -l\r\n`434`\r\n\r\n**in main():**\r\n```go\r\nclient = &fasthttp.Client{\r\n\tReadTimeout:         time.Duration(60) * time.Second,\r\n\tMaxIdleConnDuration: time.Duration(600) * time.Second,\r\n\tDial: func(addr string) (net.Conn, error) {\r\n\t\treturn fasthttp.DialTimeout(addr, time.Duration(60) * time.Second)\r\n\t},\r\n\tTLSConfig: &tls.Config{InsecureSkipVerify: true},\r\n}\r\nvar wg sync.WaitGroup\r\np, _ := ants.NewPoolWithFunc(25, func(i interface{}) {\r\n\tprocessRow(i)\r\n\twg.Done()\r\n})\r\ndefer p.Release()\r\n\r\ni := 0\r\nfor results.Next() {\r\n\tvar current Job\r\n\r\n\terr = results.Scan(&current....)\r\n\r\n\twg.Add(1)\r\n\t_ = p.Invoke(&current)\r\n\ti++\r\n}\r\nwg.Wait()\r\n```\r\n\r\nThe function processRow calls \r\n```go\r\nrow := i.(*Job)\r\n\r\nreq := fasthttp.AcquireRequest()\r\ndefer fasthttp.ReleaseRequest(req)\r\n\r\nreq.SetRequestURI(row.url)\r\nreq.Header.SetMethod(\""GET\"")\r\nreq.Header.Add(\""User-Agent\"", userAgent)\r\n\r\n//println(req.Header.String())\r\n\r\nresp := fasthttp.AcquireResponse()\r\ndefer fasthttp.ReleaseResponse(resp)\r\n\r\n//if err := client.Do(req, resp); err != nil {\r\nif err := client.DoTimeout(req, resp, time.Duration(60) * time.Second); err != nil {\r\n\treturn \""\"", err\r\n}\r\n\r\nbodyBytes := resp.Body()\r\nhtml := string(bodyBytes)\r\n\r\n// parse using regex\r\n// db.Exec (....) <- mysql query to update database\r\n```\r\n\r\nIt is crazy how much memory usage this small program has.""",,,TODO,,0,,2020-06-02T20:18:17.000+08:00,2020-06-06T04:22:07.000+08:00,0,,,0,0,0,gitlab:GithubUser:57217666,T200proX7,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:630445612,https://github.com/panjf2000/ants/issues/96,,96,å¯ä»¥å¯¹æŸä¸ªgroutineè¿›è¡Œæ“ä½œå—ï¼Ÿï¼ˆæ¯”å¦‚æ‰‹åŠ¨ç»ˆæ­¢æŸä¸ªgroutineï¼‰,"""""",,,DONE,,0,2020-06-04T18:59:16.000+08:00,2020-06-04T09:42:38.000+08:00,2020-06-04T21:36:33.000+08:00,556,,,0,0,0,gitlab:GithubUser:59554835,resct,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1142268611,https://github.com/panjf2000/ants/issues/213,,213,goWorkerWithFunc:recycleTime is not thread safe,"""**Describe the bug**\r\ngoWorkerWithFunc:recycleTime is not thread safe, it may purge the non-idle goroutine accidently since purgePeriodically read the wrong recycleTime\r\n\r\n**To Reproduce**\r\nit is hard to reproduce in sample code\r\n""",,BUG,TODO,,0,,2022-02-18T11:18:10.000+08:00,2022-03-08T15:12:22.000+08:00,0,,,0,0,0,gitlab:GithubUser:24819147,arrony135,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:638116396,https://github.com/panjf2000/ants/issues/97,,97,SECURITY ERROR: checksum mismatch,"""**Description**\r\nMismatched checksum\r\n\r\n**To Reproduce**\r\nRun `go get https://github.com/panjf2000/ants`\r\n\r\nOr\r\n1. Import `\""github.com/panjf2000/ants\""`\r\n1. Run `go mod vendor`\r\n\r\n**Expected behavior**\r\nSuccessful installation of ants as a vendor/dependency\r\n\r\n**Error messages/Trace logs**\r\ngo get github.com/panjf2000/ants: github.com/panjf2000/ants@v1.2.0: verifying module: checksum mismatch\r\n        downloaded: h1:Ufw4aDz9RqH1RVblx2W9L9Uv5vSX5apbX5+peR7LQ5k=\r\n        sum.golang.org: h1:pMQ1/XpSgnWx3ro4y1xr/uA3jXUsTuAaU3Dm0JjwggE=\r\n\r\n\r\n**System info (please complete the following information):**\r\n - OS: 4.15.0-23-generic #25-Ubuntu\r\n - Go Version: go1.14 linux/amd64\r\n - ants version: v1.2.0\r\n\r\n**Additional context**\r\nSECURITY ERROR\r\nThis download does NOT match the one reported by the checksum server.\r\nThe bits may have been replaced on the origin server, or an attacker may\r\nhave intercepted the download attempt.\r\n""",,BUG,DONE,,0,2020-06-13T18:01:44.000+08:00,2020-06-13T15:45:49.000+08:00,2020-06-13T18:01:44.000+08:00,135,,,0,0,0,gitlab:GithubUser:7106251,navid-kalaei,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:638596333,https://github.com/panjf2000/ants/issues/98,,98,pool.Tune does not take effect if the pool is preallocated,"""Hello,\r\n\r\nMay I know the reason behind the p.options.PreAlloc check? \r\nhttps://github.com/panjf2000/ants/blob/master/pool.go#L173\r\n`if capacity := p.Cap(); capacity == -1 || size <= 0 || size == capacity || p.options.PreAlloc {\r\n\treturn\r\n}`\r\n\r\nWhy can't we tune the pool if it is preallocated?\r\n\r\nThanks.\r\n""",,,DONE,,0,2020-06-21T17:05:37.000+08:00,2020-06-15T14:58:03.000+08:00,2020-06-21T17:05:37.000+08:00,8767,,,0,0,0,gitlab:GithubUser:6374063,giangvu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:656493889,https://github.com/panjf2000/ants/issues/99,,99,goroutines num ä¸€ç›´ä¸Šæ¶¨,"""æœ¬åœ°å‹æµ‹çš„è¯,å‹æµ‹çš„æ—¶å€™,goroutines ä¼šä¸Šæ¶¨,ä½†æ˜¯å‹æµ‹ç»“æŸå,ä¼šæ¢å¤.\r\n\r\ngo version 1.14.2\r\nä½¿ç”¨çš„ ants ç‰ˆæœ¬æ˜¯ v2.10(æ¢äº†é«˜ç‰ˆæœ¬v2.40 ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜)\r\n\r\nä½¿ç”¨pprof `/debug/pprof/goroutine` å¥½å¤šè¿™æ ·çš„æ–‡æœ¬\r\n```\r\ngoroutine 25824 [chan receive, 21 minutes]:\r\ngithub.com/panjf2000/ants/v2.(*goWorkerWithFunc).run.func1(0xc0011fce70)\r\n\t/www/gopath1.14.2/pkg/mod/github.com/panjf2000/ants/v2@v2.1.0/worker_func.go:65 +0x74\r\ncreated by github.com/panjf2000/ants/v2.(*goWorkerWithFunc).run\r\n\t/www/gopath1.14.2/pkg/mod/github.com/panjf2000/ants/v2@v2.1.0/worker_func.go:49 +0x4c\r\n```\r\næ ¸å¿ƒçš„ä½¿ç”¨ä»£ç ,æ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè°ƒç”¨ DataQuery è¿™ä¸ªå‡½æ•°.\r\n```golang\r\nfunc DataQuery(mobile, id, name string) DataQuerySkeleton {\r\n\tstartTime := 123456789\r\n\tdefer ants.Release()\r\n\tvar wg sync.WaitGroup\r\n\tpUser, _ := ants.NewPoolWithFunc(50, func(para interface{}) {\r\n\t\tfun1(para)\r\n\t\twg.Done()\r\n\t})\r\n\tdefer pUser.Release()\r\n\tqueryInputValue := map[string]string{\r\n\t\tTypeMobile: mobile,\r\n\t\tTypeId:    id,\r\n\t\tTypeName: name,\r\n\t}\r\n\tvar inputUser = make(chan *GoroutineUserInputParaType, 3)\r\n\r\n\tfor k, v := range queryInputValue {\r\n\t\twg.Add(1)\r\n\t\tinPara := &GoroutineUserInputParaType{\r\n\t\t\tUinfoType: k,\r\n\t\t\tUinfoPara: v,\r\n\t\t\tStartTime: 123456789,\r\n\t\t}\r\n\t\tinputUser <- inPara\r\n\t\tpUser.Invoke(inputUser)\r\n\t}\r\n\twg.Wait()\r\n\tclose(inputUser)\r\n\r\n\tfindInfo, minRegisterTime := func3(inputUser)\r\n\ttotalUserNum := len(findInfo)\r\n\tqueryInfo := DataQuerySkeleton{}\r\n\r\n\tif totalUserNum == 0 {\r\n\t\treturn queryInfo\r\n\t}\r\n\tfindOrdersStartTime := 423456789\r\n\tfindUserUsedTime := findOrdersStartTime - startTime\r\n\r\n\tvar inputOrder = make(chan *GoroutineOrderInputParaType, totalUserNum)\r\n\r\n\tpOrder, _ := ants.NewPoolWithFunc(50, func(para interface{}) {\r\n\t\tfun2(para)\r\n\t\twg.Done()\r\n\t})\r\n\tdefer pOrder.Release()\r\n\tfor _, oneUser := range findInfo {\r\n\t\twg.Add(1)\r\n\t\tinPara := &GoroutineOrderInputParaType{\r\n\t\t\tUinfoType: oneUser.Type,\r\n\t\t\tUinfoId:   oneUser.Uinfo.Id,\r\n\t\t\tStartTime: tools.GetUnixMillis(),\r\n\t\t}\r\n\t\tinputOrder <- inPara\r\n\t\tpOrder.Invoke(inputOrder)\r\n\t}\r\n\twg.Wait()\r\n\tclose(inputOrder)\r\n\r\n    ......\r\n\treturn queryInfo\r\n}\r\n```\r\n""",,,DONE,,0,2020-07-14T18:50:32.000+08:00,2020-07-14T18:08:22.000+08:00,2020-07-14T18:50:32.000+08:00,42,,,0,0,0,gitlab:GithubUser:2841874,weichangdong,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:662892614,https://github.com/panjf2000/ants/issues/101,,101,å‚æ•°åŠ¨æ€åŒ–,"""æ‰§è¡Œçš„funcæ˜¯å¦å¯ä»¥æ·»åŠ å‚æ•°åŠ¨æ€  ä¾‹å¦‚  ...interface{}""",,REQUIREMENT,DONE,,0,2020-07-24T19:42:48.000+08:00,2020-07-21T19:11:31.000+08:00,2020-07-24T19:42:56.000+08:00,4351,,,0,0,0,gitlab:GithubUser:20257788,tsxylhs,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1101114607,https://github.com/panjf2000/ants/issues/207,,207,"æƒ³é—®ä¸€ä¸‹, æœ‰æ²¡æœ‰åŠæ³•å›ºå®špoolä¸­åç¨‹çš„æ•°é‡","""**æ˜¯å¦æ”¯æŒå›ºå®šåç¨‹æ± çš„å®¹é‡**\r\nPlease describe your question meticulously.\r\n\r\næœ‰çš„æ—¶å€™ä¸æƒ³è¦ç»™å¯¹æ–¹å¢åŠ å¤ªå¤šçš„å¹¶å‘, æ¯”å¦‚æˆ‘æœ‰1000ä¸ªå·¥ä½œéœ€è¦é€šè¿‡ 5ä¸ªåç¨‹æ¥è·‘.... åˆšåˆšç”¨æ–‡æ¡£ä¸­çš„ä¾‹å­, ç›´æ¥1000ä¸ªåç¨‹å°±æ€¼å®Œäº†, æ‹…å¿ƒæŠŠserveré‚£è¾¹æ€¼çˆ†äº†""",,,DONE,,0,2022-01-13T11:07:59.000+08:00,2022-01-13T11:06:39.000+08:00,2022-01-13T11:07:59.000+08:00,1,,,0,0,0,gitlab:GithubUser:2660914,shoaly,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1103820475,https://github.com/panjf2000/ants/issues/208,,208,è¯·é—®å½“antsåœ¨æ‰§è¡ŒCPUå¯†é›†å‹ä»»åŠ¡æ—¶ï¼Œè°ƒåº¦æ—¶èƒ½å¦ä¸æ‰“æ–­ä»»åŠ¡ï¼Ÿ,"""å¦‚æœéƒ½æ˜¯`CPUå¯†é›†å‹ä»»åŠ¡`ï¼Œè®©ä»»åŠ¡`æ— ä¸­æ–­`åœ°ä¸€ç›´è¿è¡Œæ˜¯æœ€å¥½çš„ï¼Œè€ŒGoåœ¨1.14å¼•å…¥äº†`ä¿¡å·æŠ¢å æœºåˆ¶`ï¼Œæ¯è°ƒç”¨10mså°±ä¼šæ‰“æ–­ä¸€æ¬¡è®¡ç®—ï¼Œç„¶åè¿›è¡Œä¸Šä¸‹æ–‡é‡åŠ è½½ï¼Œå†ç»§ç»­æ‰§è¡Œã€‚åœ¨`ants`ä¸­ï¼Œè°ƒåº¦`CPUå¯†é›†å‹`ä»»åŠ¡æ—¶ï¼Œèƒ½å¦å®Œå…¨ä¸æ‰“æ–­ä»»åŠ¡ï¼Ÿ""",,,DONE,,0,2022-01-22T12:58:36.000+08:00,2022-01-14T23:50:07.000+08:00,2022-01-22T22:39:51.000+08:00,10868,,,0,0,0,gitlab:GithubUser:38336731,dragon-zhang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1108986026,https://github.com/panjf2000/ants/issues/209,,209,è¯·é—®èƒ½å¦è·å–æ¯ä¸ªgoroutinesçš„è¿”å›å€¼,"""è¯·é—®èƒ½å¦è·å–æ¯ä¸ªgoroutinesçš„è¿”å›å€¼ï¼Œæˆ‘æƒ³æ¯æ¬¡å¹¶å‘ä½¿ç”¨100ä¸ªç«¯å£ï¼Œå“ªä¸ªç«¯å£ç©ºé—²äº†å°±ä½¿ç”¨å“ªä¸ªç«¯å£ï¼Œå¦‚ä½•æ‰èƒ½ä¿è¯ä¸åŒæ—¶ä½¿ç”¨åˆ°ç›¸åŒçš„ç«¯å£\r\n""",,,DONE,,0,2022-03-09T15:11:22.000+08:00,2022-01-20T16:08:49.000+08:00,2022-03-09T15:11:22.000+08:00,69062,,,0,0,0,gitlab:GithubUser:31299839,dream0407,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1127816236,https://github.com/panjf2000/ants/issues/212,,212,`purgePeriodically` function is left running for a while after `pool.Release` is called,"""**Describe the bug**\r\nWhen the `Pool.Release()` function is called, it can leave the `purgePeriodically` function running until its heartbeat `time.Ticker` triggers, at which point the condition on whether the pool is closed is checked by the `purgePeriodically` for loop. \r\n\r\nThe issue is that one cannot assume the goroutines associated with an ant pool are completely cleaned up until the `purgePeriodically` function is completed - and as such, tools like goleak (https://github.com/uber-go/goleak) will report a leaked goroutine in tests. \r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. Clone https://github.com/loopholelabs/frisbee\r\n2. Check out the `rpc-async` branch\r\n3. Run `go test ./...`\r\n4. See error\r\n\r\n**Expected behavior**\r\nThe `purgePeriodically` goroutine is closed when the `Release` function returns.\r\n\r\n**Error messages/Trace logs**\r\n```bash\r\ngoleak: Errors on successful test run: found unexpected goroutines:\r\n[Goroutine 4 in state chan receive, with github.com/panjf2000/ants/v2.(*Pool).purgePeriodically on top of the stack:\r\ngoroutine 4 [chan receive]:\r\ngithub.com/panjf2000/ants/v2.(*Pool).purgePeriodically(0x14000140000)\r\n        /Users/shivanshvij/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.7/pool.go:69 +0x80\r\ncreated by github.com/panjf2000/ants/v2.NewPool\r\n        /Users/shivanshvij/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.7/pool.go:137 +0x380\r\n]\r\nFAIL    github.com/loopholelabs/frisbee 10.624s\r\n```\r\n\r\n**System info (please complete the following information):**\r\n - OS: macOS\r\n - Go Version: 1.17.6\r\n - ants version: 2.4.7\r\n\r\n**Additional context**\r\nAdd any other context about the problem here.\r\n""",,BUG,DONE,,0,2022-03-08T16:30:19.000+08:00,2022-02-09T06:16:27.000+08:00,2022-03-08T16:30:19.000+08:00,39493,,,0,0,0,gitlab:GithubUser:27162109,ShivanshVij,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1174810786,https://github.com/panjf2000/ants/issues/214,,214,any difference between this and https://github.com/bytedance/gopkg/tree/develop/util/gopool,"""any difference between this and https://github.com/bytedance/gopkg/tree/develop/util/gopool?""",,,TODO,,0,,2022-03-21T10:35:20.000+08:00,2022-03-21T10:35:21.000+08:00,0,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1174907155,https://github.com/panjf2000/ants/issues/215,,215,is the latest 1.18 go routine faster than this?,"""is the latest 1.18 go routine faster than this?\r\n\r\njust curious coz it seems faster etc now""",,,TODO,,0,,2022-03-21T13:25:35.000+08:00,2022-03-23T06:39:56.000+08:00,0,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1196996550,https://github.com/panjf2000/ants/issues/217,,217,ants å’Œ waitgroupä¸€èµ·ä½¿ç”¨æ—¶å‡ºç° negative waitGroup counteré—®é¢˜,"""**å¤§è‡´çš„é—®é¢˜**\r\nants åŒ…å’Œwaitgroupä¸€èµ·ä½¿ç”¨æ—¶,å‡ºç°negative waitGroupå¯¼è‡´panicï¼Œæ˜¯ä¸ªå¶å…ˆçš„é—®é¢˜ï¼Œç›®å‰å°è¯•ä¸­æ²¡æœ‰å¤ç°é—®é¢˜\r\n\r\n**è°ƒç”¨æ ˆä¿¡æ¯**\r\n```\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1()\r\n        /opt/tiger/compile_path/pkg/mod/github.com/panjf2000/ants/v2@v2.4.8/worker.go:58 +0x10c\r\npanic({0xfcd760, 0x12e6080})\r\n        /usr/local/go/src/runtime/panic.go:1038 +0x215\r\nsync.(*WaitGroup).Add(0x1, 0xc0047b52b8)\r\n        /usr/local/go/src/sync/waitgroup.go:74 +0x105\r\nsync.(*WaitGroup).Done(0xc04451f700)\r\n        /usr/local/go/src/sync/waitgroup.go:99 +0x25\r\nmain.F.func1()\r\n        /opt/tiger/compile_path/src/A/p.go:85 +0x278\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1()\r\n        /opt/tiger/compile_path/pkg/mod/github.com/panjf2000/ants/v2@v2.4.8/worker.go:70 +0x97\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /opt/tiger/compile_path/pkg/mod/github.com/panjf2000/ants/v2@v2.4.8/worker.go:48 +0x68\r\n```\r\n\r\n**é—®é¢˜ä»£ç **\r\n\r\n```Go\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""github.com/panjf2000/ants/v2\""\r\n\t\""sync\""\r\n)\r\n\r\nfunc main() {\r\n\tres := make([]string, 20)\r\n\tfor i := 0; i < 20; i++ {\r\n\t\tres[i] = \""a\""\r\n\t}\r\n\tids := make([]string, 0)\r\n\ttmp := make([]string, 0)\r\n\tvar w sync.WaitGroup\r\n\tvar mu sync.Mutex\r\n\tfor i, r := range res {\r\n\t\tids = append(ids, r)\r\n\t\tif len(ids) == 2 || i == len(res)-1 {\r\n\t\t\ttt := ids\r\n\t\t\tif err := ants.Submit(func() {\r\n\t\t\t\tdefer w.Done()\r\n\r\n\t\t\t\tmu.Lock()\r\n\t\t\t\tdefer mu.Unlock()\r\n\t\t\t\ttmp = append(tmp, tt...)\r\n\t\t\t});err != nil {\r\n\t\t\t\tfmt.Printf(\""err occur %v\\n\"", err.Error())\r\n\t\t\t} else {\r\n\t\t\t\tw.Add(1)\r\n\t\t\t\tfmt.Printf(\""add 1\\n\"")\r\n\t\t\t}\r\n\t\t\tids = make([]string, 0)\r\n\t\t}\r\n\t}\r\n\tw.Wait()\r\n\tfmt.Println(\""finish\"")\r\n}\r\n\r\n```\r\n\r\n**é¢„æœŸè¡¨ç°**\r\né¢„æœŸæ˜¯ä»»åŠ¡æäº¤æˆåŠŸåï¼Œå°±é€šè¿‡waitGroupçš„addåŠ ä¸€,å¦åˆ™ä¸æ‰§è¡Œï¼Œä½†ä»»åŠ¡å‡ºç°å¤šæ¬¡doneçš„æƒ…å†µï¼Œä¸æ¸…æ¥šåŸå› \r\n""",,BUG,DONE,,0,2022-05-07T22:45:35.000+08:00,2022-04-08T16:17:13.000+08:00,2022-05-07T22:45:35.000+08:00,42148,,,0,0,0,gitlab:GithubUser:38785315,huangketsudou,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1201065478,https://github.com/panjf2000/ants/issues/218,,218,What happens to Routine when it has finished? ,"""Just wondering what happens to a routine that is invoked within an ants pool after it finishes ? \r\n\r\nLet say i set up an ants pool of size 10, and I've invoked 10 routines, so there should be 10 routines running within the pool.\r\nIf 1 routine has finished, is it now 9 routines running? Or are we still left with 10 routine but with 1 inactive ? \r\n\r\nI've setup my application to handle PubSub messages concurrently with each message handled by a function invoked in a worker pool (so 10 messages = 10 Message handler in ants pool). However I want to make sure that the ant pool frees up resources when 1 of the handler finishes. """,,,DONE,,0,2022-04-12T13:50:28.000+08:00,2022-04-12T13:03:29.000+08:00,2022-04-12T13:50:29.000+08:00,46,,,0,0,0,gitlab:GithubUser:77963837,FeurJak,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1206125988,https://github.com/panjf2000/ants/issues/219,,219,å…¬å¼€å‹æµ‹ä»£ç ,"""å¯ä»¥å…¬å¼€å‹æµ‹çš„ä»£ç ï¼Ÿ\r\n""",,REQUIREMENT,DONE,,0,2022-05-05T11:25:43.000+08:00,2022-04-16T22:33:56.000+08:00,2022-05-05T11:25:43.000+08:00,26691,,,0,0,0,gitlab:GithubUser:21958683,lockeliu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1210377843,https://github.com/panjf2000/ants/issues/220,,220,Handling a worker / task that has failed,"""Is there an option to re-invoke worker if it has failed / crashed? Not too sure what WithPanicHandler() does. """,,,DONE,,0,2022-05-07T19:29:32.000+08:00,2022-04-21T09:11:58.000+08:00,2022-05-07T19:29:32.000+08:00,23657,,,0,0,0,gitlab:GithubUser:77963837,FeurJak,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1215362122,https://github.com/panjf2000/ants/issues/222,,222,æƒ³çŸ¥é“æ˜¯ä½ ä»¬æ˜¯æ€ä¹ˆåšå‹æµ‹çš„ï¼Œå…‰çœ‹é€Ÿåº¦çš„è¯ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹ï¼Œè¿˜ä¸å¦‚åŸç”Ÿçš„,"""```\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""github.com/panjf2000/ants/v2\""\r\n\t\""sync\""\r\n\t\""time\""\r\n)\r\n\r\nvar wg sync.WaitGroup\r\n\r\nfunc main() {\r\n\tf := func() {\r\n\t\twg.Done()\r\n\t}\r\n\trunTimes := 10000000\r\n\tdefer ants.Release()\r\n\tstart := time.Now()\r\n\tfmt.Println(start.Format(\""2006-01-02 15:04:05\""))\r\n\twg.Add(runTimes)\r\n\tfor i := 0; i < runTimes; i++ {\r\n\t\t//ants.Submit(f) // 4.5ç§’å·¦å³\r\n\t\tgo f() //1.6ç§’å·¦å³\r\n\t}\r\n\twg.Wait()\r\n\tfmt.Println(time.Now().Format(\""2006-01-02 15:04:05\""))\r\n\te := time.Since(start)\r\n\tfmt.Println(e.String())\r\n}\r\n```""",,,DONE,,0,2022-05-05T11:25:13.000+08:00,2022-04-26T12:10:53.000+08:00,2022-05-05T11:25:13.000+08:00,12914,,,0,0,0,gitlab:GithubUser:30883503,yxiupei,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1239397157,https://github.com/panjf2000/ants/issues/223,,223,goroutine pool å¯¹æ€§èƒ½çš„å½±å“çš„ç–‘é—®,"""åœ¨go GMPæ¨¡å‹ä¸­ï¼Œæ•°æ®ç»“æ„Gæœ¬èº«ä¼šè¢«go schedulerå¤ç”¨ï¼Œä»å†…å­˜å’Œæ€§èƒ½æ–¹é¢è€ƒè™‘ï¼Œæ˜¯ä¸æ˜¯å’Œgoroutine poolä¸­å¯¹goroutineçš„å¤ç”¨æ•ˆæœæ˜¯ä¸€æ ·çš„å‘¢""",,,DONE,,0,2022-05-18T12:00:54.000+08:00,2022-05-18T12:00:11.000+08:00,2022-05-18T12:00:54.000+08:00,0,,,0,0,0,gitlab:GithubUser:39076288,hugh-404,gitlab:GithubUser:0,,,
gitlab:GithubIssue:1243368453,https://github.com/panjf2000/ants/issues/225,,225,purgePeriodically å¯¼è‡´é˜»å¡,"""æœ€æ–°ç‰ˆçš„ v2.5.0 releaseå ä»ç„¶ purgePeriodically å¾ªç¯ å¯¼è‡´ç¨‹åºé˜»å¡ ï¼Œæ˜¯æˆ‘ç”¨çš„ä¸å¯¹å—\r\nType: delay\r\nTime: May 21, 2022 at 12:01am (CST)\r\nDuration: 20.02s, Total samples = 40s (199.80%)\r\nEntering interactive mode (type \""help\"" for commands, \""o\"" for options)\r\n(pprof) traces\r\nType: delay\r\nTime: May 21, 2022 at 12:01am (CST)\r\nDuration: 20.02s, Total samples = 40s (199.80%)\r\n-----------+-------------------------------------------------------\r\n       20s   runtime.selectgo\r\n             github.com/panjf2000/ants/v2.(*Pool).purgePeriodically\r\n""",,,TODO,,0,,2022-05-21T00:14:22.000+08:00,2022-05-27T19:11:23.000+08:00,0,,,0,0,0,gitlab:GithubUser:43371021,zqlpaopao,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:675830456,https://github.com/panjf2000/ants/issues/104,,104,"æˆ‘æœ‰ä¸ªç–‘é—®,httpæœ¬èº«å°±æ˜¯åŸºäºgoroutineå®ç°å—ï¼Ÿ é›†æˆhttp server æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå¤§ç¥ä»¬å›ç­”ä¸‹å‘—","""æˆ‘æœ‰ä¸ªç–‘é—®,httpæœ¬èº«å°±æ˜¯åŸºäºgoroutineå®ç°å—ï¼Ÿ é›†æˆhttp server æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå¤§ç¥ä»¬å›ç­”ä¸‹å‘—""",,,DONE,,0,2020-08-10T16:37:13.000+08:00,2020-08-10T10:46:29.000+08:00,2020-08-10T16:37:13.000+08:00,350,,,0,0,0,gitlab:GithubUser:24741439,Xuzan9396,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1244030382,https://github.com/panjf2000/ants/issues/226,,226,æœŸæœ›èƒ½æœ‰ TuneMaxBlockingTasks(size int) åŠ¨æ€è°ƒæ•´åŠŸèƒ½,"""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\nvar (\r\n\t// æ¨¡æ‹Ÿé…ç½®æ–‡ä»¶\r\n\t// å…è®¸åŒæ—¶å¤„ç† 10 ä¸ªä»»åŠ¡, æœ€å¤§å†æœ‰ 80 ä¸ªä»»åŠ¡æ’é˜Ÿ, è‹¥é˜Ÿæ»¡å°± ErrPoolOverload\r\n\tcapSize  = 10\r\n\tmaxTasks = 80\r\n)\r\n\r\nfunc main() {\r\n\tp, _ := ants.NewPool(capSize, ants.WithMaxBlockingTasks(maxTasks))\r\n\tdefer p.Release()\r\n\t// ...\r\n\r\n\t// ç°åœ¨é…ç½®å˜åŒ–, æœŸæœ›åŠ¨æ€å˜æ›´\r\n\tcapSize = 20\r\n\tmaxTasks = 150\r\n\r\n\tp.Tune(capSize)\r\n\t// TODO\r\n\tp.TuneMaxBlockingTasks(maxTasks)\r\n}\r\n```\r\n\r\n**Describe the solution you'd like**\r\nA clear and concise description of what you want to happen.\r\n\r\n```go\r\np.TuneMaxBlockingTasks(maxTasks)\r\n```\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\nç›®å‰ä¼¼ä¹åªèƒ½ä»¥æ–°çš„ maxTasks å‚æ•°æ–°å»º pool æ¥æ›¿æ¢. ä½†è¦æ–™ç†æ—§ pool æœªå®Œæˆçš„ä»»åŠ¡.\r\nè‹¥æœ‰ç°æˆæ–¹æ¡ˆè¯·æŒ‡ç‚¹ä¸€ä¸‹. è°¢è°¢.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n""",,REQUIREMENT,DONE,,0,2022-05-22T18:46:11.000+08:00,2022-05-22T00:39:29.000+08:00,2022-05-22T18:46:11.000+08:00,1086,,,0,0,0,gitlab:GithubUser:4979407,fufuok,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1253913230,https://github.com/panjf2000/ants/issues/227,,227,Performance differences between go1.13 and 1.14 and later versions,"""In the same hardware environment, I found similar results to the author's conclusion for go1.13 in my tests, but for 1.14 onwards, ants no longer has a time consumption advantage, only a memory usage advantage. Is it because version 1.14 implements signal-based scheduling?\r\nAttached are the test results, 3 million times, default pool size\r\n\r\n1.13\r\ngo test -run=\""TestNoPool\"" -v\r\n=== RUN   TestNoPool\r\n--- PASS: TestNoPool (2.64s)\r\n    ants_test.go:47: memory usage:1530 MB\r\nPASS\r\nok      testGo/ant      2.759s\r\n\r\ngo test -run=\""TestAntsPool\"" -v\r\n=== RUN   TestAntsPool\r\n--- PASS: TestAntsPool (1.55s)\r\n    ants_test.go:71: pool, capacity:2147483647\r\n    ants_test.go:72: pool, running workers number:29722\r\n    ants_test.go:73: pool, free workers number:2147453925\r\n    ants_test.go:78: memory usage:73 MB\r\nPASS\r\nok      testGo/ant      1.549s\r\n\r\n\r\n1.14\r\ngo test -run=\""TestNoPool\"" -v\r\n=== RUN   TestNoPool\r\n    TestNoPool: ants_test.go:47: memory usage:289 MB\r\n--- PASS: TestNoPool (0.78s)\r\nPASS\r\nok      testGo/ant      0.783s\r\n\r\ngo test -run=\""TestAntsPool\"" -v\r\n=== RUN   TestAntsPool\r\n    TestAntsPool: ants_test.go:71: pool, capacity:2147483647\r\n    TestAntsPool: ants_test.go:72: pool, running workers number:27475\r\n    TestAntsPool: ants_test.go:73: pool, free workers number:2147456172\r\n    TestAntsPool: ants_test.go:78: memory usage:71 MB\r\n--- PASS: TestAntsPool (1.38s)\r\nPASS\r\nok      testGo/ant      1.385s\r\n\r\n""",,,TODO,,0,,2022-05-31T21:58:47.000+08:00,2022-05-31T21:58:48.000+08:00,0,,,0,0,0,gitlab:GithubUser:29474400,LiaoPuJian,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1257847610,https://github.com/panjf2000/ants/issues/228,,228,golang 1.17.x ç‰ˆæœ¬æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿ,"""golang 1.17.x ç‰ˆæœ¬èƒ½æ­£å¸¸ä½¿ç”¨ ants å—ï¼Ÿæ˜¯å¦å·²ç»ç»è¿‡æµ‹è¯•äº†ã€‚""",,,DONE,,0,2022-06-09T09:42:11.000+08:00,2022-06-02T16:13:04.000+08:00,2022-06-09T09:42:11.000+08:00,9689,,,0,0,0,gitlab:GithubUser:47515663,ZhMaio,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1262980710,https://github.com/panjf2000/ants/issues/229,,229,æ±‚é—®poolä¸­running()æ–¹æ³•è¿”å›çš„æ•°å­—çš„å«ä¹‰,"""æˆ‘çš„ä»£ç ä¸­æœ‰ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸¤ä¸ªæ¶ˆè´¹è€…ã€‚ä»–ä»¬åˆ†å±ä¸‰ä¸ªæ± å­ã€‚\r\nç”Ÿäº§è€…ã€‚è¯»æ–‡ä»¶ï¼Œè§£æå¯¹è±¡ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ†åˆ«æäº¤ç»™æ¶ˆè´¹è€…1å’Œæ¶ˆè´¹è€…2ã€‚åç¨‹æ± å¤§å°=16.\r\næ¶ˆè´¹è€…1ã€‚cpuè®¡ç®—ã€‚åç¨‹æ± å¤§å°=64\r\næ¶ˆè´¹è€…2ã€‚GPUè®¡ç®—ã€‚åç¨‹æ± å¤§å°=64\r\n\r\nä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ç›‘å¬åç¨‹æ± æ­£åœ¨è¿è¡Œæ•°é‡:\r\n`\r\ngo func() {\r\n\t\tfor {\r\n\t\t\ttime.Sleep(time.Duration(1000) * time.Millisecond)\r\n\t\t\tfmt.Println(\r\n\t\t\t\t\""RealCallPool:\"" + strconv.Itoa(RealCallPool.Running()) + \""-\"" + strconv.Itoa(RealCallPool.Waiting()) +\r\n\t\t\t\t\t\""\\tRd2PileupOnGpuPool:\"" + strconv.Itoa(Rd2PileupOnGpuPool.Running()) + \""-\"" + strconv.Itoa(Rd2PileupOnGpuPool.Waiting()) +\r\n\t\t\t\t\t\""\\tRd2pileupOnGoPool:\"" + strconv.Itoa(Rd2pileupOnGoPool.Running()) + \""-\"" + strconv.Itoa(Rd2PileupOnGpuPool.Waiting()))\r\n\t\t}\r\n\t}()\r\n`\r\n\r\nè¾“å‡ºçš„å†…å®¹:\r\nç”Ÿäº§è€…åç¨‹æ±  ï¼šrunning=16ï¼Œwaiting=1ï¼›ç¨³å®šä¸å˜\r\næ¶ˆè´¹è€…1/2ï¼Œrunning = 30-64 åŠ¨æ€ç¨³å®šï¼Œwaiting=0\r\n\r\næˆ‘çš„ç–‘é—®ï¼š\r\nåœ¨ä¸Šè¿°è¿è¡ŒçŠ¶æ€ä¸­ï¼Œcpuåˆ©ç”¨ç‡åªæœ‰30-40æ ¸ã€‚è¯·é—®running()å’Œwaiting()æ–¹æ³•è¿”å›çš„æ•°å­—çš„å«ä¹‰ã€‚""",,,TODO,,0,,2022-06-07T17:11:46.000+08:00,2022-06-08T19:46:06.000+08:00,0,,,0,0,0,gitlab:GithubUser:48267340,imDpeng,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1264107782,https://github.com/panjf2000/ants/issues/230,,230,How do I get the results of my tasks,"""Hello:)\r\nwhen i use â€œ_ = p.Invoke(task)â€ , I want to do something while the task is being completed, how do it?\r\n\r\n""",,,TODO,,0,,2022-06-08T10:35:14.000+08:00,2022-06-08T19:43:42.000+08:00,0,,,0,0,0,gitlab:GithubUser:14806824,iGen1us,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:671575307,https://github.com/panjf2000/ants/issues/102,,102,æ±‚è§£ï¼šç©ºé—²workerå›æ”¶åï¼Œä¸ºä»€ä¹ˆä¼šé‡æ–°æ”¾å›sync.Poolä¸­å‘¢,"""ä½œè€…ä½ å¥½ï¼Œåœ¨é˜…è¯»æºç çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š\r\nä¸€ä¸ªgoWorkeråœ¨å¤„ç†å®Œchanä¸­çš„taskåï¼Œä¼šæŠŠè‡ªèº«é‡æ–°æ”¾å›ç©ºé—²çš„workArrayä¸­ï¼Œä½†åŒæ—¶ä¹Ÿæ”¾åˆ°äº†workerCacheï¼ˆsync.Poolï¼‰ä¸­ï¼Œçœ‹äº†ä¸‹fasthttpçš„å®ç°ï¼Œä¹Ÿåšäº†åŒæ ·çš„å¤„ç†ã€‚åœ¨ä»£ç ä¸­æˆ‘æ ‡å‡ºäº†è¿™ä¸¤å¤„çš„ä½ç½®ã€‚\r\n\r\n```go\r\nfunc (w *goWorker) run() {\r\n\tw.pool.incRunning()\r\n\tgo func() {\r\n\t\tdefer func() {\r\n\t\t\tw.pool.decRunning()\r\n\t\t\tw.pool.workerCache.Put(w) // è¿™é‡Œæ”¾åˆ°äº†cacheä¸­\r\n\t\t\tif p := recover(); p != nil {\r\n\t\t\t\tif ph := w.pool.options.PanicHandler; ph != nil {\r\n\t\t\t\t\tph(p)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tw.pool.options.Logger.Printf(\""worker exits from a panic: %v\\n\"", p)\r\n\t\t\t\t\tvar buf [4096]byte\r\n\t\t\t\t\tn := runtime.Stack(buf[:], false)\r\n\t\t\t\t\tw.pool.options.Logger.Printf(\""worker exits from panic: %s\\n\"", string(buf[:n]))\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}()\r\n\r\n\t\tfor f := range w.task {\r\n\t\t\tif f == nil {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tf()\r\n\t\t\tif ok := w.pool.revertWorker(w); !ok {  // è¿™é‡ŒæŠŠç©ºé—²workeræ”¾å›äº†workArrayä¸­\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}()\r\n}\r\n```\r\n\r\nç”±äºgoWorkeræ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥åŒä¸€ä¸ªgoWorkerä¼šåŒæ—¶å­˜åœ¨äºworkerArrayå’Œsync.Poolä¸­ï¼Œä¼šä¸ä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼Œä»sync.Poolä¸­Getçš„workerå…¶å®åœ¨è¿˜åœ¨æœ‰æ•ˆæœŸä¸­ï¼Œæœ€ç»ˆå¯¼è‡´goroutine poolä¸­è¿è¡Œçš„workeræ•°é‡æ˜¯â€å‡â€œçš„ï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªworkeræ˜¯åŒä¸€ä¸ª\r\n\r\nè¿™ç§æƒ…å†µå¯èƒ½éœ€è¦æµ‹è¯•ï¼Œå¹¶è¡Œæµ‹è¯•è¾ƒéš¾å¤ç°æˆ‘è¯´çš„åœºæ™¯ï¼Œå¦‚æœæ‚¨å¯¹äºè¿™å—æœ‰æ¯”è¾ƒå¥½çš„è§£ç­”ï¼Œæ„Ÿè°¢~\r\n\r\n""",,,DONE,,0,2020-08-03T15:22:04.000+08:00,2020-08-02T16:21:16.000+08:00,2020-08-03T15:22:04.000+08:00,1380,,,0,0,0,gitlab:GithubUser:10286120,xieao,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:675845276,https://github.com/panjf2000/ants/issues/105,,105,"ç–‘é—®ï¼Ÿæˆ‘ç”¨NewPoolWithFunc åˆ›å»ºäº†10ä¸ªåç¨‹å»å¤„ç†ï¼Œæ¯ä¸ªgoroutineè€—æ—¶éœ€è¦1åˆ†é’Ÿå·¦å³,çœ‹ä¸‹æˆ‘çš„ä»£ç æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆå¤„ç†","""#### ç–‘é—®ï¼Ÿæˆ‘ç”¨NewPoolWithFunc åˆ›å»ºäº†10ä¸ªåç¨‹å»å¤„ç†ï¼Œæ¯ä¸ªgoroutineè€—æ—¶éœ€è¦1åˆ†é’Ÿå·¦å³ï¼Œæœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯æˆ‘çš„goroutine é‡Œé¢å¯èƒ½æœ‰è¶…æ—¶ä»»åŠ¡ï¼Œä¸é‡Šæ”¾ï¼Œæˆ‘è¿™è¾¹æƒ³å¤„ç†2åˆ†é’Ÿè¿˜æ²¡ç»“æŸï¼Œå°±ç»“æŸæ‰è¿™ä¸ªgotoutineï¼Œ æˆ‘è¿™è¾¹ä»£ç æ˜¯ä¸æ˜¯å¯ä»¥è¿™ä¹ˆä¼˜åŒ–\r\n```\r\n\toptions := ants.Options{}\r\n\toptions.ExpiryDuration = 2 * time.Minute  // ä¸¤åˆ†é’Ÿæ²¡å¤„ç†å®Œç»“æŸï¼Œé‡Šæ”¾\r\n\tp, _ := ants.NewPoolWithFunc(10, func(i interface{}) {\r\n\t\t// ä¸€åˆ†é’Ÿä»»åŠ¡\r\n\t\treturn \r\n\t},ants.WithOptions(options))\r\n\tp.Release()\r\n```""",,,DONE,,0,2020-08-10T16:33:18.000+08:00,2020-08-10T11:47:40.000+08:00,2020-08-11T09:19:29.000+08:00,285,,,0,0,0,gitlab:GithubUser:24741439,Xuzan9396,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:683789291,https://github.com/panjf2000/ants/issues/106,,106,æ€ä¹ˆæ ·å®ç°å…ˆæŠŠä»»åŠ¡æäº¤å†é™åˆ¶æ± çš„å¹¶å‘,"""""",,,DONE,,0,2020-08-24T19:15:41.000+08:00,2020-08-22T03:40:47.000+08:00,2020-08-24T19:15:41.000+08:00,3814,,,0,0,0,gitlab:GithubUser:61406754,dukv2001,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:692140116,https://github.com/panjf2000/ants/issues/109,,109,è¾ƒæ–°ç‰ˆæœ¬golangæ˜¯å¦è¿˜éœ€è¦antsä»¥åŠç±»ä¼¼çš„poolå®ç°æ¥æ›¿ä»£goï¼Ÿ,"""```sh\r\n# go version go1.13.1\r\n\r\nBenchmarkGoroutines-8  3   352026800 ns/op\t   14885 B/op\t      39 allocs/op\r\nBenchmarkAntsPool-8    2   581543800 ns/op\t16137376 B/op\t 1001286 allocs/op\r\n```\r\n\r\n1. å¦‚æœä¸Šæ¸¸ä¸šåŠ¡æœ¬èº«å¹¶å‘åº¦è¾ƒé«˜ï¼Œç›´æ¥åŒæ­¥æ‰§è¡Œtaskå°±å¯ä»¥ï¼Œä¸éœ€è¦åç¨‹pool\r\n2. ä¸ç®¡ä¸Šæ¸¸ä¸šåŠ¡æœ¬èº«å¹¶å‘åº¦æ˜¯é«˜è¿˜æ˜¯ä½ï¼Œå¦‚æœæƒ³è¦å¼‚æ­¥taskï¼Œç”±äºè¾ƒæ–°ç‰ˆæœ¬çš„goæ€§èƒ½å’Œgcéƒ½è¡¨ç°çš„å¾ˆä¸é”™ã€æ¯”poolå„æ–¹é¢è¿˜ç®—å¥½äº›ï¼Œpoolä¸goçš„ä¸»è¦åŒºåˆ«å°±æ˜¯åç¨‹æ•°é‡æ§åˆ¶ï¼Œgo+rate limitå³å¯ï¼Œä¸å¤ªéœ€è¦pool\r\n""",,,DONE,,0,2020-09-08T14:26:02.000+08:00,2020-09-04T01:12:14.000+08:00,2020-09-08T14:26:02.000+08:00,6553,,,0,0,0,gitlab:GithubUser:3296206,cokeboL,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:700343813,https://github.com/panjf2000/ants/issues/110,,110,WithMaxBlockingTasks doesn't seem to work as the docs indicate,"""**Describe the bug**\r\n`WithMaxBlockingTasks` doesn't seem to do what I think it should be doing based on the docs.\r\n\r\n**To Reproduce**\r\n\r\nI expect this to actually error:\r\n```\r\np, _ := ants.NewPool(1, ants.WithMaxBlockingTasks(1))\r\nvar wg sync.WaitGroup\r\nfor i := 0; i < 5; i++ {\r\n  err := p.Submit(func() {\r\n   wg.Add(1)\r\n   time.Sleep(time.Second)\r\n   wg.Done()\r\n  })\r\n  if err != nil {\r\n     // I expect this to have an error if i >= 2\r\n  }\r\n}\r\nwg.Wait()\r\np.Release()\r\n```\r\n\r\n**Expected behavior**\r\nI expect err to return `ants.ErrPoolOverload` when i >= 2.\r\n\r\n**Error messages/Trace logs**\r\nNo error, it processes everything 1 at a time.\r\n\r\n**System info (please complete the following information):**\r\n - OS: macOS\r\n - Go Version: 1.15.1\r\n - ants version: v2.4.2\r\n\r\n""",,,DONE,,0,2020-09-14T02:10:09.000+08:00,2020-09-13T03:11:24.000+08:00,2020-09-14T15:27:28.000+08:00,1378,,,0,0,0,gitlab:GithubUser:2372558,polds,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:719788673,https://github.com/panjf2000/ants/issues/112,,112,æƒ³é—®ä¸‹æœ¬é¡¹ç›®åœ¨è§£é”æ—¶ä¸ç”¨deferè¯­å¥çš„åŸå› ,"""æˆ‘é˜…è¯»äº†æœ¬é¡¹ç›®çš„ä»£ç ï¼Œå‘ç°æœ‰è®¸å¤šéœ€è¦è§£é”çš„åœ°æ–¹æ²¡æœ‰åœ¨deferä¸­è¿›è¡Œunlockï¼Œè€Œæ˜¯é‡‡å–äº†æ¯”è¾ƒéº»çƒ¦çš„â€”â€”åœ¨æ‰€æœ‰çš„å‡½æ•°é€€å‡ºç‚¹æ‰‹åŠ¨unlockã€‚æƒ³é—®ä¸‹ï¼Œæˆ‘ä»¬æ˜¯å‡ºäºdeferçš„æ€§èƒ½é—®é¢˜è€Œæ”¾å¼ƒäº†è¿™ä¸€å†™æ³•å—ï¼Ÿå¦‚æœæ˜¯ï¼Œåœ¨go1.13ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œdeferè¯­å¥æœ‰äº†æ¯”è¾ƒæ˜æ˜¾çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚æœæ˜¯åŸºäº1.13ä¹‹åçš„ç‰ˆæœ¬æ¥å¼€å‘è¿™ä¸€å·¥å…·ï¼Œæˆ‘ä»¬çš„å¼€å‘è€…ä¼šå€¾å‘äºé€‰æ‹©deferè¯­å¥ä¸­unlockè¿˜æ˜¯æ‰‹åŠ¨unlockï¼Ÿ""",,,DONE,,0,2020-10-15T01:56:28.000+08:00,2020-10-13T09:51:40.000+08:00,2020-10-15T01:56:28.000+08:00,2404,,,0,0,0,gitlab:GithubUser:25627418,FingalVon,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:719993557,https://github.com/panjf2000/ants/issues/113,,113,[BUG] Memory leak,"""The following is my code causing a memory leak in `ants@v2.4.2`\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""net/http\""\r\n\t_ \""net/http/pprof\""\r\n\t\""sync\""\r\n\t\""time\""\r\n\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\nfunc main() {\r\n\t/**\r\n\tpprof\r\n\thttp://127.0.0.1:6060/debug/pprof/\r\n\t*/\r\n\tgo func() {\r\n\t\t_ = http.ListenAndServe(\""localhost:6060\"", nil)\r\n\t}()\r\n\r\n\tfor k := 0; k < 4; k++ {\r\n\t\tfor i := 0; i < 400; i++ {\r\n\t\t\tgo DoTask()\r\n\t\t\ttime.Sleep(time.Millisecond * 10)\r\n\t\t}\r\n\t\ttime.Sleep(time.Second * 2)\r\n\t}\r\n\tfmt.Println(\""Done\"")\r\n\r\n}\r\n\r\nfunc DoTask() {\r\n\tpool, _ := ants.NewPool(2, ants.WithExpiryDuration(time.Second*2))\r\n\r\n\twg := sync.WaitGroup{}\r\n\r\n\t{\r\n\t\twg.Add(1)\r\n\t\terr := pool.Submit(func() {\r\n\t\t\tdefer wg.Done()\r\n\t\t\ttime.Sleep(time.Millisecond * 10)\r\n\t\t})\r\n\t\tif err != nil {\r\n\t\t\tfmt.Println(err)\r\n\t\t}\r\n\t}\r\n\r\n\t{\r\n\t\twg.Add(1)\r\n\t\terr := pool.Submit(func() {\r\n\t\t\tdefer wg.Done()\r\n\t\t\ttime.Sleep(time.Millisecond * 10)\r\n\t\t})\r\n\t\tif err != nil {\r\n\t\t\tfmt.Println(err)\r\n\t\t}\r\n\t}\r\n\r\n\twg.Wait()\r\n\tpool.Release()\r\n}\r\n\r\n```\r\n\r\n### Timeline\r\n```\r\n------------------------------------------------------------------------------------------\r\nCPU0 revertWorker            -> state closed -> Lock -> reset -> Unlock\r\n------------------------------------------------------------------------------------------\r\nCPU1 Release     -> state ok ->                                         -> Lock -> insert\r\n------------------------------------------------------------------------------------------\r\n```\r\n\r\n### Consider the following:\r\n1. `Pool.revertWorker` starts to execute (`Pool.state` is not `CLOSED`), but `Pool.revertWorker` -> `Pool.lock.Lock` has not yet been called.\r\n2. `Pool.Release` starts to execute (`Pool.state` is `CLOSED`) and `Pool.Release` -> `Pool.lock.Lock` has been called.\r\n3. `Pool.purgePeriodically` would break out of a loop next time.\r\n4. `Pool.Release` -> `p.workers.reset` (clean up all workers in `workerStack.items`).\r\n5. `Pool.revertWorker` -> `p.workers.insert`(add a worker to `workerStack.items`), but this worker would never receive any task, also leading to `goWorker.run` leaks.\r\n\r\nHowever, there may be a race condition between 1 and 2.\r\n\r\n\r\n### Note:\r\nI tried to solve that, it seemed to work.\r\n```\r\n // revertWorker puts a worker back into free pool, recycling the goroutines.\r\n func (p *Pool) revertWorker(worker *goWorker) bool {\r\n-       if capacity := p.Cap(); (capacity > 0 && p.Running() > capacity) || atomic.LoadInt32(&p.state) == CLOSED {\r\n+       if capacity := p.Cap(); capacity > 0 && p.Running() > capacity {\r\n                return false\r\n        }\r\n        worker.recycleTime = time.Now()\r\n        p.lock.Lock()\r\n\r\n+       if atomic.LoadInt32(&p.state) == CLOSED {\r\n+               p.lock.Unlock()\r\n+               return false\r\n+       }\r\n```\r\n\r\n# In Chinese\r\næˆ‘ä»¬å‘ç°`Pool.revertWorker`è·Ÿ`Pool.Release`å­˜åœ¨ç«æ€é—®é¢˜ï¼Œä¼šå¯¼è‡´`goroutine`æ³„éœ²ã€‚\r\n\r\n### Timeline\r\n```\r\n------------------------------------------------------------------------------------------\r\nCPU0 revertWorker            -> state closed -> Lock -> reset -> Unlock\r\n------------------------------------------------------------------------------------------\r\nCPU1 Release     -> state ok ->                                         -> Lock -> insert\r\n------------------------------------------------------------------------------------------\r\n```\r\n\r\nå¦‚æœ`Release`å…ˆè¿è¡Œï¼ˆå½“å‰æ± å­çŠ¶æ€æœªå…³é—­å¾€ä¸‹èµ°ç­‰é”ï¼‰ï¼Œç„¶å`revertWorker`ä¹Ÿå¼€å§‹è¿è¡Œäº†ã€‚åªè¦åè€…æ¯”å‰è€…å…ˆæ‹¿åˆ°é”`Pool.lock`ï¼Œå°±ä¼šå¯¼è‡´è¿™ä¸ªworkeræ³„éœ²ã€‚\r\n`Release`åªä¼šç»™å½“æ—¶å­˜åœ¨æ± å­ä¸­çš„`worker`å‘`nil`ï¼Œè€Œè¿™ä¸ª`worker`è‚¯å®šæ²¡æœ‰åœ¨æ± å­ä¸­ï¼›ç„¶å`purgePeriodically`ä¹Ÿä¼šå› ä¸ºæ± å­å…³é—­è€Œé€€å‡ºå¾ªç¯ï¼Œåé¢`worker`è¿‡æœŸå°±æ²¡äººç®¡äº†ã€‚é™¤æ­¤ä¹‹å¤–å¥½åƒä¹Ÿæ²¡æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥è®©æ³„éœ²çš„`worker`é€€å‡ºäº†ã€‚\r\n\r\n### Note:\r\nå°å¼Ÿæ–—èƒ†ç»™å¤§ä½¬æ‚¨æäº¤ä¸€ä¸ªissueï¼Œè¯´çš„ä¸å¯¹çš„åœ°æ–¹è¿˜è¯·å¤šå¤šæŒ‡æ­£ï¼ŒèŸ¹èŸ¹ï¼\r\næƒ³è·Ÿæ‚¨æ›´åŠ æ·±å…¥çš„è®¨è®ºä¸€ä¸‹è¿™ä¸ªåº“ï¼Œæ–¹ä¾¿åŠ ä¸‹æ‚¨çš„å¾®ä¿¡å—ï¼Ÿå°å¼Ÿé‚®ç®±cainiao666999@gmail.comï¼Œå¯ä»¥çš„è¯æˆ‘æ¥åŠ æ‚¨ğŸ˜ƒã€‚""",,BUG,DONE,,0,2020-10-15T11:35:56.000+08:00,2020-10-13T16:20:56.000+08:00,2020-10-15T11:35:56.000+08:00,2595,,,0,0,0,gitlab:GithubUser:29589055,Mutated1994,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:722994544,https://github.com/panjf2000/ants/issues/115,,115,[QUESTION] Excuse me,"""Bro, when will you consider adding a new tagï¼Ÿ""",,,DONE,,0,2020-10-16T16:14:51.000+08:00,2020-10-16T15:52:14.000+08:00,2020-10-16T16:14:51.000+08:00,22,,,0,0,0,gitlab:GithubUser:29589055,Mutated1994,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:724008505,https://github.com/panjf2000/ants/issues/116,,116,æƒ³è¯·æ•™ä¸€ä¸‹ï¼ŒæŠŠäº’æ–¥é”æ”¹æˆè‡ªæ—‹é”çš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nå¦‚é¢˜ï¼Œå¤§æ¦‚çŒœæµ‹æ˜¯å› ä¸ºé”ä¿æŠ¤çš„ä»£ç æ—¶é—´éå¸¸çŸ­ï¼Œä½¿ç”¨è‡ªæ—‹é”èƒ½å¤Ÿæ¯”äº’æ–¥é”æ€§èƒ½æ›´ä¼˜ï¼Ÿ""",,,DONE,,0,2020-10-18T22:46:48.000+08:00,2020-10-18T21:35:14.000+08:00,2020-10-19T00:03:27.000+08:00,71,,,0,0,0,gitlab:GithubUser:7411249,imxyb,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:728597070,https://github.com/panjf2000/ants/issues/118,,118,Does this means we can perform soft-realtime goroutine using this feature like erlang?,"""possible to use ants as a soft-realtime go func() like erlang?\r\n\r\nsorry i hv yet to explore this code in detail but i'm exploring options to make goroutines handle more connections like erlang.""",,,TODO,,0,,2020-10-24T07:26:54.000+08:00,2020-10-24T07:26:54.000+08:00,0,,,0,0,0,gitlab:GithubUser:51514008,gitmko0,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:729205618,https://github.com/panjf2000/ants/issues/119,,119,worker exits from a panic: reflect: call of reflect.Value.Len on ptr Value,"""**worker exits from a panic: reflect: call of reflect.Value.Len on ptr Value**""",,,DONE,,0,2020-11-02T22:02:26.000+08:00,2020-10-26T11:28:28.000+08:00,2020-11-02T22:02:26.000+08:00,10713,,,0,0,0,gitlab:GithubUser:48704159,gdlxSong,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:730161470,https://github.com/panjf2000/ants/issues/120,,120,æäº¤äº†å¤§é‡BlockingTasksï¼Œå½“pool.æ³¨é”€æ—¶ï¼Œå›æ”¶å†…å­˜æ¯”è¾ƒæ…¢,"""æˆ‘æƒ³çŸ¥é“ï¼Œæ€ä¹ˆè‡ªå®šä¹‰å›æ”¶å†…å­˜çš„æ—¶é—´""",,,DONE,,0,2020-10-28T17:20:39.000+08:00,2020-10-27T14:41:08.000+08:00,2020-10-30T17:41:28.000+08:00,1599,,,0,0,0,gitlab:GithubUser:7267234,jiangjiali,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:736200176,https://github.com/panjf2000/ants/issues/122,,122,Some questions about pool.Tune(),"""i use the ants as the pool to control goroutines, and pool.Tune() can  tune pool capacity in runtime, so it is necessary to realize automatic expansion and contraction of pool? Looking forward to your answer, thank you ï¼\r\nä½¿ç”¨äº†antsä½œä¸ºpoolç®¡æ§goroutineï¼Œ poolä¸­ä¹Ÿæä¾›äº†ä¸€ä¸ªTune()æ–¹æ³•å¯ä»¥åœ¨è¿è¡ŒæœŸé—´è°ƒæ•´å¤§å°ï¼Œé‚£ä¹ˆè¿˜æœ‰å¿…è¦å»å®ç°poolçš„è‡ªåŠ¨æ‰©ç¼©å®¹å—ï¼ŸæœŸå¾…ä½ çš„è§£ç­”ï¼Œè°¢è°¢ï¼""",,,DONE,,0,2020-11-10T10:45:34.000+08:00,2020-11-04T23:20:51.000+08:00,2020-11-10T10:45:34.000+08:00,7884,,,0,0,0,gitlab:GithubUser:42341553,PPeacHH,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:737043014,https://github.com/panjf2000/ants/issues/123,,123,the ants goroutine pool performance ,"""**Why the perf result on my local when using ants goroutines pool doesn't like the benchmark pictures?**\r\nI have cloned the latest code on the master branch and tried to run this command _go test -bench=. -run=none -benchmem=true_ but I got the result quite different from your benchmark pictures, the time of each test loop when using ants pool takes longer.\r\n\r\nHere is the result on my machine:\r\n![image](https://user-images.githubusercontent.com/23579202/98261210-cb490000-1fb6-11eb-95fb-ef28d2227234.png)\r\n\r\nIn the bench tests, I see you're using the ant pool with size 200000 to handle 1000000 tasks, so the result on my machine is what I expected because the size of the ants pool smaller than the number of tasks, so it will save the hardware resources for us but can not be faster than spawning 1000000 goroutines for that job. \r\n\r\nplease correct me. \r\n\r\nHere is the detail of my environment when running the test:\r\n_go version go1.15 darwin/amd64_\r\n`\r\n    Hardware Overview:\r\n\r\n      Processor Name: 6-Core Intel Core i7\r\n      Processor Speed: 2.6 GHz`\r\nOS: macOS catalina""",,,DONE,,0,2020-11-14T10:23:44.000+08:00,2020-11-05T23:41:29.000+08:00,2020-11-22T15:19:49.000+08:00,12162,,,0,0,0,gitlab:GithubUser:23579202,jedrp,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:737434903,https://github.com/panjf2000/ants/issues/124,,124,å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ ä¿å­˜ NewPoolä¹ˆï¼Ÿ,"""""",,,DONE,,0,2020-11-12T20:34:23.000+08:00,2020-11-06T11:49:31.000+08:00,2020-11-12T20:34:41.000+08:00,9164,,,0,0,0,gitlab:GithubUser:14883130,foreverZSJ,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:738170151,https://github.com/panjf2000/ants/issues/125,,125,About the memory consumption of pool,"""How much memory per goroutine pool size? Can you please put this on main page?\r\np, _ := ants.NewPool(50000) <- basically goroutine use 2kb / 4kb per go routine\r\n\r\nFrom benchmark, it's 50k pool\r\nhttps://github.com/panjf2000/ants/#-performance-summary\r\ntotal 10M ants instance is 38mb which means each item size is 760bytes with 50000 items.\r\n\r\nis 760bytes the limit for each pool item?\r\n\r\nlast question:\r\npool.Tune(100000) <- May I ask what's the \""optimum size\"" for this? what's a good suggestion / advise on setting size? also on what occasion will u suggest tuning this size? please put the number of bytes each pool is on front page as mentioned so we can calculate and adjust better with your input.""",,,TODO,,0,,2020-11-07T12:40:04.000+08:00,2020-11-07T12:48:39.000+08:00,0,,,0,0,0,gitlab:GithubUser:51514008,gitmko0,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:738173237,https://github.com/panjf2000/ants/issues/126,,126,About the performace when using ants in websocket ,"""Will websocket be written with ants be more performant than using solutions such as gobwas or fastws\r\n\r\nWith reference to go routines being used in websocket here\r\nhttps://www.freecodecamp.org/news/million-websockets-and-go-cc58418460bb/\r\nand also here:\r\nhttps://github.com/dgrr/fastws/\r\n\r\nI havent tried yet but do you think ants with websocket will be faster and more performant than them for high number of connections? e.g. 1M to 10M connections using ants for websocket.""",,,TODO,,0,,2020-11-07T13:02:02.000+08:00,2021-01-11T09:50:12.000+08:00,0,,,0,0,0,gitlab:GithubUser:51514008,gitmko0,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:738174165,https://github.com/panjf2000/ants/issues/127,,127,I just realised your server spec must be very very good,"""For 10M tasks using only 1.3gb, can you put your server spec into front page for your benchmark?\r\nIt seems to be very very good.""",,,TODO,,0,,2020-11-07T13:08:00.000+08:00,2020-11-07T13:08:00.000+08:00,0,,,0,0,0,gitlab:GithubUser:51514008,gitmko0,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:741209727,https://github.com/panjf2000/ants/issues/128,,128,æ•´ä¸ªé¡¹ç›®çš„æ ¸å¿ƒï¼Œ æˆ‘çš„ç†è§£å¯¹ä¸å¯¹ï¼,"""\r\n![image](https://user-images.githubusercontent.com/24741439/98886138-674e9c00-24ce-11eb-9303-48ae82158104.png)\r\n\r\næˆªå›¾æ‰€ç¤º\r\n## ç¬¬ä¸€éƒ¨åˆ†æ˜¯å¤ç”¨ goruntine workeræ± å­ï¼Œ é˜²æ­¢é¢‘ç¹åˆ›å»ºï¼Œgc ä¸å¿…è¦çš„æŸè€—\r\n## ç¬¬äºŒéƒ¨åˆ†æ˜¯åœ¨å¤ç”¨æ± å­çš„åŸºç¡€ä¸Šï¼Œæ§åˆ¶æ± å­çš„å¤§å°\r\nä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸å¯¹ï¼Œ æœ€æ–°å¯¹è¿™å—æ€§èƒ½æ–¹é¢ä¼˜åŒ–æŒºæ„Ÿå…´è¶£çš„""",,,DONE,,0,2020-11-14T10:17:22.000+08:00,2020-11-12T10:08:14.000+08:00,2020-11-18T16:15:24.000+08:00,2889,,,0,0,0,gitlab:GithubUser:24741439,Xuzan9396,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:755047477,https://github.com/panjf2000/ants/issues/129,,129,"å¦‚æœä»»åŠ¡å¡ä¸»äº†,æ€ä¹ˆå…³é—­è¿™ä¸ªä»»åŠ¡","""æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ä¸»åŠ¨å…³é—­åç¨‹\r\n""",,,DONE,,0,2020-12-05T11:33:10.000+08:00,2020-12-02T16:11:16.000+08:00,2020-12-05T11:33:17.000+08:00,4041,,,0,0,0,gitlab:GithubUser:30611869,lwydyby,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:772339531,https://github.com/panjf2000/ants/issues/130,,130,å…³äºè¿”å›å€¼,"""æˆ‘æƒ³çŸ¥é“ï¼Œæˆ‘æ€æ ·æ‰èƒ½è·å–æ¯ä¸ªåç¨‹çš„è¿”å›å€¼ï¼Œéœ€è¦æˆ‘å•ç‹¬æ„å»ºä¸€ä¸ªç®¡é“ä¹ˆï¼Ÿå¦å¤–ï¼Œæˆ‘åº”å½“å¦‚ä½•æ§åˆ¶è¶…æ—¶ï¼Ÿ""",,,DONE,,0,2020-12-22T14:43:23.000+08:00,2020-12-22T01:23:50.000+08:00,2020-12-22T14:43:23.000+08:00,799,,,0,0,0,gitlab:GithubUser:17517153,Alberthchang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:802177721,https://github.com/panjf2000/ants/issues/132,,132,need more examples,"""Is there any repo using ants as an example? \r\nants is an amazing package , though i feel it needs more documentation and examples""",,REQUIREMENT,DONE,,0,2021-05-23T21:34:56.000+08:00,2021-02-05T21:46:12.000+08:00,2021-05-23T21:34:57.000+08:00,154068,,,0,0,0,gitlab:GithubUser:70520127,savixazz,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1024790716,https://github.com/panjf2000/ants/issues/188,,188,"Shopify,Inc is using this project on production, maybe we ad a logo on user case.",null,,,DONE,,0,2021-10-13T21:42:42.000+08:00,2021-10-13T13:07:52.000+08:00,2021-10-13T21:42:42.000+08:00,514,,,0,0,0,gitlab:GithubUser:3814966,lilien1010,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:807765048,https://github.com/panjf2000/ants/issues/133,,133,Any difference between using without modules and v2?,"""I'm using without modules and it works fine. Wondering if there are any benefits to use the v2 version with modules""",,,DONE,,0,2021-03-26T01:11:15.000+08:00,2021-02-13T23:03:51.000+08:00,2021-03-26T01:11:15.000+08:00,57727,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:818082145,https://github.com/panjf2000/ants/issues/134,,134,ç”¨vendoræ€ä¹ˆä¸‹è½½v2ç‰ˆæœ¬ï¼Ÿï¼Ÿï¼Ÿ,"""è€é¡¹ç›®ç”¨çš„vendorï¼Œæš‚æ—¶ç”¨ä¸äº†gomodï¼Œä½†æ˜¯ç°åœ¨åº“é‡Œä¸€ä¸ªåŒ…ä¾èµ–çš„æ˜¯v2ç‰ˆæœ¬ï¼Œæ€ä¹ˆä¸‹è½½v2çš„åˆ°vendoré‡Œå‘¢ï¼Ÿ""",,,DONE,,0,2021-03-03T14:20:51.000+08:00,2021-02-28T10:39:49.000+08:00,2021-03-03T14:20:51.000+08:00,4541,,,0,0,0,gitlab:GithubUser:25148685,hhyvs111,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:818372401,https://github.com/panjf2000/ants/issues/135,,135,"If ants' goroutine crash, will the whole software crash?","""If ants' goroutine crash, will the whole software crash?\r\n\r\nIf so, how can we make it so that the software will still runs even if crash like erlang processes?""",,,DONE,,0,2021-03-02T00:44:24.000+08:00,2021-03-01T09:10:30.000+08:00,2021-03-02T00:44:24.000+08:00,933,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:821650908,https://github.com/panjf2000/ants/issues/137,,137,"Since we can pool.Tune(), how can we return the current capacity to check if it's worth tuning up or down?","""Since we can pool.Tune(), how can we return the current capacity to check if it's worth tuning up or down?\r\n\r\npossible to do a Capacity()? Does it hv this function already?""",,REQUIREMENT,DONE,,0,2021-03-04T09:04:21.000+08:00,2021-03-04T09:03:06.000+08:00,2021-03-04T09:04:21.000+08:00,1,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:823817947,https://github.com/panjf2000/ants/issues/138,,138,è¯·æ•™ä¸‹æ€ä¹ˆåˆ¤æ–­æ¯ä¸ªworkerçš„ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæ¯•å‘¢ï¼Ÿ,"""ä½œè€…ä½ å¥½ï¼Œåœ¨`README`ä¸­ï¼Œé¢„å…ˆçŸ¥é“äº†éœ€è¦æ‰§è¡Œçš„taskä¸ªæ•°ï¼Œåˆ©ç”¨`sync.WaitGroup`å»ç­‰å¾…æ‰€æœ‰çš„taskæ‰§è¡Œå®Œæ¯•\r\n\r\næƒ³è¯·æ•™ä¸‹ï¼Œåœ¨é¢„å…ˆä¸çŸ¥é“taskä¸ªæ•°çš„æƒ…å†µä¸‹ï¼Œæ€ä¹ˆå»çŸ¥é“æ‰€æœ‰çš„Taskéƒ½æ‰§è¡Œå®Œäº†å‘¢ï¼Ÿï¼Œä¼ªä»£ç å¦‚ä¸‹:\r\n\r\n```golang\r\n\r\ntype Args struct {\r\n    ID       int\r\n    Name string\r\n}\r\n\r\nfunc Task(args interface{}){\r\n    param := args.(Args)\r\n    fmt.Printf(\""param: %#v\\n\"", param)\r\n}\r\n\r\nfunc main() {\r\n    defer ants.Release()\r\n    \r\n    p, _ = ants.NewPoolWithFunc(10, Task)\r\n    \r\n    defer p.Release()\r\n\r\n    for _, model := range queryResult {    \r\n        args := Args {\r\n             Name: model.Name,\r\n             ID:       model.ID,\r\n        }\r\n        p.Invoke(args)\r\n    }\r\n    //ç­‰å¾…æ‰€æœ‰çš„Taskæ‰§è¡Œå®Œæ¯•åå†ç»“æŸ ï¼Ÿ\r\n}\r\n```\r\n""",,,DONE,,0,2021-03-10T14:05:31.000+08:00,2021-03-07T11:26:03.000+08:00,2021-03-10T14:05:31.000+08:00,4479,,,0,0,0,gitlab:GithubUser:18528873,mayouzi,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:824927472,https://github.com/panjf2000/ants/issues/140,,140,Sitting idle using ants eats up to 5% cpu progressively from time to time,"""Sitting idle using ants eats up to 5% cpu just sitting idle from time to time.\r\n\r\npossible to disable this eating cpu? if idle should not be eating cpu time.""",,REQUIREMENT,DONE,,0,2021-03-28T21:29:40.000+08:00,2021-03-09T04:32:45.000+08:00,2021-03-28T21:29:40.000+08:00,28376,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:830099075,https://github.com/panjf2000/ants/issues/141,,141,retrieveWorker may wait forever,"""1. retrieveWorker will wait when there is no any available work.\r\n2. Then, call Pool.Release(), the state of pool will be changed to CLOSED.\r\n3. All works which are running finish their work, then revertWorker return false, since the state is CLOSED.\r\n4. The tick in purgePeriodically() function will arrive, then break from the for loop, since the state is CLOSED.\r\n\r\nSo, nobody will send the signals to the guys which are waiting in retrieveWorker function.""",,BUG,DONE,,0,2021-03-18T22:01:18.000+08:00,2021-03-12T21:04:12.000+08:00,2021-03-18T22:01:18.000+08:00,8697,,,0,0,0,gitlab:GithubUser:17548688,math345,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:830908542,https://github.com/panjf2000/ants/issues/142,,142,Why not â€œp.Running()<capacityâ€ï¼Ÿ,"""https://github.com/panjf2000/ants/blob/fd8d670fd09489e6ea7693c0a382ba85d2694f16/pool.go#L238\r\n\r\nWhen the worker being executed is less than the capacity, it is already possible not to block, so why wait for all the execution to be completed before you can spawnWorker().\r\nWhy not â€œp.Running()<capacityâ€ï¼Ÿ\r\nI am a newbie and would like to get answersï¼Œthanks.\r\n\r\nå½“æ­£åœ¨æ‰§è¡Œçš„workerå°äºå®¹é‡çš„æ—¶å€™ï¼Œå°±å·²ç»å¯ä»¥ä¸ç”¨é˜»å¡äº†ï¼Œä¸ºä»€ä¹ˆè¦ç­‰å¾…å…¨éƒ¨æ‰§è¡Œå®Œäº†æ‰å¯ä»¥è¿›è¡ŒspawnWorker()""",,,DONE,,0,2021-03-17T20:54:56.000+08:00,2021-03-13T22:17:59.000+08:00,2021-03-18T09:30:05.000+08:00,5676,,,0,0,0,gitlab:GithubUser:48661001,sirodeneko,gitlab:GithubUser:0,,,
gitlab:GithubIssue:834309657,https://github.com/panjf2000/ants/issues/143,,143,å…³äº [Issue 142][Why not â€œp.Running()<capacityâ€] çš„é—®é¢˜,"""\r\nç”±äº [Issue 142 Why not â€œp.Running()<capacityâ€](https://github.com/panjf2000/ants/issues/142) å·²ç» Closed ï¼Œæ‰€ä»¥æˆ‘æ–°æäº¤äº†ä¸€ä¸ª Issue ã€‚\r\n\r\nè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³è¿‡ã€‚æˆ‘è§‰å¾—ç›®å‰çš„åšæ³•ä¸æ˜¯å¾ˆä¼˜é›…ã€‚æˆ‘ä¹‹å‰å¯¹è¿™æ®µä»£ç è¿›è¡Œäº†ä¸€äº›æ¨æ•²ï¼Œæˆ‘æŠŠæˆ‘çš„ç†è§£æ•´ç†å¦‚ä¸‹ã€‚\r\n\r\nä¸ºä»€ä¹ˆè¦åŠ ä¸‹é¢è¿™æ®µä»£ç å‘¢ï¼Ÿè€Œä¸” p.lock.Unlock() åå†è°ƒç”¨ spawnWorker()ï¼Œrunning ä¸ªæ•°å¤±å»äº†ä¿æŠ¤ï¼Œè¿™ä¸ªæ¬¡æ•°å°±æœ‰å¯èƒ½è¶…è¿‡äº†è®¾å®šçš„æœ€å¤§å€¼ capacityã€‚\r\n\r\n```\r\n\t\tif p.Running() == 0 {\r\n\t\t\tp.lock.Unlock()\r\n\t\t\tspawnWorker()\r\n\t\t\treturn\r\n\t\t}\r\n```\r\n\r\nå¥½å§ï¼Œæˆ‘ä»¬å…ˆå¿½ç•¥ä¸Šé¢è¿™ä¸ªå°é—®é¢˜ã€‚å†æ¥çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åœ¨ w == nil æ—¶ï¼Œç›´æ¥ spawnWorker() ä¸ªæ–°çš„ worker?  å› ä¸ºæœ‰å¯èƒ½æ˜¯æ”¶åˆ°å¹¿æ’­ä¿¡å·ï¼Œæ­¤æ—¶ä¸èƒ½ä¿è¯ p.Running() <= capacity ã€‚\r\n\r\n```\r\n\t\tw = p.workers.detach()\r\n\t\tif w == nil {\r\n\t\t\tgoto Reentry\r\n\t\t}\r\n```\r\n\r\nä½†æ˜¯ï¼Œæˆ‘è§‰å¾—å¯ä»¥é€šè¿‡ä¿®æ”¹æˆä¸‹é¢çš„ä»£ç è§£å†³æ‰è¿™ä¸ªé—®é¢˜\r\n\r\n```\r\n\t\tw = p.workers.detach()\r\n\t\tif w == nil {\r\n\t\t\tif p.Running() < capacity {\r\n\t\t\t\tspawnWorker()\r\n\t\t\t\tp.lock.Unlock()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tgoto Reentry\r\n\t\t}\r\n```\r\n\r\nç”±äºä½œè€…æ²¡æœ‰é‡‡ç”¨ç±»ä¼¼è¿™æ ·çš„å†™æ³•ï¼Œå¯¼è‡´éœ€è¦å¢åŠ  `if p.Running() == 0` è¿™æ®µä»£ç å¤„ç†å¹¿æ’­ä¿¡å·ã€‚\r\n\r\nå†æ¥çœ‹å¹¿æ’­ä¿¡å·ï¼Œå¹¿æ’­ä¿¡å·æ˜¯åœ¨å®šæ—¶å›æ”¶æ—¶ï¼Œæ»¡è¶³ä¸‹é¢çš„æ¡ä»¶è§¦å‘çš„ã€‚\r\n\r\n```\r\n\t\t// There might be a situation that all workers have been cleaned up(no any worker is running)\r\n\t\t// while some invokers still get stuck in \""p.cond.Wait()\"",\r\n\t\t// then it ought to wakes all those invokers.\r\n\t\tif p.Running() == 0 {\r\n\t\t\tp.cond.Broadcast()\r\n\t\t}\r\n```\r\n\r\nä¸ºä»€ä¹ˆéœ€è¦è¿™æ®µä»£ç ï¼ŸåŸå› åœ¨äºéœ€è¦è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå½“ retrieveWorker() å‘ç° runing() ä¸ªæ•°è¶…è¿‡äº†å®¹é‡ï¼Œå› æ­¤åœ¨ p.cond.Wait() ä¸­ã€‚ä¹‹å runing() çš„æ‰€æœ‰ worker f() éƒ½å‘ç”Ÿäº† panicï¼ŒæŒ‰å½“å‰çš„ä»£ç é€»è¾‘ï¼Œæ˜¯æ— æ³•æ­£å¸¸å½’è¿˜åˆ°å·¥ä½œæ± ä¸­çš„ï¼ŒrevertWorker ä¸ä¼šè¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ revertWorker ä¸ä¼šå‘å‡º Signal é€šçŸ¥ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ£€æµ‹åˆ°æ²¡æœ‰1ä¸ªworker runningï¼Œå°± Broadcast ä¿¡å·ã€‚\r\n\r\n```\r\nfor f := range w.task {\r\n\t\r\n\tif f == nil {\r\n\t\treturn\r\n\t}\r\n\t\r\n\t// éœ€è¦è€ƒè™‘ f() panic çš„æƒ…å†µï¼Œæ­¤æ—¶ä¸ä¼šå½’è¿˜åˆ°å·¥ä½œæ± ä¸­\r\n\tf()\r\n\t\r\n\tif ok := w.pool.revertWorker(w); !ok {\r\n\t\treturn\r\n\t}\r\n}\r\n```\r\n\r\nå› æ­¤å¹¿æ’­ä¿¡å·çš„åŠ å…¥ï¼Œç¡®å®å¢åŠ äº†å¤æ‚åº¦ã€‚èƒ½ä¸èƒ½åœ¨work run() ä¸­åŒ…è£…è°ƒç”¨ f() ï¼Œå¤„ç† panic ?""",,REQUIREMENT,TODO,,0,,2021-03-18T09:36:19.000+08:00,2021-08-30T12:06:42.000+08:00,0,,,0,0,0,gitlab:GithubUser:17548688,math345,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:837779470,https://github.com/panjf2000/ants/issues/144,,144,"Out-of-date README, misleading terminology and stale description on high performance ","""Thanks for your great job on the project. \r\n\r\nI have some questions:\r\n1. out-of-date image and code\r\n The image [10M tasks](https://github.com/panjf2000/ants#10m-tasks) is a misused or stale image. The bench function it called is not the same as [1M tasks](https://github.com/panjf2000/ants#1m-tasks) and [100k tasks](https://github.com/panjf2000/ants#100k-tasks). It is partly the same as the pic [benchmarks-with-poolwithfunc](https://github.com/panjf2000/ants#benchmarks-with-poolwithfunc) above.\r\n And I didn't see the bench function it called ,naming \""BenchmarkGoroutineWithFunc\"",\""BenchmarkAntsPoolWithFunc\"", exists in the source code. Maybe it has already been removed from the src, or changed to \""^TestAntsPoolWithFunc...\""\r\n\r\n2. About throughput and latency\r\n In [here](https://github.com/panjf2000/ants#throughput-it-is-suitable-for-scenarios-where-tasks-are-submitted-asynchronously-without-waiting-for-the-final-results), you describe the result as a kind of throughput,but maybe it should be more like a one-way latency (you just commit the job,and never wait it to be done)\r\n Throughput should be calculated like  [here](https://github.com/panjf2000/ants/blob/master/ants_benchmark_test.go#L64) , using wg.Wait() to get the total elapsed time t, and divide it to the number of goroutines committed, e.g.\"" t / #goroutine \""\r\n That's a clear question when facing pipeline.\r\n The Image [performance-summary](https://github.com/panjf2000/ants#-performance-summary) uses \""Goroutine throughput benchmark\"" as its title, but using memory and latency as its y-label, which is confusing. Maybe \""throughput\"" should be removed\r\n\r\n3. About the performance,I tried to run the bench for more than 3 times, and got the following results.\r\nThe results seem to be very different from the bench in your [README](https://github.com/panjf2000/ants#benchmarks-with-pool)\r\n\r\nAbout my machine&env:\r\n```\r\nIntel(R) Core(TM) i5-8250U CPU @ 1.60GHz\r\n\r\ngo version go1.16.2 windows/amd64\r\n```\r\n\r\n3.1 Using Test\r\nThe only quoted variable `n` has been set to ` n        = 10000000 `, e.g. 10M\r\nIt seems that TestAntsPool runs slower than TestNoPool, though the memory saved is obviously huge.\r\n\r\n```sh\r\nPS D:\\go-work\\src\\github.com\\panjf2000\\ants> go test -run=NoPool -v\r\n=== RUN   TestNoPool\r\n    ants_test.go:210: memory usage:789 MB\r\n--- PASS: TestNoPool (5.04s)\r\nPASS\r\nok      github.com/panjf2000/ants/v2    5.154s\r\n\r\nPS D:\\go-work\\src\\github.com\\panjf2000\\ants> go test -run=\""AntsPool$\"" -v\r\n=== RUN   TestAntsPool\r\n    ants_test.go:225: pool, capacity:2147483647\r\n    ants_test.go:226: pool, running workers number:19360\r\n    ants_test.go:227: pool, free workers number:2147464287\r\n    ants_test.go:232: memory usage:184 MB\r\n--- PASS: TestAntsPool (7.41s)\r\nPASS\r\nok      github.com/panjf2000/ants/v2    7.528s\r\n```\r\n\r\n3.2 Using Benchmark\r\nI first set the param to 1M tasks and 50k pool capacity,just like what you set in [README](https://github.com/panjf2000/ants#-benchmarks)\r\nHere the performance is significantly higher than \""without pool\""\r\n```sh\r\nRunning tool: D:\\GO\\bin\\go.exe test -benchmem -run=^$ -bench ^(BenchmarkGoroutines)$ github.com/panjf2000/ants/v2\r\n\r\ngoos: windows\r\ngoarch: amd64\r\npkg: github.com/panjf2000/ants/v2\r\ncpu: Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz\r\nBenchmarkGoroutines-8   \t       1\t10773745800 ns/op\t509732352 B/op\t 1996637 allocs/op\r\nPASS\r\nok  \tgithub.com/panjf2000/ants/v2\t11.616s\r\n\r\nRunning tool: D:\\GO\\bin\\go.exe test -benchmem -run=^$ -bench ^(BenchmarkAntsPool)$ github.com/panjf2000/ants/v2\r\n\r\ngoos: windows\r\ngoarch: amd64\r\npkg: github.com/panjf2000/ants/v2\r\ncpu: Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz\r\nBenchmarkAntsPool-8   \t       2\t 712292750 ns/op\t21032456 B/op\t 1063341 allocs/op\r\nPASS\r\nok  \tgithub.com/panjf2000/ants/v2\t2.363s\r\n```\r\nIt is weird for me to see the different result, given the src code is nearly the same.\r\n\r\n4. Is it OK to use a [only sleep function](https://github.com/panjf2000/ants/blob/master/ants_benchmark_test.go#L39) acting as worker?\r\nMaybe changing the demoFunc to a CPU-bound func like the following, or a related compromise.\r\n```go\r\n// func demoFunc() {\r\n// \ttime.Sleep(time.Duration(BenchParam) * time.Millisecond)\r\n// }\r\nfunc demoFunc() {\r\n\tbegin := time.Now()\r\n\ti := 0\r\n\tfor {\r\n\t\ti++\r\n\t\tend := time.Now()\r\n\t\tif end.UnixNano()-begin.UnixNano() > int64(time.Millisecond)*BenchParam {\r\n\t\t\treturn\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n5. However, in this [issue](https://github.com/panjf2000/ants/issues/123), you admit that the performance isn't higher than the plain goroutine anymore. Please UPDATE THE README!\r\n\r\nIf I have any error,correct me plz. That's my pleasure to see such an awesome project in saving memory alloction, avoiding unlimited goroutine constructions.\r\n\r\n\r\n""",,,DONE,,0,2021-06-29T15:33:58.000+08:00,2021-03-22T22:34:21.000+08:00,2021-06-29T15:33:58.000+08:00,142139,,,0,0,0,gitlab:GithubUser:49816514,wymli,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:838523489,https://github.com/panjf2000/ants/issues/145,,145,åç¨‹æ€§èƒ½,"""ç›®å‰æˆ‘ç”¨antsä½œä¸ºåç¨‹æ± å¤„ç†å¹¶å‘è¯·æ±‚, å‘ç°åç¨‹çš„å»¶è¿Ÿæœ‰80~100us,  å’Œæˆ‘ç›´æ¥ç”¨go funcçš„å»¶è¿Ÿå·®åˆ«ä¸å¤§. \r\nç”±äºæˆ‘çš„è¯·æ±‚æœ¬èº«å»¶è¿Ÿå¤§æ¦‚500-600us, åç¨‹çš„å»¶è¿Ÿæ¯”è¾ƒå½±å“æ€§èƒ½\r\nè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥æ”¹å–„çš„å—\r\n""",,,DONE,,0,2021-05-23T14:50:35.000+08:00,2021-03-23T17:28:13.000+08:00,2021-05-23T14:50:35.000+08:00,87682,,,0,0,0,gitlab:GithubUser:75625523,cham-pin,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1025263959,https://github.com/panjf2000/ants/issues/190,,190,Pause API is needed in some scenario,"""in our case, we need a `pool.Pause()` to  pause all jobs, and  use `pool.Resume()` to restart the jobs.""",,REQUIREMENT,TODO,,0,,2021-10-13T21:37:28.000+08:00,2022-03-23T06:43:23.000+08:00,0,,,0,0,0,gitlab:GithubUser:3814966,lilien1010,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:840918413,https://github.com/panjf2000/ants/issues/146,,146,æ‰€æœ‰ workers å‘ç”Ÿ panic å¯¼è‡´é‚£äº›æ­£åœ¨ç­‰å¾…å¯ç”¨ worker çš„è°ƒç”¨æ–¹é˜»å¡ä½,"""**Describe the bug**\r\næç«¯æƒ…å†µä¸‹ï¼Œåç¨‹çš„æ‰§è¡Œé€Ÿåº¦ä¸º`ExpiryDuration`çš„æ—¶é•¿\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. åˆ›å»ºä¸€ä¸ª`size`ä¸º1ï¼Œ`ExpiryDuration`ä¸º10sçš„åç¨‹æ± \r\n2. åˆ›å»ºä¸€ä¸ªæ¯æ¬¡å¿…panicçš„å‡½æ•°`panicFunc`\r\n3. å‘åç¨‹æ± æ·»åŠ 5æ¬¡`panicFunc`ä»»åŠ¡ï¼Œå¹¶ä¸”åç»­ä¸ä¼šå†æ·»åŠ æ–°çš„ä»»åŠ¡\r\n4. ç»“æœæ¯`10s`(ä¹Ÿå°±æ˜¯è®¾å®šçš„`ExpiryDuration`çš„æ—¶é•¿)æ‰ä¼šæ‰“å°ä¸€æ¬¡panicå †æ ˆ\r\n\r\nä»£ç å¦‚ä¸‹ï¼š\r\n```go\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""sync\""\r\n\t\""time\""\r\n\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\nfunc main() {\r\n\trunTimes := 5\r\n\tvar wg sync.WaitGroup\r\n\tpool, _ := ants.NewPool(1, ants.WithExpiryDuration(10 * time.Second))\r\n\tpanicFunc := func() {\r\n\t\ttime.Sleep(10 * time.Millisecond)\r\n\t\twg.Done()\r\n\t\tpanic(\""test panic\"")\r\n\t}\r\n\tfor i := 0; i < runTimes; i++ {\r\n\t\twg.Add(1)\r\n\t\t_ = pool.Submit(panicFunc)\r\n\t}\r\n\twg.Wait()\r\n\tfmt.Printf(\""running goroutines: %d\\n\"", pool.Running())\r\n}\r\n\r\n```\r\n**Expected behavior**\r\n5æ¬¡`panic`åº”è¯¥å †æ ˆå¾ˆå¿«å°±æ‰“å°å®Œ\r\n\r\n**Error messages/Trace logs**\r\n```cmd\r\n2021/03/25 21:10:15 worker exits from a panic: test panic\r\n2021/03/25 21:10:15 worker exits from panic: goroutine 8 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc000072180)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:58 +0x161\r\npanic(0x10b2d60, 0x10f3fa0)\r\n        /usr/local/opt/go@1.13/libexec/src/runtime/panic.go:679 +0x1b2\r\nmain.main.func1()\r\n        /Users/admin/dev/ginlearn/ants/examples/test_panic/main.go:18 +0x67\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc000072180)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:68 +0xa5\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /Users/admin/dev/ginlearn/ants/worker.go:48 +0x4c\r\n\r\n2021/03/25 21:10:25 worker exits from a panic: test panic\r\n2021/03/25 21:10:25 worker exits from panic: goroutine 18 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc0000c8000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:58 +0x161\r\npanic(0x10b2d60, 0x10f3fa0)\r\n        /usr/local/opt/go@1.13/libexec/src/runtime/panic.go:679 +0x1b2\r\nmain.main.func1()\r\n        /Users/admin/dev/ginlearn/ants/examples/test_panic/main.go:18 +0x67\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc0000c8000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:68 +0xa5\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /Users/admin/dev/ginlearn/ants/worker.go:48 +0x4c\r\n\r\n2021/03/25 21:10:35 worker exits from a panic: test panic\r\n2021/03/25 21:10:35 worker exits from panic: goroutine 33 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc0000e6000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:58 +0x161\r\npanic(0x10b2d60, 0x10f3fa0)\r\n        /usr/local/opt/go@1.13/libexec/src/runtime/panic.go:679 +0x1b2\r\nmain.main.func1()\r\n        /Users/admin/dev/ginlearn/ants/examples/test_panic/main.go:18 +0x67\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc0000e6000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:68 +0xa5\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /Users/admin/dev/ginlearn/ants/worker.go:48 +0x4c\r\n\r\n2021/03/25 21:10:45 worker exits from a panic: test panic\r\n2021/03/25 21:10:45 worker exits from panic: goroutine 49 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc000072180)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:58 +0x161\r\npanic(0x10b2d60, 0x10f3fa0)\r\n        /usr/local/opt/go@1.13/libexec/src/runtime/panic.go:679 +0x1b2\r\nmain.main.func1()\r\n        /Users/admin/dev/ginlearn/ants/examples/test_panic/main.go:18 +0x67\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc000072180)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:68 +0xa5\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /Users/admin/dev/ginlearn/ants/worker.go:48 +0x4c\r\n\r\n2021/03/25 21:10:55 worker exits from a panic: test panic\r\n2021/03/25 21:10:55 worker exits from panic: goroutine 51 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc0000e6000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:58 +0x161\r\npanic(0x10b2d60, 0x10f3fa0)\r\n        /usr/local/opt/go@1.13/libexec/src/runtime/panic.go:679 +0x1b2\r\nmain.main.func1()\r\n        /Users/admin/dev/ginlearn/ants/examples/test_panic/main.go:18 +0x67\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc0000e6000)\r\n        /Users/admin/dev/ginlearn/ants/worker.go:68 +0xa5\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /Users/admin/dev/ginlearn/ants/worker.go:48 +0x4c\r\n\r\nrunning goroutines: 0\r\n\r\n```\r\n**System info (please complete the following information):**\r\n - OS:  macOS 11.2.3\r\n - Go Version: go1.13.15 darwin/amd64\r\n - ants version: v2.4.3\r\n\r\n**Additional context**\r\næ„Ÿè§‰è¿™ç§æƒ…å†µå¾ˆæç«¯ï¼Œç”Ÿäº§ç¯å¢ƒä¸­å‡ ä¹ä¸ä¼šå­˜åœ¨ï¼Œä¸çŸ¥æœ‰æ²¡æœ‰ä¿®å¤çš„å¿…è¦ã€‚""",,BUG,DONE,,0,2021-03-28T22:38:11.000+08:00,2021-03-25T21:17:49.000+08:00,2021-03-28T22:39:24.000+08:00,4400,,,0,0,0,gitlab:GithubUser:38038921,shangxiaomi,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:841138037,https://github.com/panjf2000/ants/issues/147,,147,Crash with bbolt db.Batch after running for some time,"""long running program crash here\r\n\r\n        putDB := func() {\r\n                db.Batch(func(tx *bbolt.Tx) error {\r\n                 \r\n\r\n                \r\n                })\r\n        }\r\n\r\n\r\nants.Submit(putDB) <-- pseudocode\r\n\r\n\r\n\r\n\r\ngoroutine 1225 [chan receive]:\r\nbbolt.(*DB).Batch(0xc0001a6800, 0xc000096200, 0xc0005d6a80, 0xc0007b37a8)\r\n\r\n\r\n\r\n\r\n\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:68 +0x94\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:48 +0x4c\r\n\r\ngoroutine 1295 [chan receive]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc0006230e0)\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:64 +0x75\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:48 +0x4c\r\n\r\ngoroutine 1296 [chan receive]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1(0xc000623110)\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:64 +0x75\r\ncreated by github.com/panjf2000/ants/v2.(*goWorker).run\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.3/worker.go:48 +0x4c\r\n\r\nrax    0x0\r\nrbx    0x7f578b4f9700\r\nrcx    0x7f57c60ef18b\r\nrdx    0x0\r\nrdi    0x2\r\nrsi    0x7f578b4f8a10\r\nrbp    0x7f57c6264588\r\nrsp    0x7f578b4f8a10\r\nr8     0x0\r\nr9     0x7f578b4f8a10\r\nr10    0x8\r\nr11    0x246\r\nr12    0x7f57c62b35fa\r\nr13    0x1a7\r\nr14    0x7f57c62b3530\r\nr15    0x2978710\r\nrip    0x7f57c60ef18b\r\nrflags 0x246\r\ncs     0x33\r\nfs     0x0\r\ngs     0x0""",,BUG,DONE,,0,2021-03-28T22:40:00.000+08:00,2021-03-26T01:10:12.000+08:00,2021-03-28T22:40:00.000+08:00,4169,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:844010065,https://github.com/panjf2000/ants/issues/148,,148,A proper way of using `sync.Cond`,"""Hello, there! I'd like to say this package shows great work!\r\n\r\nAccording to the doc comments in [go pkg](https://golang.org/pkg/sync/#Cond), I doubt whether this is a proper way of using conditional variable, since I see no `p.cond.L.Lock()` before calling `p.cond.Wait()`. I haven't make any test, but won't be a problem there?\r\n\r\nhttps://github.com/panjf2000/ants/blob/dbcb6a104f23b1a6a7521796b30515230353283e/pool.go#L244""",,,DONE,,0,2021-03-30T10:51:39.000+08:00,2021-03-30T10:48:12.000+08:00,2021-03-30T10:56:23.000+08:00,3,,,0,0,0,gitlab:GithubUser:37577088,fangxlmr,gitlab:GithubUser:0,,,
gitlab:GithubIssue:851256703,https://github.com/panjf2000/ants/issues/150,,150,Why delete tag v1.3.0?,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\n\r\nWhy delete tag v1.3.0?""",,,DONE,,0,2021-04-08T18:08:10.000+08:00,2021-04-06T17:52:27.000+08:00,2021-04-08T18:08:10.000+08:00,2895,,,0,0,0,gitlab:GithubUser:4394982,deliangyang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:857977427,https://github.com/panjf2000/ants/issues/151,,151,how do u pass value like goroutine?,"""e.g.\r\n\r\nfor i:=0; i<10000; i++ {\r\ngo func(abc uint64) {\r\n\r\n}(i)\r\n}\r\n\r\nhow do u do the same with ants?""",,,DONE,,0,2021-04-14T22:57:13.000+08:00,2021-04-14T22:51:13.000+08:00,2021-04-14T22:57:13.000+08:00,6,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:863400810,https://github.com/panjf2000/ants/issues/152,,152,Doubt about Pool.Free() / å…³äº Pool.Free() çš„ä¸€äº›ç–‘æƒ‘,"""I need to know whether the goroutine pool is \""full\""(blocked in `Pool.Submit()`), and I found this function `Pool.Free()`, but I'm really confused about its behavior. \r\n```\r\n// Free returns the available goroutines to work.\r\nfunc (p *Pool) Free() int {\r\n\treturn p.Cap() - p.Running()\r\n}\r\n```\r\nas you commented, it returns the avaliable goroutines, but when you created a pool with a size of -1, you will get a negative  number. So only when `Pool.Free()` returns exactly zero, can I know that the pool is \""full\"", right?\r\n\r\n\r\næˆ‘æƒ³é€šè¿‡çŸ¥é“ goroutine æ± æ˜¯å¦å·²ç»æ»¡äº†ï¼ˆæäº¤ä»»åŠ¡ `Pool.Submit()` æ—¶é˜»å¡ï¼‰ï¼Œæˆ‘æ‰¾åˆ°äº†è¿™ä¸ªå‡½æ•° `Pool.Free()`ï¼Œä½†æˆ‘å¯¹å…¶è¡Œä¸ºæœ‰ä¸€äº›ç–‘é—®ã€‚\r\n```\r\n// Free returns the available goroutines to work.\r\nfunc (p *Pool) Free() int {\r\n\treturn p.Cap() - p.Running()\r\n}\r\n```\r\næ­£å¦‚ä½ æ‰€è¯„è®ºçš„ï¼Œå®ƒè¿”å›å¯ç”¨çš„goroutineï¼Œä½†æ˜¯å½“ä½ åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º -1 çš„æ± æ—¶ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªè´Ÿæ•°ã€‚æ‰€ä»¥åªæœ‰å½“ `Pool.Free()` æ­£å¥½è¿”å› 0 æ—¶ï¼Œæˆ‘æ‰èƒ½çŸ¥é“æ± å·²æ»¡ï¼Œå¯¹å—ï¼Ÿ\r\n""",,,DONE,,0,2021-04-27T08:17:09.000+08:00,2021-04-21T10:55:09.000+08:00,2021-04-27T08:17:09.000+08:00,8482,,,0,0,0,gitlab:GithubUser:34428640,ycydsxy,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:864353725,https://github.com/panjf2000/ants/issues/153,,153,Nested ants function gives error for long running fast for loops?,"""Getting error of \r\n\r\n2021/04/21 22:28:03 worker exits from a panic: runtime error: invalid memory address or nil pointer dereference\r\n2021/04/21 22:28:03 worker exits from panic: goroutine 23634 [running]:\r\ngithub.com/panjf2000/ants/v2.(*goWorker).run.func1.1(0xc004b7ae70)\r\n        /go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.4/worker.go:58 +0x17c\r\npanic(0x68dc60, 0x9d0eb0)\r\n        /usr/lib/go-1.16/src/runtime/panic.go:965 +0x1b9\r\n\r\n\r\nif nested multi layer. is this a problem?""",,,DONE,,0,2021-05-23T14:50:27.000+08:00,2021-04-22T06:29:50.000+08:00,2021-05-23T14:50:27.000+08:00,45140,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1028877423,https://github.com/panjf2000/ants/issues/191,,191,è‡ªæ—‹é”çš„æ€§èƒ½å¯¹æ¯”æµ‹è¯•,"""![1634552555(1)](https://user-images.githubusercontent.com/22676124/137714133-c424b7b5-de1a-41af-bc1d-ee633edba695.png)\r\n\r\n\r\n\r\næµ‹è¯•æ¡ˆä¾‹ä»£ç  \r\nhttps://github.com/liu-song/ants/blob/master/internal/spinlock_test.go\r\n """,,,DONE,,0,2021-11-27T21:45:03.000+08:00,2021-10-18T17:37:35.000+08:00,2021-11-27T21:45:03.000+08:00,57847,,,0,0,0,gitlab:GithubUser:22676124,liu-song,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:869939645,https://github.com/panjf2000/ants/issues/154,,154,retrieveWorkeræ—¶å€™p.Running()è¾¹ç•Œé—®é¢˜,"""```go\r\nspawnWorker := func() {\r\n\t\tw = p.workerCache.Get().(*goWorker)\r\n\t\tw.run()\r\n\t}\r\n\r\n\tp.lock.Lock()\r\n\r\n\tw = p.workers.detach()\r\n\tif w != nil {\r\n\t\tp.lock.Unlock()\r\n\t} else if capacity := p.Cap(); capacity == -1 || capacity > p.Running() {\r\n\t\tp.lock.Unlock()\r\n\t\tspawnWorker()\r\n```\r\np.Runningå–å‡ºååˆ¤æ–­å°äºcapacityï¼Œè§£é”ï¼Œå†å¢åŠ ä¸€ä¸ªworkerï¼Œæ˜¯å¦å­˜åœ¨è¾¹ç•Œé—®é¢˜ï¼Ÿ\r\nåœ¨incrRunning()å‰ï¼Œæœ‰å…¶ä»–åç¨‹ä¹Ÿå–åˆ°äº†åŒæ ·çš„p.Running()ï¼Œæ˜¯å¦å­˜åœ¨æœ€ååç¨‹æ•°è¶…è¿‡capacity?\r\n""",,,DONE,,0,2021-05-10T20:42:43.000+08:00,2021-04-28T21:18:29.000+08:00,2021-05-10T20:42:43.000+08:00,17244,,,0,0,0,gitlab:GithubUser:78064625,LinghuChongHaha,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:890078421,https://github.com/panjf2000/ants/issues/155,,155,è€ƒè™‘å°†loopQueueçš„å®ç°æ›¿æ¢ä¸ºæ ˆ,"""æˆ‘åœ¨ä½¿ç”¨antçš„è¿‡ç¨‹å‘ç°ä¸€ä¸ªè¿™æ ·çš„caseï¼Œå½“qpså‡ºç°é™¡å¢æ—¶ï¼Œä¼šæ–°å¢å¾ˆå¤šworkeråˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œå½“æµé‡é™ä¸‹æ¥åï¼Œè¿™äº›workerå› ä¸ºè¿˜åœ¨å¾ªç¯å·¥ä½œï¼Œä¸”è¿‡æœŸæ—¶é—´è®¾ç½®åå¤§ï¼Œå¯¼è‡´workerçš„goroutineä¸€ç›´è¾¾ä¸åˆ°è¿‡æœŸæ¡ä»¶ï¼Œä¸èƒ½è¢«å›æ”¶ï¼Œæ­¤ågoroutineæ•°é‡ä¸€ç›´å¤„äºé«˜ä½ï¼Œåˆ©ç”¨ç‡ä¸‹é™ã€‚è¿™å›ºç„¶æœ‰è¿‡æœŸæ—¶é—´è®¾ç½®ä¸åˆç†çš„åŸå› ï¼Œä½†åœ¨è®¾è®¡ä¸Šä¹Ÿå­˜åœ¨ä¸€å®šç¼ºé™·ï¼Œå¦‚æœä½¿ç”¨æ ˆï¼Œworkerçš„detachå’Œinsertéƒ½åœ¨æ ˆé¡¶ï¼Œåˆ™èƒ½æ˜¾è‘—æé«˜å•ä¸ªgoroutineçš„åˆ©ç”¨ç‡ï¼Œæ ˆåº•ç”¨ä¸åˆ°çš„workerä¹Ÿèƒ½æ›´åŠæ—¶çš„è¢«å›æ”¶ï¼ŒretrieveExpiryå‡½æ•°ä»æ ˆåº•å¼€å§‹éå†ï¼ŒåŒæ ·æ»¡è¶³æ ˆåº•é¦–ä¸ªå…ƒç´ ä¸è¿‡æœŸï¼Œåˆ™æ•´ä¸ªæ ˆçš„å…ƒç´ ä¸è¿‡æœŸã€‚""",,,DONE,,0,2021-05-19T18:42:32.000+08:00,2021-05-12T21:13:58.000+08:00,2021-05-19T18:42:32.000+08:00,9928,,,0,0,0,gitlab:GithubUser:25758101,spadan,gitlab:GithubUser:0,,,
gitlab:GithubIssue:892678963,https://github.com/panjf2000/ants/issues/156,,156,retrieveExpiryä¸­expiryTimeé—®é¢˜,"""ä¸ºä»€ä¹ˆæ˜¯expiryTime := time.Now().Add(-duration)ï¼Œè€Œä¸æ˜¯expiryTime := time.Now().Add(duration)ï¼Ÿ\r\næŒ‰ç…§ç°åœ¨çš„å®ç°ï¼ŒrevertWorkerè®¾ç½®worker.recycleTime = time.Now()ï¼Œé‚£ä¹ˆexpiryTimeè‚¯å®šå¤§äºworker.recycleTimeï¼Œå¯¼è‡´workerç”¨äº†ä¸€æ¬¡å¿…å®šè¢«å›æ”¶ã€‚å¼•å…¥expiryTimeä¸å°±æ˜¯ä¸ºäº†å¤šé‡å¤åˆ©ç”¨å‡ æ¬¡å—ï¼Ÿ æœ‰ç‚¹ä¸æ˜ç™½ï¼Œæœ›è§£ç­”""",,,DONE,,0,2021-05-19T18:42:01.000+08:00,2021-05-16T22:08:19.000+08:00,2021-05-19T18:42:01.000+08:00,4113,,,0,0,0,gitlab:GithubUser:30179199,chenbyby,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:898973379,https://github.com/panjf2000/ants/issues/157,,157,æœŸæœ›æš´éœ²ä¸ª blockingNum çš„ç»Ÿè®¡æ•°é‡,"""ç›®å‰æœ‰ï¼š\r\n`p.Running()`\r\n`p.Free()`\r\n`p.Cap()`\r\n\r\nåœ¨å¹¶ä¸æƒ³æ”¾å¼€å¹¶å‘æ•°çš„åœºæ™¯ä¸‹ï¼Œé«˜å³°æ—¶ï¼Œ\r\n`p.Free()` å¯èƒ½è¾ƒé•¿æ—¶é—´ä¸º `0`ï¼Œ\r\næ­¤æ—¶å¾ˆå¸Œæœ›çŸ¥é“æ’é˜Ÿä»»åŠ¡é•¿åº¦ï¼Œå³ `blockingNum` æ•°é‡æˆ–å‰©ä½™æ’é˜Ÿæ•°é‡ `options.MaxBlockingTasks` - `blockingNum`ã€‚""",,REQUIREMENT,DONE,,0,2022-05-07T22:45:12.000+08:00,2021-05-23T17:07:25.000+08:00,2022-05-07T22:45:12.000+08:00,502897,,,0,0,0,gitlab:GithubUser:4979407,fufuok,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:907118378,https://github.com/panjf2000/ants/issues/159,,159,å…³äºpanjf2000 / ants v2.0.0ç‰ˆæœ¬ä¿®å¤çš„é—®é¢˜,"""ä½ å¥½ï¼Œæˆ‘åœ¨v2.0.0çœ‹åˆ°å¦‚ä¸‹æè¿°\r\n![image](https://user-images.githubusercontent.com/53163548/120149656-9df6c480-c21c-11eb-8631-9128417da5a3.png)\r\nä½†æ˜¯å¯¹æ¯”v1.2.0å’Œv2.0.0çš„ä»£ç ï¼Œæˆ‘æ²¡çœ‹æ‡‚æ˜¯å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œæˆ–è€…è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°ï¼Ÿ\r\nå¯å¦ç»™æˆ‘è®²è§£ä¸€ä¸‹ï¼Ÿ\r\n""",,,DONE,,0,2021-05-31T14:35:13.000+08:00,2021-05-31T14:29:42.000+08:00,2021-05-31T14:44:53.000+08:00,5,,,0,0,0,gitlab:GithubUser:53163548,guoxinyu-shopee,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:907293042,https://github.com/panjf2000/ants/issues/163,,163,å¶å‘æƒ…å†µä¸‹revertWorkerå†…time.Now()å ç”¨CPUè¾ƒé«˜,"""hiï¼Œä½ å¥½ï¼Œpprofæ€§èƒ½åˆ†ææ—¶ï¼Œ å¶å°”ä¼šå‡ºç°revertWorkerå†…time.Now()å ç”¨CPUè¾ƒé«˜çš„æƒ…å†µï¼Œæƒ³è¯·æ•™ä¸€ä¸‹ï¼Œå¦‚æœæŠŠè·å–å½“å‰æ—¶é—´æ¢æˆå¦ä¸€ç§æ€§èƒ½æ›´å¥½ä½†å¯èƒ½æœ‰è¯¯å·®ï¼ˆè¯¯å·®5msï¼‰çš„æ–¹æ³•ï¼Œä¼šå¯¹æ•´ä½“æœ‰è¾ƒå¤§å½±å“å—ï¼Ÿæˆ‘è‡ªå·±çš„ç†è§£ï¼Œé»˜è®¤1sè¿‡æœŸçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœ‰äº›workerçš„å›æ”¶æ—¶é—´å»¶è¿Ÿ1sï¼Œä½†æ˜¯ä¸å¤ªæ¸…æ¥šè¿™ä¸ªå¯¹antsæ•´ä½“çš„å½±å“""",,,TODO,,0,,2021-05-31T17:29:31.000+08:00,2021-05-31T23:06:00.000+08:00,0,,,0,0,0,gitlab:GithubUser:22535169,chiselX,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:907817424,https://github.com/panjf2000/ants/issues/164,,164,ä½¿ç”¨sync.Mapï¼Œæœ‰æ—¶ä¼šå‘ç”Ÿfatal error: concurrent map writesçš„é—®é¢˜,"""ä½ å¥½ï¼Œæˆ‘è¿™è¾¹éœ€è¦ç”¨goroutineå¯¹å•ä¸ªmapè¿›è¡Œæ“ä½œï¼Œä¸ºäº†ä¸äº§ç”Ÿconcurrent map writesçš„é—®é¢˜ï¼Œä½¿ç”¨sync.Mapï¼Œä¸é€šè¿‡æ‚¨çš„æ¡†æ¶ï¼Œå•çº¯ä½¿ç”¨goroutineè²Œä¼¼æ˜¯OKçš„ï¼Œä½†æ˜¯ä½¿ç”¨äº†è¿™ä¸ªæ¡†æ¶ï¼Œæœ‰æ—¶å€™ä¼šæŠ¥fatal error: concurrent map writesè¿™ä¸ªé—®é¢˜""",,BUG,DONE,,0,2021-06-01T10:52:29.000+08:00,2021-06-01T10:42:10.000+08:00,2021-06-01T10:52:29.000+08:00,10,,,0,0,0,gitlab:GithubUser:7382698,usst830514,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:913065024,https://github.com/panjf2000/ants/issues/165,,165,TestNonblockingSubmitWithFunc éšæœºæˆåŠŸæˆ–å¤±è´¥,"""**Describe the bug**\r\nå½“è¿è¡ŒTestNonblockingSubmitWithFuncæ—¶ï¼Œå¶å°”æˆåŠŸï¼Œå¶å°”å¤±è´¥ï¼š\r\n![image](https://user-images.githubusercontent.com/30179199/120957174-c3894e00-c787-11eb-9f08-e08af4afa86b.png)\r\nå½“å¤šæ¬¡è¿è¡Œè¯¥æµ‹è¯•å‡½æ•°ï¼Œå‡ºç°å¦‚ä¸‹ç»“æœï¼š\r\n![image](https://user-images.githubusercontent.com/30179199/120957214-dc91ff00-c787-11eb-84cf-5e4f15d91e5d.png)\r\n\r\n**Error messages/Trace logs**\r\n=== RUN   TestNonblockingSubmitWithFunc\r\n    TestNonblockingSubmitWithFunc: ants_test.go:417: \r\n        \tError Trace:\tants_test.go:417\r\n        \tError:      \tAn error is expected but got nil.\r\n        \tTest:       \tTestNonblockingSubmitWithFunc\r\n        \tMessages:   \tnonblocking submit when pool is full should get an ErrPoolOverload\r\n--- FAIL: TestNonblockingSubmitWithFunc (0.00s)\r\nFAIL\r\n\r\n**System info (please complete the following information):**\r\n - OS: macOS,2.3 GHz å…«æ ¸Intel Core i9,16 GB 2667 MHz DDR4\r\n - Go Version: 1.14.4\r\n - ants version: latest\r\n\r\nå½“p.Invoke(nil)æ”¹ä¸ºp.Invoke(Param)ï¼Œä¸ä¼šå‡ºç°è¯¥é—®é¢˜""",,BUG,DONE,,0,2021-07-28T23:32:18.000+08:00,2021-06-07T12:03:24.000+08:00,2021-07-28T23:32:18.000+08:00,74128,,,0,0,0,gitlab:GithubUser:30179199,chenbyby,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:918864340,https://github.com/panjf2000/ants/issues/166,,166,æœ€æ–°çš„åŸºå‡†æµ‹è¯•è·‘è¿‡äº†ä¹ˆï¼Œæ¯”ä¸è¿‡åŸç”Ÿçš„,"""**What is your question about ants?**\r\n\r\nBenchmarkAntsPool-12æ˜¯BenchmarkGoroutines-12çš„ä¸¤å€å¤šï¼Œæ˜¯æˆ‘çš„æœºå™¨ä¸å¯¹ä¹ˆï¼Ÿè¿˜æ˜¯åé¢ä»£ç å†™ç€å†™ç€å°±è·‘åäº†ï¼Ÿ\r\n\r\n```sh\r\ngoos: darwin\r\ngoarch: amd64\r\npkg: github.com/panjf2000/ants/v2\r\ncpu: Intel(R) Core(TM) i7-8750H CPU @ 2.20GHz\r\nBenchmarkGoroutines-12              \t       3\t 411810402 ns/op\t80012933 B/op\t 1000135 allocs/op\r\nBenchmarkSemaphore-12               \t       2\t 637331376 ns/op\t80197720 B/op\t 1002060 allocs/op\r\nBenchmarkAntsPool-12                \t       1\t1023957685 ns/op\t20676048 B/op\t 1063831 allocs/op\r\nBenchmarkGoroutinesThroughput-12    \t       3\t 403223552 ns/op\t82825797 B/op\t 1008366 allocs/op\r\nBenchmarkSemaphoreThroughput-12     \t       2\t 627645680 ns/op\t80062776 B/op\t 1000637 allocs/op\r\nBenchmarkAntsPoolThroughput-12      \t       2\t 936248712 ns/op\t 1887088 B/op\t   29047 allocs/op\r\nPASS\r\nok  \tgithub.com/panjf2000/ants/v2\t80.746s\r\n```\r\n""",,,DONE,,0,2021-06-12T00:05:34.000+08:00,2021-06-11T23:03:09.000+08:00,2021-06-18T17:59:51.000+08:00,62,,,0,0,0,gitlab:GithubUser:1940588,bingoohuang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:930705346,https://github.com/panjf2000/ants/issues/168,,168,Announcement: please replace ants v1.2.0 with v1.2.1,"""## Dear users of `ants`\r\n\r\nThis is a notice about an issue of `ants` in GO modules, the v1.2.0 has been re-tagged with a new commit, which causes the **checksum mismatch** with Go modules and you may encounter this problem sometime, see #49 for details.\r\n\r\nTo cut a long story short, the quick fix for this issue is to replace the version of v1.2.0 with v1.2.1 in your `go.mod`, then you'll be free from the tiresome **checksum mismatch** problem.\r\n\r\nI'm sorry for the inconvenience caused to you.""",,,TODO,,0,,2021-06-26T22:21:38.000+08:00,2021-06-26T22:21:38.000+08:00,0,,,0,0,0,gitlab:GithubUser:7496278,panjf2000,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:931106727,https://github.com/panjf2000/ants/issues/169,,169,Cancel all task when has any task return error,"""**How to cancel all tasks when has any task return error?**\r\nI have two pools: pool1 and pool2. The result of tasks on pool1 to send tasks for pool2. When having any task error, how to cancel all tasks running in pool1 and pool2?\r\n""",,,DONE,,0,2021-07-06T16:41:36.000+08:00,2021-06-28T10:33:47.000+08:00,2021-07-06T16:41:36.000+08:00,11887,,,0,0,0,gitlab:GithubUser:38505126,ducpx,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:932236472,https://github.com/panjf2000/ants/issues/170,,170,purgePeriodically  for cycle do nothingï¼Ÿ,"""**What is your question about ants?**\r\nhttps://github.com/panjf2000/ants/blob/master/pool_func.go#L81\r\nwhy do nothingï¼Ÿ\r\nDo you need to add this line of code ï¼Ÿ\r\nexpiredWorkers = append(expiredWorkers, idleWorkers[i])\r\n""",,,DONE,,0,2021-06-29T13:56:24.000+08:00,2021-06-29T13:47:51.000+08:00,2021-06-29T13:56:25.000+08:00,8,,,0,0,0,gitlab:GithubUser:49196656,leeliliang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:938708991,https://github.com/panjf2000/ants/issues/171,,171,å…³äºantsä½¿ç”¨åœºæ™¯çš„ç–‘é—®,"""é’ˆå¯¹å¤§è§„æ¨¡é•¿è¿æ¥ï¼ˆåˆ©ç”¨å¿ƒè·³æœºåˆ¶ï¼Œå‡ ä¹ä¸æ–­ï¼‰ï¼Œä½¿ç”¨antsæ˜¯å¦èƒ½å¸¦æ¥æ€§èƒ½æå‡å‘¢ï¼Ÿ""",,,DONE,,0,2021-07-08T09:34:38.000+08:00,2021-07-07T17:54:18.000+08:00,2021-07-08T09:34:38.000+08:00,940,,,0,0,0,gitlab:GithubUser:33331974,DMwangnima,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:946771746,https://github.com/panjf2000/ants/issues/173,,173,å¯¹äº retrieveWorker æ–¹æ³•ä¸­é˜»å¡é˜Ÿåˆ—çš„ç–‘æƒ‘,"""æ‚¨å¥½ï¼Œæˆ‘æ¯”è¾ƒç–‘æƒ‘ pool.go é‡Œ retrieveWorker æ–¹æ³•ä¸­çš„è¿™æ®µä»£ç ï¼Œè¿™é‡Œç”±äºåŠ äº†é” p.lock.Lock()ï¼Œè€Œä¸”åªæœ‰åœ¨ p.cond.Wait() ä¹‹åæ‰ä¼šè§£é”ï¼Œæ‰€ä»¥åº”è¯¥æ°¸è¿œåªæœ‰ä¸€ä¸ªgoroutineåœ¨ Wait() ä¸­é˜»å¡ç­‰å¾…ï¼Œè€Œå…¶ä»–goroutineéƒ½è¢«æŒ¡åœ¨äº† p.lock.Lock() å¤–é¢ç­‰å¾…è§£é”ã€‚é‚£ä¹ˆè¿™æ ·çš„è¯ï¼Œæˆ‘æ„Ÿè§‰ä»»åŠ¡æäº¤çš„é˜»å¡é˜Ÿåˆ—å°±å¤±å»äº†æ„ä¹‰ï¼Œå¯¹ p.blockingNum çš„è®¡æ•°ä¹Ÿæ²¡æœ‰æ„ä¹‰äº†ã€‚ä¸çŸ¥é“æˆ‘çš„æƒ³æ³•æ˜¯å¦æ­£ç¡®ã€‚\r\n`\r\n\tp.lock.Lock()\r\n\r\n\tw = p.workers.detach()\r\n\tif w != nil { // first try to fetch the worker from the queue\r\n\t\tp.lock.Unlock()\r\n\t} else if capacity := p.Cap(); capacity == -1 || capacity > p.Running() {\r\n\t\t// if the worker queue is empty and we don't run out of the pool capacity,\r\n\t\t// then just spawn a new worker goroutine.\r\n\t\tp.lock.Unlock()\r\n\t\tspawnWorker()\r\n\t} else { // otherwise, we'll have to keep them blocked and wait for at least one worker to be put back into pool.\r\n\t\tif p.options.Nonblocking {\r\n\t\t\tp.lock.Unlock()\r\n\t\t\treturn\r\n\t\t}\r\n\tretry:\r\n\t\tif p.options.MaxBlockingTasks != 0 && p.blockingNum >= p.options.MaxBlockingTasks {\r\n\t\t\tp.lock.Unlock()\r\n\t\t\treturn\r\n\t\t}\r\n\t\tp.blockingNum++\r\n\t\tp.cond.Wait() // block and wait for an available worker\r\n\t\tp.blockingNum--\r\n\t\tvar nw int\r\n\t\tif nw = p.Running(); nw == 0 { // awakened by the scavenger\r\n\t\t\tp.lock.Unlock()\r\n\t\t\tif !p.IsClosed() {\r\n\t\t\t\tspawnWorker()\r\n\t\t\t}\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif w = p.workers.detach(); w == nil {\r\n\t\t\tif nw < capacity {\r\n\t\t\t\tp.lock.Unlock()\r\n\t\t\t\tspawnWorker()\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tgoto retry\r\n\t\t}\r\n\r\n\t\tp.lock.Unlock()\r\n`""",,,DONE,,0,2021-07-17T18:55:18.000+08:00,2021-07-17T16:52:14.000+08:00,2021-07-30T10:30:06.000+08:00,123,,,0,0,0,gitlab:GithubUser:34757591,isAlbertYu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:951582378,https://github.com/panjf2000/ants/issues/175,,175,doing so to call invoke does a lot of memory allocations.,"""doing so to call invoke does a lot of memory allocations.\r\n\r\npossible to replace {}Interface with [][]byte or something similar?\r\ncoz the allocation generated by using panjf is rather unbearable in high use case.\r\n\r\n                var val [][]byte\r\n                val = append(val,[]byte{0})\r\n                val = append(val,[]byte{uint8(k)})\r\n                val = append(val,[]byte{uint8(v)})\r\n                val = append(val,[]byte{uint8(c)})\r\n                val = append(val,kX) \r\n                val = append(val,b)\r\n                pdbrpool.Invoke(&val)\r\n""",,REQUIREMENT,TODO,,0,,2021-07-23T21:29:37.000+08:00,2021-07-24T19:15:17.000+08:00,0,,,0,0,0,gitlab:GithubUser:87639173,superdolt,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:953856676,https://github.com/panjf2000/ants/issues/177,,177,"func with lots of mutex lock and unlock, when heavily called, will eat up linux threads","""func with lots of mutex lock and unlock, when heavily called, will eat up linux threads and crash.\r\n\r\nthough i increased the debug.set max threads with runtime/debug, can this be resolved? \r\n\r\nthreads doesnt seem to be released / free up too.""",,BUG,DONE,,0,2021-07-27T21:19:36.000+08:00,2021-07-27T20:58:53.000+08:00,2021-07-27T21:20:15.000+08:00,20,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:953963592,https://github.com/panjf2000/ants/issues/178,,178,"try heavily overload panjf with lots of locks and unlock, then u can see lock slow, semaphore issues and crash","""try heavily overload panjf with lots of locks and unlock, then u can see lock slow, semaphore issues and crash\r\n\r\ngoroutine 6 [chan receive]:\r\ngithub.com/panjf2000/ants/v2.(*Pool).purgePeriodically(0xc000112460)\r\n        /root/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.6/pool.go:69 +0x109\r\ncreated by github.com/panjf2000/ants/v2.NewPool\r\n        /root/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.6/pool.go:137 +0x232\r\n\r\ngoroutine 7 [chan receive]:\r\ngithub.com/panjf2000/ants/v2.(*Pool).purgePeriodically(0xc0001124d0)\r\n        /root/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.6/pool.go:69 +0x109\r\ncreated by github.com/panjf2000/ants/v2.NewPool\r\n        /root/go/pkg/mod/github.com/panjf2000/ants/v2@v2.4.6/pool.go:137 +0x232\r\n\r\ngoroutine 21 [runnable]:\r\nsync.runtime_SemacquireMutex(0x15f56f4, 0x0, 0x1)\r\n        /usr/local/go/src/runtime/sema.go:71 +0x47\r\nsync.(*Mutex).lockSlow(0x15f56f0)\r\n        /usr/local/go/src/sync/mutex.go:138 +0x105\r\nsync.(*Mutex).Lock(...)\r\n        /usr/local/go/src/sync/mutex.go:81\r\n""",,BUG,DONE,,0,2022-03-21T10:39:49.000+08:00,2021-07-27T22:48:30.000+08:00,2022-03-21T10:39:49.000+08:00,340551,,,0,0,0,gitlab:GithubUser:51492452,hiqsociety,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:959089879,https://github.com/panjf2000/ants/issues/179,,179,æ˜¯å¦å¯ä»¥é™åˆ¶å•ä¸€goroutineçš„æ‰§è¡Œæ—¶é—´,"""è¯·é—®å…³äºantsï¼Œæ˜¯å¦æœ‰æ¥å£å¯ä»¥é™åˆ¶å•ä¸€goroutineæ‰§è¡Œæ—¶é—´çš„ï¼Œæ¯”å¦‚æˆ‘ä¸€æ¬¡æ€§ä¸‹å‘20000ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯æˆ‘æ± å­å¼€äº†100ä¸ªï¼Œé‚£å¦‚æœæ‰€æœ‰çš„éƒ½é˜»å¡äº†ï¼Œæ˜¯å¦å¯ä»¥è®¾ç½®å•ä¸€goroutineåœ¨é˜»å¡20sä»¥åè‡ªåŠ¨ç»“æŸå½“å‰ä»»åŠ¡ï¼Œæ¥æ”¶æ–°çš„ä»»åŠ¡ï¼Ÿ\r\n""",,REQUIREMENT,DONE,,0,2021-08-08T11:53:20.000+08:00,2021-08-03T20:57:43.000+08:00,2021-08-08T11:53:20.000+08:00,6655,,,0,0,0,gitlab:GithubUser:17517153,Alberthchang,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:971116711,https://github.com/panjf2000/ants/issues/180,,180,åœ¨åç¨‹é‡Œé¢‘ç¹åˆ›å»ºåç¨‹æ± æœ‰å¼‚å¸¸ï¼Œè²Œä¼¼æœ‰åç¨‹æ³„éœ²çš„é—®é¢˜,"""![image](https://user-images.githubusercontent.com/19659483/129477453-879a175b-fe83-4ef1-966a-1d5e58a9be2b.png)\r\nè¿™è¾¹çš„doæ–¹æ³•ï¼Œ å¤–å±‚å¯ä»¥ç†è§£æ˜¯ä¸ªforå¾ªç¯ï¼Œ ä¼šä¸€ç›´æ‰§è¡Œï¼Œ æ¯æ¬¡æ‰§è¡Œåˆ°setCardTimeçš„æ—¶å€™ï¼Œ éƒ½ä¼šæ‰§è¡Œå¦‚ä¸‹\r\n![image](https://user-images.githubusercontent.com/19659483/129477515-663f0e4e-a9be-4c6e-9167-80a79c0240a7.png)\r\nç»è¿‡åå¤æµ‹è¯•ï¼Œ å°±æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œ å¦‚æœæŠŠå®ƒæ³¨é‡Šæ‰ï¼Œ åç¨‹æ•°é‡å’Œå†…å­˜éƒ½æ­£å¸¸ï¼Œä¸ä¼šé£™å‡ï¼Œ ä¸€æ‰“å¼€å°±å¼‚å¸¸ \r\n\r\nw.dataCenter.CarListæ˜¯ä¸ªlistæ•°ç»„ï¼Œ æœ¬æ¬¡æµ‹è¯•å¤§æ¦‚æ˜¯1kæ•°é‡\r\ngoç‰ˆæœ¬1.15\r\nantsç‰ˆæœ¬1.3\r\n\r\næˆ‘æŠŠå›¾ç‰‡ä¸­çš„åç¨‹æ± æ–¹æ³•å•ç‹¬æ‹¿å‡ºæ¥\r\n![image](https://user-images.githubusercontent.com/19659483/129477621-800ddab2-b292-441a-9360-4d7aef6aa0cc.png)\r\nç„¶åè°ƒç”¨çš„æ—¶å€™\r\n![image](https://user-images.githubusercontent.com/19659483/129477630-0c4232d1-c4c8-415d-bd46-fcfa514c87b9.png)\r\nå°±ä¸€åˆ‡æ­£å¸¸ï¼Œåç¨‹å’Œå†…å­˜éƒ½å¾ˆç¨³å®šï¼Œ ä¸çŸ¥é“è¿™æ˜¯å¦æ˜¯ä¸ªbugï¼Œ ä½†æ˜¯æˆ‘è¿™è¾¹è‚¯å®šæ˜¯æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯çº¿ä¸Šé—®é¢˜ï¼Œ å®šä½ä¸€å¤©äº†æ‰å®šä½åˆ°è¿™ä¸ª\r\n![image](https://user-images.githubusercontent.com/19659483/129477738-b167ff68-2d94-48b1-a9b3-59aa4b76d632.png)\r\nè¿™æ˜¯æˆ‘ä»¬çº¿ä¸Šçš„å†…å­˜ç›‘æ§ï¼Œ æ¯›åˆºéƒ½æ˜¯æœ‰é—®é¢˜çš„ç‰ˆæœ¬ï¼Œ pprofç›‘æ§ä¹Ÿæ˜¯ï¼Œ æœ€ä½åç¨‹æ•°éƒ½åœ¨ç¼“æ…¢å¢é•¿\r\n\r\n![image](https://user-images.githubusercontent.com/19659483/129477761-9e47d668-346d-4868-b0de-af607aa386e8.png)\r\n\r\nç„¶åä¸Šé¢è¿™ä¸ªå›¾ï¼Œ æ˜¯æˆ‘æ”¹åŠ¨ä¹‹åçš„å†…å­˜æ­£å¸¸æƒ…å†µ""",,BUG,DONE,,0,2021-11-27T17:17:03.000+08:00,2021-08-15T19:55:35.000+08:00,2021-11-27T17:17:03.000+08:00,149601,,,0,0,0,gitlab:GithubUser:19659483,ohmygd,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:971511276,https://github.com/panjf2000/ants/issues/181,,181,ä¸å¤ªæ˜ç™½maxBlockingTasksçš„ä½œç”¨,"""retrieveWorker å‡½æ•°é‡Œé¢æœ‰ä¸‹é¢è¿™æ®µä»£ç ï¼š\r\nif p.maxBlockingTasks != 0 && p.blockingNum >= p.maxBlockingTasks { \r\n\tp.lock.Unlock()\r\n\treturn nil\r\n}\r\np.blockingNum++\r\np.cond.Wait()\r\np.blockingNum--\r\n\r\nè¿™é‡Œé¢æˆ‘çš„ç†è§£æ˜¯p.blockingNumåº”è¯¥ä¸ä¼šè¶…è¿‡2å§ï¼Œå› ä¸ºretrieveWorker é‡Œé¢æœ‰p.lock.Lock()åŠ é”ï¼ŒåŒä¸€æ—¶åˆ»p.blockingNumä¸ä¼šæœ‰å¹¶å‘æ“ä½œï¼Œå½“p.cond.Wait()è¿™é‡Œè¢«å”¤é†’åï¼Œåˆæ‰§è¡Œäº†p.blockingNum-- æ“ä½œï¼Œä¸€åŠ ä¸€å‡ï¼Œæœ€åp.blockingNumåˆå›å½’ä¸º0ï¼Œæ‰€ä»¥ä¸å¤ªæ˜ç™½maxBlockingTasksçš„å®ç°æ˜¯ä¸æ˜¯æœ‰è¾¾åˆ°ä½œè€…æœ¬æ„ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çš„åˆ†ææœ‰è¯¯ï¼Œè¿˜æœ›æ½˜å¸…æœ‰ç©ºå¸®å¿™è§£ç­”ä¸€ç•ªï¼Œè°¢è°¢ï¼\r\n""",,,DONE,,0,2021-08-16T17:49:22.000+08:00,2021-08-16T16:51:30.000+08:00,2021-08-16T17:50:14.000+08:00,57,,,0,0,0,gitlab:GithubUser:10394162,jackerlu,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:984782442,https://github.com/panjf2000/ants/issues/182,,182,é™åˆ¶æ¯ç§’é’Ÿæœ€å¤§æ‰§è¡Œæ•°é‡,"""**Is your feature request related to a problem? Please describe.**\r\nI want use this lib to request a list of URL (restapi). But it limit request speed. If I didn't comply, It will throw a error.\r\næˆ‘æƒ³è¦è¯·æ±‚ä¸€ä¸ªURLåˆ—è¡¨ï¼ˆä»–ä»¬éƒ½æ˜¯restapiï¼‰ï¼Œä½†æ˜¯æ¥å£æ˜¯æœ‰é™é€Ÿçš„ï¼Œè¶…è¿‡é™é€Ÿæ¥å£å°±ä¼šè¿”å›é”™è¯¯ã€‚\r\n\r\n**Describe the solution you'd like**\r\nSo I want a speedLimit option to limit go routine run  number every second.\r\nMaybe use channel and time.ticker to support it.\r\næ‰€ä»¥æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæ¯ç§’æœ€å¤§taskè¿è¡Œæ•°æˆ–è€…æœ€å°è¿è¡Œæ—¶é—´çš„å‚æ•°ï¼Œåº”è¯¥å¯ä»¥é€šè¿‡ä½¿ç”¨channelæˆ–time.tickeræ¥å®ç°ã€‚\r\n\r\n**Describe alternatives you've considered**\r\nIf this lib cannot support it, Maybe I'll add a time.ticker channel reciever at the head of worker function.\r\nå¦‚æœåº“æ— æ³•æä¾›è¿™ä¸ªå‚æ•°æˆ–è€…ä¸åº”è¯¥æä¾›æ­¤å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆæˆ‘åº”è¯¥ä¼šåœ¨workerå‡½æ•°çš„å¼€å¤´å¢åŠ ä¸Štime.ticker chennelçš„æ¥æ”¶å™¨æ¥å®Œæˆé™åˆ¶\r\n""",,REQUIREMENT,DONE,,0,2021-09-04T18:21:31.000+08:00,2021-09-01T15:06:47.000+08:00,2021-09-04T18:21:31.000+08:00,4514,,,0,0,0,gitlab:GithubUser:3294100,likyh,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:987520012,https://github.com/panjf2000/ants/issues/183,,183,æä¾›éé˜»å¡çš„ Submit() æ–¹æ³•,"""**Is your feature request related to a problem? Please describe.**\r\nA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\r\n\r\n**Describe the solution you'd like**\r\næœŸæœ›poolæœ‰ä¸ªæäº¤ä»»åŠ¡çš„æ–¹æ³•ï¼Œè¯¥æäº¤ä»»åŠ¡æ–¹æ³•æ˜¯éé˜»å¡çš„ï¼Œè€Œä¸”ä»»åŠ¡æ°¸ä¹…ä¸ä¼šè¢«ä¸¢å¼ƒï¼Œå½“è¶…è¿‡äº†capacityåï¼Œpoolå†…éƒ¨ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—æˆ–è€…æ•°ç»„å­˜å‚¨è¯¥ä»»åŠ¡ã€‚\r\n\r\n**Describe alternatives you've considered**\r\nA clear and concise description of any alternative solutions or features you've considered.\r\n\r\n**Additional context**\r\nAdd any other context or screenshots about the feature request here.\r\n""",,REQUIREMENT,DONE,,0,2021-09-03T17:37:41.000+08:00,2021-09-03T16:05:01.000+08:00,2021-09-03T23:18:52.000+08:00,92,,,0,0,0,gitlab:GithubUser:7950702,liracle,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1047896477,https://github.com/panjf2000/ants/issues/194,,194,How do I call database insert operation using ants,"""I have a for loop, which inserts data into the 2 different tables. How can I use ants in this case.\r\n\r\n```go\r\n\r\nfor _, row := range rows {\r\n user := User{}\r\n user.Name = row.Name\r\n user.Email = row.Email\r\n err := dm.Insert(&user)\r\n if err != nil {\r\n  panic(err)\r\n }\r\n address := Address{}\r\n address.Address1 = row.Address1\r\n address.Address2 = row.Address2\r\n address.PinCode = row.PinCode\r\n address.City = row.City\r\n err := dm.Insert(&address)\r\n if err != nil {\r\n  panic(err)\r\n }\r\n}\r\n```\r\n""",,,TODO,,0,,2021-11-09T04:38:11.000+08:00,2022-03-10T15:27:10.000+08:00,0,,,0,0,0,gitlab:GithubUser:16970687,kiranupadhyak,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1054484973,https://github.com/panjf2000/ants/issues/195,,195,pool should be Independence,"""every goWork have Pool referenceï¼Œit is very hard to understand.\r\nmaybe have a struct map will better \r\nthx """,,,DONE,,0,2021-11-17T21:07:32.000+08:00,2021-11-16T14:08:34.000+08:00,2021-11-17T21:07:32.000+08:00,1858,,,0,0,0,gitlab:GithubUser:45867365,venusDo,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1058613251,https://github.com/panjf2000/ants/issues/196,,196,é¢‘ç¹é€šè¿‡pool.Tuneæ–¹æ³•æ¥å®ç°åŠ¨æ€å¢åŠ /å‡å°‘åç¨‹çš„æ•°é‡,"""å¤§æ¦‚çš„ä»£ç é€»è¾‘ï¼Œåœ¨ä¸€ä¸ªå®šæ—¶å™¨å†…è¿›è¡Œäº†é€šé“ä»»åŠ¡çš„æ•°é‡çš„ç»Ÿè®¡ï¼Œé€šè¿‡è¿™ä¸ªé€šé“çš„ä»»åŠ¡æ•°é‡åœ¨ä¸€å®šçš„æ—¶é—´ï¼Œæ¥é€šè¿‡pool.Tuneæ–¹æ³•è°ƒæ•´åç¨‹æ± çš„æ•°é‡ï¼Œ ä½†æ˜¯ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œé€šè¿‡poll.*é‡Œé¢æä¾›çš„æ–¹æ³•å»ç»Ÿè®¡å½“å‰æœ‰ï¼Œå¤šå°‘åç¨‹å’Œç©ºé—²åç¨‹ï¼Œä¼šå‡ºç°ä¸€å®šçš„è´Ÿæ•°ï¼Œ\r\n\r\npool.Tune(100)//é€šé“ä»»åŠ¡æœ‰200ä¸ªï¼Œå¼€å¯100ä¸ªåç¨‹å¤„ç†\r\n\r\npool.Tune(500)//é€šé“ä»»åŠ¡å¤§äº1000ä¸ªï¼Œè°ƒæ•´åç¨‹æ•°é‡ä¸º500\r\n\r\npool.Tune(10)// é€šé“ä»»åŠ¡å°äº100ï¼Œå°±æŠŠä»»åŠ¡è°ƒæ•´ä¸º10åç¨‹\r\nä»¥æ­¤ç±»æ¨æ¥å®ç° åç¨‹çš„åŠ¨æ€è°ƒæ•´ï¼Œ\r\nå‡å¦‚ç›´æ¥ä»500ä¸‹è°ƒåˆ°10 ä¼šæœ‰ä»€ä¹ˆä¸å¯ä»¥é¢„ä¼°çš„é—®é¢˜å—ï¼Ÿ\r\nï¼ˆåç»­è´´ä»£ç ï¼‰""",,,DONE,,0,2021-11-27T17:17:15.000+08:00,2021-11-19T22:50:48.000+08:00,2021-11-27T17:17:15.000+08:00,11186,,,0,0,0,gitlab:GithubUser:19727273,longrbl,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1060770678,https://github.com/panjf2000/ants/issues/197,,197,åœ¨ä¼ ç»™Submitçš„taskå‡½æ•°ä¸­è°ƒç”¨Submitå¯èƒ½å¯¼è‡´block,"""**Describe the bug**\r\n\r\nåœ¨ä¼ ç»™Submitçš„taskå‡½æ•°ä¸­è°ƒç”¨Submitå¯èƒ½å¯¼è‡´block\r\n\r\nä¸‹é¢æ˜¯ä¸€æ®µç¤ºä¾‹ä»£ç ï¼š\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""time\""\r\n\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\nfunc main() {\r\n\r\n\tp, _ := ants.NewPool(100)\r\n\r\n\tfor {\r\n\t\tp.Submit(func() {\r\n\t\t\tfor i := 0; i < 3; i++ {\r\n\t\t\t\tp.Submit(func() {\r\n\t\t\t\t\tfmt.Println(time.Now().Unix())\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n```\r\n\r\nåœ¨ubuntu 20.04 amd64å¹³å°ï¼Œä½¿ç”¨go 1.17ç‰ˆæœ¬è¿è¡Œä¸Šè¿°ç¨‹åºï¼Œä¼šå¯¼è‡´ç¨‹åºé”ä½ã€‚\r\n\r\n**To Reproduce**\r\n\r\nåœ¨linuxä¸Šè¿è¡Œä¸Šè¿°ç¨‹åºã€‚\r\n\r\n**Expected behavior**\r\n\r\næ²¡æœ‰é”ä½ï¼Œä¸€ç›´æ‰§è¡Œä¸‹å»ã€‚\r\n\r\n**Error messages/Trace logs**\r\n\r\n\r\n\r\n**System info (please complete the following information):**\r\n - OS: linux\r\n - Go Version: 1.17\r\n - ants version: 2.4.6\r\n\r\n**Additional context**\r\n\r\næˆ‘ä¸ç¡®è®¤åœ¨Submitæäº¤çš„taskå‡½æ•°ä¸­å†æ¬¡è°ƒç”¨Submitæ˜¯å¦æ˜¯okçš„ï¼Ÿæ‰¾äº†antsæ–‡æ¡£ï¼Œæ²¡çœ‹åˆ°å†™ä¸å…è®¸åœ¨Submitä¸­è°ƒç”¨Submitã€‚\r\n\r\nå¦å¤–åˆæ­¥åˆ†æäº†ä¸€ä¸‹ï¼ŒSubmitçš„taskä¼šè¢«åˆ†é…ç»™poolä¸­çš„workerã€‚å¦‚æœæŸä¸ªworker1æ‰§è¡Œtask1ï¼Œè€Œtask1åˆè°ƒç”¨Submit task2ï¼Œä½†task2æ°å¥½åˆè¢«åˆ†ç»™worker1ï¼Œè¿™æ ·å°±é”ä½äº†ã€‚åŸºäºè¿™ä¸ªåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å¤ç°ï¼š\r\n\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\""fmt\""\r\n\t\""time\""\r\n\r\n\t\""github.com/panjf2000/ants/v2\""\r\n)\r\n\r\nfunc main() {\r\n\tp, _ := ants.NewPool(1)\r\n\r\n\terr := p.Submit(func() {\r\n\t\tfmt.Println(\""func in first submit...\"")\r\n\t\terr := p.Submit(func() {\r\n\t\t\tfmt.Println(\""submit in submit ...\"")\r\n\t\t\tfmt.Println(time.Now().Unix())\r\n\t\t\tfmt.Println(\""submit in submit ok\"")\r\n\t\t})\r\n\r\n\t\tif err != nil {\r\n\t\t\tfmt.Println(\""func in first submit err:\"", err)\r\n\t\t\treturn\r\n\t\t}\r\n\t\tfmt.Println(\""func in first submit ok\"")\r\n\t})\r\n\r\n\tif err != nil {\r\n\t\tfmt.Println(\""first submit error:\"", err)\r\n\t}\r\n\r\n\ttime.Sleep(5 * time.Second)\r\n}\r\n```\r\n\r\næˆ‘ä»¬ä»…åœ¨poolä¸­æ”¾ç½®ä¸€ä¸ªworkerã€‚è¿™æ ·å°±ä¼šå¯¼è‡´blockã€‚\r\n\r\n""",,BUG,DONE,,0,2021-11-23T23:57:13.000+08:00,2021-11-23T10:15:39.000+08:00,2021-11-29T16:12:19.000+08:00,821,,,0,0,0,gitlab:GithubUser:419088,bigwhite,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1074045507,https://github.com/panjf2000/ants/issues/199,,199,worker with func exits from a panic: sync: negative WaitGroup counter,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\n![image](https://user-images.githubusercontent.com/27792650/145157017-30598557-3105-4558-905e-d7fd11e73fb8.png)\r\n\r\n### **ERROR**\r\n\r\n![image](https://user-images.githubusercontent.com/27792650/145156779-48c197a9-4dc8-4ea2-84db-35c03efe1990.png)\r\n\r\n\r\n\r\n\r\nCentOS6.9 x64      go version go1.17.3 linux/amd64\r\n\r\n""",,,TODO,,0,,2021-12-08T14:05:37.000+08:00,2021-12-19T16:13:55.000+08:00,0,,,0,0,0,gitlab:GithubUser:27792650,WyntersN,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1074084207,https://github.com/panjf2000/ants/issues/200,,200,è¯·é—®ä½¿ç”¨é»˜è®¤ AntsPool éœ€è¦æ‰‹åŠ¨é‡Šæ”¾èµ„æºå—ï¼Ÿ,"""hiï¼Œæˆ‘åˆšä¸Šæ‰‹è¿™ä¸ªç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°æ‰‹çš„é—®é¢˜ã€‚\r\n\r\nåœ¨æˆ‘ä½¿ç”¨ ants.Submit(func() {}) è¿›è¡Œå·¥ä½œæ—¶ï¼Œæœªæ‰‹åŠ¨åˆå§‹åŒ–ä¸€ä¸ª poolï¼Œants ä¼šåˆ›å»ºä¸€ä¸ªé»˜è®¤æ± ã€‚\r\n\r\nåœ¨æˆ‘ä¸éœ€è¦é‡ç½®èµ„æºçš„æƒ…å†µä¸‹ï¼Œæˆ‘æ˜¯å¦ä¸ç”¨å»è€ƒè™‘è°ƒç”¨ pool.Release() é‡Šæ”¾èµ„æºå‘¢ï¼Ÿæˆ–è€…è¯´åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æˆ‘éœ€è¦é‡Šæ”¾ pool ï¼Ÿæˆ–è®¸æ˜¯åœ¨é¡¹ç›®é‡æ–°éƒ¨ç½²æ—¶ï¼Ÿ\r\n""",,,DONE,,0,2022-05-07T22:57:13.000+08:00,2021-12-08T15:10:39.000+08:00,2022-05-07T22:57:13.000+08:00,216466,,,0,0,0,gitlab:GithubUser:62499904,guowei-gong,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1076267066,https://github.com/panjf2000/ants/issues/201,,201,ä½ å¥½ï¼Œè¯·é—®å¯ä»¥å¼€ä¸ªå¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸€ç›´ä¸å…³é—­å—ï¼Ÿä¼šä¸ä¼šå ç”¨å¾ˆé«˜å†…å­˜æˆ–è€…cpu,"""**What is your question about ants?**\r\n\r\nå¯ä»¥å¼€ä¸ªå¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸€ç›´ä¸å…³é—­å—ï¼Ÿä¼šä¸ä¼šå ç”¨å¾ˆé«˜å†…å­˜æˆ–è€…cpu\r\n\r\nPlease describe your question meticulously.\r\n\r\nä¼ªä»£ç ï¼š\r\n\r\n```\r\np, _ := ants.NewPoolWithFunc(pos, taskFunc, ants.WithNonblocking(true))\r\ndefer p.Release()\r\nfor {\r\n...\r\nvalue, ok := q.Get()\r\np.Invoke(value)\r\n...\r\n}\r\n```\r\nè°¢è°¢""",,,DONE,,0,2021-12-11T20:09:21.000+08:00,2021-12-10T09:12:49.000+08:00,2021-12-11T20:09:21.000+08:00,2096,,,0,0,0,gitlab:GithubUser:43238749,shikingram,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1078047238,https://github.com/panjf2000/ants/issues/202,,202,å…³é—­Poolæ—¶å‡ºç°å¼‚å¸¸è¡Œä¸º,"""æƒ…æ™¯ï¼šä¸¤ä¸ªgoroutineåœ¨æ¨¡æ‹Ÿç”Ÿäº§è€…å‘Poolå‘é€ä»»åŠ¡ï¼Œä»»åŠ¡éœ€è¦æ‰§è¡Œä¸€å®šæ—¶é—´ï¼Œä¸€æ®µæ—¶é—´åéœ€è¦å…³é—­æœåŠ¡ç«¯ï¼ŒæœŸæœ›ç›¸å…³goroutineèƒ½æ­£å¸¸é€€å‡º\r\né—®é¢˜ï¼šå…¶ä¸­ä¸€ä¸ªgoroutineæ— æ³•é€€å‡º\r\næµ‹è¯•ä»£ç ï¼š\r\n```go\r\nfunc TestStop(t *testing.T) {\r\n\tvar wg sync.WaitGroup\r\n\tp, _ := NewPoolWithFunc(1, func(i interface{}) {\r\n\t\tfmt.Println(\""do task\"", i)\r\n\t\ttime.Sleep(2 * time.Second)\r\n\t})\r\n\twg.Add(2)\r\n\tgo func() {\r\n\t\tfmt.Println(\""start aaa\"")\r\n\t\tdefer func() {\r\n\t\t\twg.Done()\r\n\t\t\tfmt.Println(\""stop aaa\"")\r\n\t\t}()\r\n\t\tfor i := 0; i < 30; i++ {\r\n\t\t\tp.Invoke(i)\r\n\t\t}\r\n\t}()\r\n\r\n\tgo func() {\r\n\t\tfmt.Println(\""start bbb\"")\r\n\t\tdefer func() {\r\n\t\t\twg.Done()\r\n\t\t\tfmt.Println(\""stop bbb\"")\r\n\t\t}()\r\n\t\tfor i := 100; i < 130; i++ {\r\n\t\t\tp.Invoke(i)\r\n\t\t}\r\n\t}()\r\n\r\n\ttime.Sleep(5 * time.Second)\r\n\tp.Release()\r\n\twg.Wait()\r\n}\r\n```\r\nants version: v2.4.7 SHA-1: 1e897421860606afc3d1304cafe5cd187cee13e9\r\ngo version: 1.17.2""",,BUG,DONE,,0,2022-02-08T13:53:49.000+08:00,2021-12-13T11:36:28.000+08:00,2022-02-08T13:53:49.000+08:00,82217,,,0,0,0,gitlab:GithubUser:43245434,zhu121,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1080729448,https://github.com/panjf2000/ants/issues/203,,203,What is the appropriate number of goroutine pools for different hardware resources?,""" For example, what is the number of goroutine pools for a 4-core 8G device?\r\n""",,,DONE,,0,2021-12-16T21:29:49.000+08:00,2021-12-15T16:31:33.000+08:00,2021-12-16T21:29:49.000+08:00,1738,,,0,0,0,gitlab:GithubUser:19580983,NICEXAI,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1083013181,https://github.com/panjf2000/ants/issues/204,,204,å¦‚ä½•è®¾ç½®åç¨‹æ± åˆå§‹åç¨‹çš„å¤§å°çš„å‘¢ï¼Ÿæœ‰æ²¡æœ‰è®¡ç®—å…¬å¼ï¼Ÿ,"""**What is your question about ants?**\r\nPlease describe your question meticulously.\r\nå¦‚ä½•è®¾ç½®åç¨‹æ± åˆå§‹åç¨‹çš„å¤§å°çš„å‘¢ï¼Ÿæœ‰æ²¡æœ‰è®¡ç®—å…¬å¼ï¼Ÿå½“å‰çš„æœºå™¨ç¯å¢ƒ4æ ¸8G""",,,DONE,,0,2022-03-09T15:13:26.000+08:00,2021-12-17T16:36:44.000+08:00,2022-03-09T15:13:26.000+08:00,117996,,,0,0,0,gitlab:GithubUser:12879248,18310983239,gitlab:GithubUser:7496278,panjf2000,,
gitlab:GithubIssue:1094905000,https://github.com/panjf2000/ants/issues/205,,205,å½“ä½¿ç”¨Tune(size int)æ”¾å¤§å®¹é‡æ—¶ï¼Œä¹‹å‰blockingçš„ä»»åŠ¡å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ,"""å½“ä½¿ç”¨Tune(size int)æ”¾å¤§å®¹é‡æ—¶ï¼Œä¹‹å‰blockingçš„ä»»åŠ¡å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ\r\nç»è¿‡æµ‹è¯•ï¼Œæ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªä»»åŠ¡ç»“æŸåæ‰ä¼šæŒ‰ç…§å½“å‰è¢«Tuneåçš„çœŸå®capå»æ‰§è¡Œä»»åŠ¡\r\n\r\nè¿™é‡Œæƒ³é—®ä¸€ä¸‹é™¤äº†æˆ‘åœ¨å¤–åšæŒºcapå˜åŒ–åå†æäº¤æ–°ä»»åŠ¡è¿™ç§æ–¹æ³•å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰åˆ«çš„æ–¹æ³•å¯ä»¥è®©æˆ‘åœ¨æ”¾å¤§å®¹é‡åç«‹å³æ‰§è¡Œblockingçš„ä»»åŠ¡\r\n""",,,DONE,,0,2022-02-14T21:51:40.000+08:00,2022-01-06T10:23:30.000+08:00,2022-02-14T21:51:41.000+08:00,56848,,,0,0,0,gitlab:GithubUser:12636470,nzx824,gitlab:GithubUser:7496278,panjf2000,,
